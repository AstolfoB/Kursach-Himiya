###########################
# Russian Civil War Events
###########################

add_namespace = rcw_bfk

# Отделение Эстонии после революции
country_event = {
	id = rcw_bfk.1
	title = rcw_bfk.1.t
	desc = rcw_bfk.1.d
	picture = GFX_report_event_north_corps_Pskov
	
	trigger = {
		tag = RUS
		has_country_flag = RUS_Oktober_revolution_fired
		has_war_with = GER
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = rcw_bfk.1.a
		add_political_power = 25
		ai_chance = {
			factor = 999
		}
	}
	option = {
		name = rcw_bfk.1.b
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_controlled_by = ROOT
				is_core_of = EST
			}
			EST = { transfer_state = PREV }
		}
		EST = {
			set_politics = { ruling_party = despotism }
			#load_oob = EST_1917
		}
		ai_chance = {
			factor = 0
		}
	}
}
# Германский империализм
country_event = {
	id = rcw_bfk.2
	title = rcw_bfk.2.t
	desc = rcw_bfk.2.d
	picture = GFX_report_event_north_corps_Pskov
	
	trigger = {
		tag = GER
		EST = { exists = yes is_subject = no NOT = { has_war_with = GER } }
		any_country = {
			is_neighbor_of = EST
			OR = {
				tag = GER
				is_subject_of = GER
				is_in_faction_with = GER
			}
		}
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = rcw_bfk.2.a
		add_political_power = -25
		annex_country = {
			target = EST
			transfer_troops = no
		}
		ai_chance = {
			factor = 999
		}
	}
	option = {
		name = rcw_bfk.2.b
		ai_chance = {
			factor = 0
		}
	}
}
# Создание эстонской армии
country_event = {
	id = rcw_bfk.3
	title = rcw_bfk.3.t
	desc = rcw_bfk.3.d
	picture = GFX_report_event_north_corps_Pskov
	
	trigger = {
		tag = EST
		is_puppet = no
		exists = yes
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 2
	}
	
	option = {
		name = rcw_bfk.3.a
		remove_ideas_with_trait = mobilization_laws
		add_ideas = volunteer_only
		load_oob = EST_1917
		country_event = { id = rcw_bfk.5 days = 7 }
		country_event = { id = rcw_bfk.6 days = 14 }
	}
}
# Эстляндская трудовая коммуна
country_event = {
	id = rcw_bfk.4
	title = rcw_bfk.4.t
	desc = rcw_bfk.4.d
	picture = GFX_report_event_north_corps_Pskov
	
	trigger = {
		tag = RUS
		has_country_flag = RUS_Oktober_revolution_fired
		has_war_with = EST
		controls_state = 915
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = rcw_bfk.4.a
		every_state = {
			limit = {
				is_owned_by = EST
				is_core_of = EST
				is_controlled_by = RUS
			}
			set_state_flag = EST_RUS_occ
		}
		EST = {
			start_civil_war = {
				ideology = communism
				size = 0.1
				capital = 915
				states_filter = { has_state_flag = EST_RUS_occ }
				keep_unit_leaders_trigger = { always = yes }
			}
		}
		every_state = {
			limit = {
				has_state_flag = EST_RUS_occ
			}
			clr_state_flag = EST_RUS_occ
		}
		every_country = {
			limit = { original_tag = EST has_government = communism }
			set_cosmetic_tag = EST_labor_commune
		}
		if = {
			limit = { has_war_with = NWA }
			every_country = {
				limit = { original_tag = EST has_government = communism }
				declare_war_on = {
					target = NWA
					type = annex_everything
				}
			}
		}
		ai_chance = {
			factor = 999
		}
	}
	option = {
		name = rcw_bfk.4.b
		ai_chance = {
			factor = 0
		}
	}
}
# Договор с северным корпусом
#country_event = {
#	id = rcw_bfk.5
#	title = rcw_bfk.5.t
#	desc = rcw_bfk.5.d
#	picture = GFX_report_event_north_corps_Pskov
#	
#	is_triggered_only = yes
#	
#	fire_only_once = yes
#	
#	mean_time_to_happen = {
#		days = 2
#	}
#	
#	option = {
#		name = rcw_bfk.5.a
#		add_political_power = -25
#		add_manpower = 8000
#		load_oob = EST_north_corp
#	}
#}
# Конец мобилизации
country_event = {
	id = rcw_bfk.6
	title = rcw_bfk.6.t
	desc = rcw_bfk.6.d
	picture = GFX_report_event_north_corps_Pskov
	
	trigger = {
		tag = EST
		is_puppet = no
		exists = yes
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 2
	}
	
	option = {
		name = rcw_bfk.6.a
		remove_ideas_with_trait = mobilization_laws
		add_ideas = service_by_requirement
		load_oob = EST_1918
	}
}
# Финны отправляют помощь в Эстонию
country_event = {
	id = rcw_bfk.7
	title = rcw_bfk.7.t
	desc = rcw_bfk.7.d
	picture = GFX_report_event_north_corps_Pskov
	
	trigger = {
		tag = FIN
		is_puppet = no
		has_global_flag = FIN_civil_war_end
		NOT = {OR = {has_government = radical_socialsim has_government = communism}}
		EST = {exists = yes NOT = {OR = {has_government = radical_socialsim has_government = communism}} OR = {has_war_with = SLT AND = {has_war_with = RUS RUS = {OR = {has_government = radical_socialsim has_government = communism}}}}}
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	#option = {
		#name = rcw_bfk.7.a
		#trigger = {
		#has_equipment = {
				#infantry_equipment > 999
			#}
		#}
		#send_equipment = {
				#type = infantry_equipment
				#amount = 1000
				#target = EST
			#}
	#}
		
	option = {
		name = rcw_bfk.7.b
		trigger = {
		has_equipment = {
				infantry_equipment > 999
			}
		}
		send_equipment = {
				type = infantry_equipment
				amount = 1000
				target = EST
			}
		ai_chance = {
			factor = 999
		}
	}
	
	option = {
		name = rcw_bfk.7.c
		add_political_power = -50
		ai_chance = {
			factor = 0
		}
	}
}
# Белые просят отдать оккупированные территории России у Эстонии
#country_event = {
#	id = rcw_bfk.9
#	title = rcw_bfk.9.t
#	desc = rcw_bfk.9.d
#	picture = GFX_report_event_north_corps_Pskov
#	
#	trigger = {
#		tag = EST
#		has_war_with = RUS
#		NWA = {exists = yes has_war_with = RUS}
#		NOT = {has_war_with = NWA}
#	}
#	is_triggered_only = yes
#	
#	fire_only_once = yes
#	
#	mean_time_to_happen = {
#		days = 0
#	}
#	
#	option = {
#		name = rcw_bfk.9.a
#		delete_unit_template_and_units = "Pekhotnyy polk"
#		every_state = {
#		limit = {is_owned_by = RUS is_controlled_by = EST}
#		set_controller = NWA
#		}
#		ai_chance = {
#			factor = 999
#		}
#	}
#	
#	option = {
#		name = rcw_bfk.9.b
#		ai_chance = {
#			factor = 0
#		}
#	}
#}
# Эстония может помочь Латвии в борьбе с ЗДА
country_event = {
	id = rcw_bfk.10
	title = rcw_bfk.10.t
	desc = rcw_bfk.10.d
	picture = GFX_report_event_north_corps_Pskov
	
	trigger = {
		tag = EST
		is_puppet = no
		LAT = {has_war_with = WVA}
		NOT = {has_war_with = WVA has_war_with = LAT}
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = rcw_bfk.7.a
		WVA = {
		declare_war_on = {
    		target = EST
    		type = annex_everything
			}
		}
	}
	
	option = {
		name = rcw_bfk.7.b
		add_popularity = { ideology = despotism popularity = -0.1 }
	}
}
# Самоопределение Латышей на брестских мирных переговорах
country_event = {
	id = rcw_bfk.21
	title = rcw_bfk.21.t
	desc = rcw_bfk.21.d
	picture = GFX_report_event_north_corps_Pskov
	
	trigger = {
		tag = RUS
		has_war_with = GER
		OR = {
			has_idea = brest_negotiation_truce_Russia_and_allies
			has_idea = brest_negotiation_truce_Central_powers
		}
		any_state = {
			OR = {
				state = 12
				state = 190
				state = 865
				state = 867
				state = 1001
			}
			is_owned_by = ROOT
			is_controlled_by = ROOT
		}
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 10
	}
	
	option = {
		name = rcw_bfk.21.a
		every_state = {
			limit = { is_core_of = LAT }
			add_core_of = SLT
		}
		every_state = {
			limit = {
				is_core_of = SLT
				is_owned_by = ROOT
				is_controlled_by = ROOT
			}
			SLT = { transfer_state = PREV }
		}
		SLT = { load_oob = SLT_1917 add_ideas = alliance_neutrality give_military_access = RUS }
		ai_chance = {
			factor = 999
		}
	}
	option = {
		name = rcw_bfk.21.b
		ai_chance = {
			factor = 0
		}
	}
}
# Германский империализм
country_event = {
	id = rcw_bfk.22
	title = rcw_bfk.22.t
	desc = rcw_bfk.22.d
	picture = GFX_report_event_north_corps_Pskov
	
	trigger = {
		tag = GER
		KUR = { exists = yes is_subject_of = GER }
		RUS = { has_country_flag = RUS_brest_peace_fired }
		SLT = { exists = yes is_subject = no NOT = { has_war_with = GER } }
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = rcw_bfk.22.a
		add_political_power = -25
		declare_war_on = {
			target = SLT
			type = annex_everything
		}
	}
	option = {
		name = rcw_bfk.22.b
		KUR = { add_autonomy_score = { value = 100 localization = ind_points_100_for_KUR } }
	}
}

# Вывод немецких войск из Пскова
country_event = {
	id = rcw_bfk.101
	title = rcw_bfk.101.t
	desc = rcw_bfk.101.d
	picture = GFX_report_event_north_corps_Pskov
	
	trigger = {
		has_start_date < 1918.11.11
		tag = GER
		OR = { has_country_flag = GER_monarchy_fall has_global_flag = WWI_GER_HAS_CAPITULATED }
		owns_state = 209
		RUS = { has_country_flag = RUS_brest_peace_fired }
		NOT = { has_war_with = RUS }
		NOT = { has_war_with = UBD }
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	fire_only_once = yes
	
	option = {
		name = rcw_bfk.101.a
		every_state = {
			limit = {
				is_owned_by = ROOT
				OR = {
					region = 132
					state = 1004
					state = 207
				}
			}
			NWA = { transfer_state = PREV }
		}
		if = {
			limit = { NWA = { exists = yes } }
			NWA = { set_cosmetic_tag = NWA_north_corps load_oob = NWA_north_corps }
		}
		if = {
			limit = { UBD = { exists = yes } }
			every_state = {
				limit = {
					is_owned_by = ROOT
					is_core_of = LAT
					region = 37
				}
				UBD = { transfer_state = PREV }
			}
			else = {
				every_state = {
					limit = {
						is_owned_by = ROOT
						is_core_of = LAT
						region = 37
					}
					LAT = { transfer_state = PREV }
				}
			}
		}
		hidden_effect = { RUS = { country_event = rcw_bfk.102 } }
	}
	option = {
		trigger = { is_ai = no }
		name = rcw_bfk.101.b
		every_state = {
			limit = {
				is_owned_by = ROOT
				OR = {
					region = 132
					state = 1004
					state = 207
					state = 191
				}
			}
			NWA = { transfer_state = PREV }
		}
		if = {
			limit = { NWA = { exists = yes } }
			NWA = { set_cosmetic_tag = NWA_north_corps load_oob = NWA_north_corps }
		}
		if = {
			limit = { UBD = { exists = yes } }
			every_state = {
				limit = {
					is_owned_by = ROOT
					is_core_of = LAT
					region = 37
				}
				UBD = { transfer_state = PREV }
			}
			else = {
				every_state = {
					limit = {
						is_owned_by = ROOT
						is_core_of = LAT
						region = 37
					}
					LAT = { transfer_state = PREV }
				}
			}
		}
		NWA = { change_tag_from = ROOT }
		hidden_effect = { RUS = { country_event = rcw_bfk.102 } }
	}
}

# Воззвания северного корпуса
country_event = {
	id = rcw_bfk.102
	title = rcw_bfk.102.t
	desc = rcw_bfk.102.d
	picture = GFX_report_event_north_corps_Pskov
	
	is_triggered_only = yes
	
	option = {
		name = rcw_bfk.102.a
		ai_chance = {
			factor = 0
		}
	}
	option = {
		name = rcw_bfk.102.b
		declare_war_on = {
			target = NWA
			type = annex_everything
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		trigger = { is_ai = no NWA = { is_ai = no } }
		name = rcw_bfk.102.c
		NWA = { change_tag_from = ROOT }
	}
}

# Воззвания северного корпуса
country_event = {
	id = rcw_bfk.103
	title = rcw_bfk.103.t
	desc = rcw_bfk.103.d
	picture = GFX_report_event_north_corps_Pskov
	
	is_triggered_only = yes
	
	option = {
		name = rcw_bfk.103.a
		ai_chance = {
			factor = 0
		}
	}
	option = {
		name = rcw_bfk.103.b
		declare_war_on = {
			target = NWA
			type = annex_everything
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		trigger = { is_ai = no NWA = { is_ai = no } }
		name = rcw_bfk.102.c
		NWA = { change_tag_from = ROOT }
	}
}

# Распад мирный
country_event = {
	id = rcw_bfk.1918
	title = rcw_bfk.1918.t
	desc = rcw_bfk.1918.d
	picture = GFX_report_event_rcw_czech_uprising
	
	trigger = {
		tag = UBD
		is_subject = no
		has_war = no
		GER = { has_country_flag = GER_monarchy_fall }
		LAT = { OR = { exists = no is_subject_of = UBD } }
		EST = { OR = { exists = no is_subject_of = UBD } }
		NOT = { has_country_flag = UBD_stability }
		OR = {
			has_government = social_conservatism
			has_government = authoritarism
			has_government = despotism
			has_government = fascism
			has_government = national_syndicalism
		}
	}
	
	mean_time_to_happen = {
		days = 8
	}
	
	fire_only_once = yes
	
	# Играть за Латвию
	option = {
		name = rcw_bfk.21.a
		every_state = {
			limit = {
				is_owned_by = ROOT
				NOT = {
					state = 914
					state = 921
					state = 13
					state = 920
					state = 1003
					state = 915
					state = 1002
					state = 1020
					state = 1021
					state = 1023
					state = 1019
					state = 195
					state = 1018
					state = 1022
					state = 1015
				}
			}
			LAT = { transfer_state = PREV }
		}
		if = {
			limit = { OR = { LIT = { exists = yes } owns_state = 11 owns_state = 189 owns_state = 847 owns_state = 784 } }
			every_state = {
				limit = {
					is_owned_by = ROOT
					is_core_of = LIT
				}
				LIT = { transfer_state = PREV }
			}
		}
		EST = {
			annex_country = {
				target = ROOT
				transfer_troops = yes
			}
		}
		LAT = { change_tag_from = ROOT }
	}
	
	# Играть за Эстонию
	option = {
		name = rcw_bfk.21.b
		every_state = {
			limit = {
				is_owned_by = ROOT
				NOT = {
					state = 914
					state = 921
					state = 13
					state = 920
					state = 1003
					state = 915
					state = 1002
					state = 1020
					state = 1021
					state = 1023
					state = 1019
					state = 195
					state = 1018
					state = 1022
					state = 1015
				}
			}
			LAT = { transfer_state = PREV }
		}
		if = {
			limit = { OR = { LIT = { exists = yes } owns_state = 11 owns_state = 189 owns_state = 847 owns_state = 784 } }
			every_state = {
				limit = {
					is_owned_by = ROOT
					is_core_of = LIT
				}
				LIT = { transfer_state = PREV }
			}
		}
		EST = {
			annex_country = {
				target = ROOT
				transfer_troops = yes
			}
		}
		EST = { change_tag_from = ROOT }
	}
}