###########################
# Versailles Peace Treaty Events
###########################

add_namespace = versailles

###### Капитуляция Центральных держав ######

# Болгария
country_event = {
	id = versailles.1
	title = versailles.1.t
	desc = versailles.1.d
	picture = GFX_report_event_bul_peace_ww1
	
	fire_only_once = yes
	
	trigger = {
		tag = BUL
		has_global_flag = WWI_is_now
		OR = {
			has_war_with = ENG
			has_war_with = FRA
		}
		OR = {
			has_global_flag = WWI_AUH_HAS_CAPITULATED
			NOT = { has_full_control_of_state = 48 }
			NOT = { has_full_control_of_state = 212 }
			TUR = { NOT = { controls_state = 341 } }
		}
	}

	immediate = {
		every_country = {
			limit = { OR = { is_subject = no tag = AST tag = SAF tag = CAN tag = NZL } NOT = { has_country_flag = WWI_Entente_member } has_war_with = BUL OR = { is_in_faction_with = ENG is_in_faction_with = FRA } NOT = { is_in_faction_with = GER } NOT = { tag = BUL tag = TUR tag = GER tag = AUH } }
			set_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Entente_member OR = { NOT = { is_in_faction_with = ENG is_in_faction_with = FRA } is_in_faction_with = GER is_in_faction_with = AUH } AND ={ is_subject = yes NOT = { tag = AST tag = SAF tag = CAN tag = NZL } } }
			clr_country_flag = WWI_Entente_member
		}
	}
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = versailles.1.a
		set_global_flag = WWI_BUL_HAS_CAPITULATED
		leave_faction = yes
		every_country = {
			limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } }
			ROOT = { white_peace = PREV }
		}
		every_country = {
			limit = { owns_state = 184 }
			transfer_state = 774
			transfer_state = 775
		}
		every_country = {
			limit = { owns_state = 46 }
			transfer_state = 77
			transfer_state = 855
			transfer_state = 856
		}
		hidden_effect = {
			REB = {
				annex_country = {
					target = ROOT
					transfer_troops = no
				}
			}
			annex_country = {
				target = REB
				transfer_troops = no
			}
		}
		ENG = {
			puppet = ROOT
			set_autonomy = {
				target = ROOT
				autonomy_state = autonomy_dominion
			}
		}
		hidden_effect = {
			set_politics = {
				ruling_party = authoritarism
			}
			add_popularity = {
				ideology = authoritarism
				popularity = -1
			}
			add_popularity = {
				ideology = authoritarism
				popularity = 0.3
			}
		}
		if = {
			limit = { has_global_flag = WWI_AUH_HAS_CAPITULATED }
			TUR = { country_event = { id = versailles.2 days = 0 } }
		}
		hidden_effect = { news_event = { id = news_n.101 hours = 3 } }
	}
	option = {
		trigger = {
			is_ai = no
		}
		name = versailles.1.b
	}
}
# Турция
country_event = {
	id = versailles.2
	title = versailles.2.t
	desc = versailles.2.d
	picture = GFX_report_event_tur_peace_ww1
	
	fire_only_once = yes
	
	immediate = {
		every_country = {
			limit = { OR = { is_subject = no tag = AST tag = SAF tag = CAN tag = NZL } NOT = { has_country_flag = WWI_Entente_member } has_war_with = TUR OR = { is_in_faction_with = ENG is_in_faction_with = FRA } NOT = { is_in_faction_with = GER } NOT = { tag = BUL tag = TUR tag = GER tag = AUH } }
			set_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Entente_member OR = { NOT = { is_in_faction_with = ENG is_in_faction_with = FRA } is_in_faction_with = GER is_in_faction_with = AUH } AND ={ is_subject = yes NOT = { tag = AST tag = SAF tag = CAN tag = NZL } } }
			clr_country_flag = WWI_Entente_member
		}
	}
	trigger = {
		tag = TUR
		has_global_flag = WWI_is_now
		OR = {
			has_war_with = ENG
			has_war_with = FRA
		}
		OR = {
			AND = {
				has_global_flag = WWI_BUL_HAS_CAPITULATED
				NOT = { controls_state = 341 }
			}
			AND = {
				BUL = { NOT = { controls_state = 48 } }
				NOT = { controls_state = 341 }
			}
			NOT = {
				controls_state = 676
				controls_state = 677
			}
		}
	}

	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = versailles.2.a
		set_global_flag = WWI_TUR_HAS_CAPITULATED
		leave_faction = yes
		every_country = {
			limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } }
			ROOT = { white_peace = PREV }
		}
		if = {
			limit = { NOT = { has_global_flag = WWI_FRA_HAS_CAPITULATED } }
			FRA = {
				transfer_state = 553
				transfer_state = 554
				transfer_state = 677
				transfer_state = 680
				transfer_state = 344
				transfer_state = 345
			}
			else = {
				ENG = {
					transfer_state = 553
					transfer_state = 554
					transfer_state = 677
					transfer_state = 680
					transfer_state = 344
					transfer_state = 345
				}
			}
		}
		if = {
			limit = { NOT = { has_global_flag = WWI_ITA_HAS_CAPITULATED } }
			ITA = {
				transfer_state = 342
			}
			else = {
				if = {
					limit = { NOT = { has_global_flag = WWI_FRA_HAS_CAPITULATED } }
					FRA = { transfer_state = 342 }
					else = {
						ENG = { transfer_state = 342 }
					}
				}
			}
		}
		ENG = {
			transfer_state = 454
			transfer_state = 455
			transfer_state = 905
			transfer_state = 906
			transfer_state = 675
			transfer_state = 291
			transfer_state = 676
		}
		if = {
			limit = { RUS = { controls_state = 341 } }
			RUS = {
				transfer_state = 340
				transfer_state = 341
				transfer_state = 860
				transfer_state = 949
			}
			else = {
				ENG = {
					transfer_state = 340
					transfer_state = 341
					transfer_state = 860
					transfer_state = 949
				}
			}
		}
		if = {
			limit = { RUS = { has_war_with = TUR owns_state = 231 } }
			RUS = {
				transfer_state = 352
				transfer_state = 353
				transfer_state = 354
			}
		}
		hidden_effect = {
			REB = {
				annex_country = {
					target = ROOT
					transfer_troops = no
				}
			}
			annex_country = {
				target = REB
				transfer_troops = no
			}
			set_capital = 49
		}
		ENG = {
			puppet = ROOT
			set_autonomy = {
				target = ROOT
				autonomy_state = autonomy_dominion
			}
		}
		hidden_effect = {
			set_politics = {
				ruling_party = market_liberalism
			}
			add_popularity = {
				ideology = market_liberalism
				popularity = -1
			}
			add_popularity = {
				ideology = market_liberalism
				popularity = 0.3
			}
		}
		hidden_effect = { news_event = { id = news_n.102 hours = 3 } }
	}
	option = {
		trigger = {
			is_ai = no
		}
		name = versailles.2.b
	}
}
# Австро-Венгрия
country_event = {
	id = versailles.3
	title = versailles.3.t
	desc = versailles.3.d
	picture = GFX_report_event_auh_peace_ww1
	
	fire_only_once = yes
	
	immediate = {
		every_country = {
			limit = { OR = { is_subject = no tag = AST tag = SAF tag = CAN tag = NZL } NOT = { has_country_flag = WWI_Entente_member } has_war_with = AUH OR = { is_in_faction_with = ENG is_in_faction_with = FRA } NOT = { is_in_faction_with = GER } NOT = { tag = BUL tag = TUR tag = GER tag = AUH } }
			set_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Entente_member OR = { NOT = { is_in_faction_with = ENG is_in_faction_with = FRA } is_in_faction_with = GER is_in_faction_with = AUH } AND ={ is_subject = yes NOT = { tag = AST tag = SAF tag = CAN tag = NZL } } }
			clr_country_flag = WWI_Entente_member
		}
	}
	trigger = {
		tag = AUH
		has_global_flag = WWI_is_now
		OR = {
			has_war_with = ENG
			has_war_with = FRA
		}
		OR = {
			has_global_flag = WWI_GER_HAS_CAPITULATED
			AND = {
				has_global_flag = WWI_BUL_HAS_CAPITULATED
				has_global_flag = WWI_TUR_HAS_CAPITULATED
				NOT = {
					controls_state = 107
					controls_state = 109
				}
			}
			NOT = { controls_state = 9 }
			NOT = { controls_state = 4 }
			NOT = { controls_state = 43 }
			AND = {
				RUS = {
					controls_state = 10
					controls_state = 73
					controls_state = 89
					controls_state = 91
					OR = {
						controls_state = 71
						controls_state = 154
						controls_state = 664
					}
				}
			}
		}
		NOT = { controls_state = 159 controls_state = 160 }
		FRA = { OR = { AND = { controls_state = 16 NOT = { is_in_faction_with = GER } } AND = { NOT = { controls_state = 16 } is_in_faction_with = GER } } }
	}

	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = versailles.3.a
		set_global_flag = WWI_AUH_HAS_CAPITULATED
		leave_faction = yes
		add_ideas = alliance_neutrality
		every_country = {
			limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } }
			ROOT = { white_peace = PREV }
		}
		AUH = { end_puppet = SER }
		hidden_effect = {
			REB = {
				annex_country = {
					target = ROOT
					transfer_troops = no
				}
			}
			annex_country = {
				target = REB
				transfer_troops = no
			}
		}
		SER = {
			transfer_state = 105
			transfer_state = 106
			transfer_state = 943
			transfer_state = 777
			transfer_state = 778
			transfer_state = 779
			transfer_state = 816
			transfer_state = 942
			transfer_state = 817
			transfer_state = 818
			transfer_state = 825
			transfer_state = 45
			transfer_state = 82
			transfer_state = 815
		}
		CRO = {
			transfer_state = 102
			transfer_state = 103
			transfer_state = 104
			transfer_state = 109
			transfer_state = 834
			transfer_state = 837
			transfer_state = 862
			set_cosmetic_tag = SCS
		}
		ROM = {
			transfer_state = 819
			transfer_state = 820
			transfer_state = 855
			transfer_state = 856
			transfer_state = 76
			transfer_state = 80
			transfer_state = 83
			transfer_state = 84
			transfer_state = 804
		}
		ITA = {
			transfer_state = 39
			transfer_state = 153
			transfer_state = 163
			transfer_state = 736
			transfer_state = 823
			transfer_state = 824
		}
		GER = {
			transfer_state = 838
		}
		if = {
			limit = { 88 = { NOT = { is_controlled_by = RUS } } }
			POL = { transfer_state = 88 }
		}
		if = {
			limit = { 91 = { NOT = { is_controlled_by = RUS } } }
			GAL = {
				transfer_state = 89
				transfer_state = 91
				transfer_state = 925
			}
			if = {
				limit = { 80 = { NOT = { is_controlled_by = ROM } } }
				GAL = { transfer_state = 80 }
			}
		}
		else_if = {
			limit = { RUS = { NOT = { has_country_flag = RUS_brest_peace_white has_country_flag = RUS_brest_peace_soft has_country_flag = RUS_brest_peace_average has_country_flag = RUS_brest_peace_hard } surrender_progress < 0.10 } }
			RUS = {
				transfer_state = 88
			}
			if = {
				limit = { UKR = { exists = yes } }
				UKR = {
					transfer_state = 89
					transfer_state = 91
					transfer_state = 925
				}
				else = {
					RUS = {
						transfer_state = 89
						transfer_state = 91
						transfer_state = 925
					}
				}
			}
		}
		if = {
			limit = { NOT = { has_global_flag = WWI_BUL_HAS_CAPITULATED } }
			BUL = { country_event = { id = versailles.1 days = 3 } }
		}
		if = {
			limit = { has_global_flag = WWI_BUL_HAS_CAPITULATED }
			TUR = { country_event = versailles.2 }
		}
		hidden_effect = { news_event = { id = news_n.103 hours = 3 } }
	}
	option = {
		trigger = {
			is_ai = no
		}
		name = versailles.3.b
	}
}
# Германия
country_event = {
	id = versailles.4
	title = versailles.4.t
	desc = versailles.4.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	immediate = {
		every_country = {
			limit = { OR = { is_subject = no tag = AST tag = SAF tag = CAN tag = NZL } NOT = { has_country_flag = WWI_Entente_member } has_war_with = GER OR = { is_in_faction_with = ENG is_in_faction_with = FRA } NOT = { is_in_faction_with = GER } NOT = { tag = BUL tag = TUR tag = GER tag = AUH } }
			set_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Entente_member OR = { NOT = { is_in_faction_with = ENG is_in_faction_with = FRA } is_in_faction_with = GER is_in_faction_with = AUH } AND ={ is_subject = yes NOT = { tag = AST tag = SAF tag = CAN tag = NZL } } }
			clr_country_flag = WWI_Entente_member
		}
	}
	trigger = {
		tag = GER
		has_global_flag = WWI_is_now
		OR = {
			has_war_with = ENG
			has_war_with = FRA
		}
		OR = {
			AND = {
				has_global_flag = WWI_BUL_HAS_CAPITULATED
				has_global_flag = WWI_AUH_HAS_CAPITULATED
				has_global_flag = WWI_TUR_HAS_CAPITULATED
				FRA = { OR = { AND = { controls_state = 16 NOT = { is_in_faction_with = GER } } AND = { NOT = { controls_state = 16 } is_in_faction_with = GER } } }
			}
			NOT = { controls_state = 52 }
			NOT = { controls_state = 55 }
			NOT = { controls_state = 64 }
		}
		surrender_progress > 0.05
	}

	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = versailles.4.a
		end_puppet = FRA
		FRA = { leave_faction = yes }
		ENG = { add_to_faction = FRA }
		set_global_flag = WWI_GER_HAS_CAPITULATED
		leave_faction = yes
		add_ideas = alliance_neutrality
		every_country = {
			limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } }
			ROOT = { white_peace = PREV }
		}
		if = {
			limit = { 10 = { NOT = { is_controlled_by = RUS } } }
			POL = { transfer_state = 10 }
			if = {
				limit = { 87 = { NOT = { is_controlled_by = RUS } } }
				POL = { transfer_state = 87 }
			}
			if = {
				limit = { 90 = { NOT = { is_controlled_by = RUS } } }
				POL = { transfer_state = 90 }
			}
			if = {
				limit = { 92 = { NOT = { is_controlled_by = RUS } } }
				POL = { transfer_state = 92 }
			}
			if = {
				limit = { 98 = { NOT = { is_controlled_by = RUS } } }
				POL = { transfer_state = 98 }
			}
			if = {
				limit = { 822 = { NOT = { is_controlled_by = RUS } } }
				POL = { transfer_state = 822 }
			}
			if = {
				limit = { 904 = { NOT = { is_controlled_by = RUS } } }
				POL = { transfer_state = 904 }
			}
			if = {
				limit = { 846 = { NOT = { is_controlled_by = RUS } } }
				POL = { transfer_state = 846 }
			}
			if = {
				limit = { 97 = { NOT = { is_controlled_by = RUS } } }
				POL = { transfer_state = 97 }
			}
		}
		if = {
			limit = { POL = { exists = yes } }
			POL = { add_ideas = alliance_neutrality }
		}
		if = {
			limit = { UBD = { exists = yes } }
			UBD = { add_ideas = alliance_neutrality }
		}
		if = {
			limit = { LIT = { exists = yes } }
			LIT = { add_ideas = alliance_neutrality }
		}
		if = {
			limit = { LIT = { exists = yes } }
			LIT = { add_ideas = alliance_neutrality }
		}
		if = {
			limit = { KUR = { exists = yes } }
			KUR = { add_ideas = alliance_neutrality }
		}
		hidden_effect = {
			REB = {
				annex_country = {
					target = ROOT
					transfer_troops = no
				}
			}
			annex_country = {
				target = REB
				transfer_troops = no
			}
		}
		if = {
			limit = { NOT = { has_global_flag = WWI_AUH_HAS_CAPITULATED } }
			AUH = { country_event = { id = versailles.3 days = 3 } }
		}
		GER = { release = LUX }
		BEL = { transfer_state = 786 }
		FRA = {
			transfer_state = 28
			transfer_state = 42
			transfer_state = 51
			transfer_state = 850
		}
		if = {
			limit = {
				RUS = {
					NOT = {
						has_country_flag = RUS_brest_peace_fired
						has_global_flag = WWI_RUS_HAS_CAPITULATED
					}
					owns_state = 10
				}
			}
			RUS = {
				transfer_state = 67
				transfer_state = 86
				transfer_state = 188
				transfer_state = 762
				transfer_state = 827
				transfer_state = 828
			}
		}
		DEN = {
			transfer_state = 771
		}
		if = {
			limit { NOT = { has_country_flag = GER_monarchy_fall } }
			GER = { country_event = germany.110 }
		}
		hidden_effect = { news_event = { id = news_n.104 hours = 3 } }
		if {
			limit = { OR = { RUS = { OR = { has_country_flag = RUS_brest_peace_fired has_global_flag = WWI_RUS_HAS_CAPITULATED } } } }
			release = LIT
			release = LAT
			release = EST
			release = BLR
			release = UKR
			release = POL
		}
		if = {
			limit = { POL = { exists = yes } LIT = { exists = yes } }
			LIT = { transfer_state = 96 transfer_state = 847 }
			POL = { transfer_state = 846 }
		}
		if = {
			limit = {
				OR = {
					has_global_flag = brest_litovsk_negotiations
					has_global_flag = brest_litovsk_negotiations_GER_UKR_peace
					has_global_flag = brest_litovsk_GER_UKR_negotiations
					has_global_flag = russia_rejects_german_ultimatum
				}
			}
			clr_global_flag = brest_litovsk_negotiations
			clr_global_flag = brest_litovsk_negotiations_GER_UKR_peace
			clr_global_flag = brest_litovsk_GER_UKR_negotiations
			clr_global_flag = russia_rejects_german_ultimatum
			RUS = { country_event = treaty_of_brest.1917 }
		}
		if = {
			limit = { owns_state = 919 }
			every_country = {
				limit = { owns_state = 197 }
				transfer_state = 919
			}
		}
		if = {
			limit = { owns_state = 137 }
			every_country = {
				limit = { owns_state = 196 }
				transfer_state = 137
			}
		}
	}
	option = {
		trigger = {
			is_ai = no
		}
		name = versailles.4.b
	}
}

# Капитуляция остальных, кто вступил в альянс Центральных Держав
country_event = {
	id = versailles.9
	title = versailles.9.t
	desc = versailles.9.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	fire_only_once = yes
	
	trigger = {
		NOT = {
			tag = GER
			tag = AUH
			tag = BUL
			tag = TUR
			tag = RUS
			tag = SOV
		}
		is_white_movement_country = no
		has_global_flag = WWI_is_now
		OR = {
			has_war_with = ENG
			has_war_with = FRA
		}
		has_global_flag = WWI_BUL_HAS_CAPITULATED
		has_global_flag = WWI_TUR_HAS_CAPITULATED
		has_global_flag = WWI_AUH_HAS_CAPITULATED
		has_global_flag = WWI_GER_HAS_CAPITULATED
	}
	
	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = versailles.9.a
		leave_faction = yes
		every_country = {
			limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } }
			ROOT = { white_peace = PREV }
		}
	}
}

# Конец Первой Мировой Войны
country_event = {
	id = versailles.10
	title = versailles.10.t
	desc = versailles.10.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	fire_only_once = yes
	
	trigger = {
		OR = {
			AND = {
				tag = ENG
				has_global_flag = WWI_FRA_HAS_CAPITULATED
			}
			AND = {
				tag = FRA
				NOT = { has_global_flag = WWI_FRA_HAS_CAPITULATED }
			}
		}
		has_global_flag = WWI_is_now
		has_global_flag = WWI_BUL_HAS_CAPITULATED
		has_global_flag = WWI_TUR_HAS_CAPITULATED
		has_global_flag = WWI_AUH_HAS_CAPITULATED
		has_global_flag = WWI_GER_HAS_CAPITULATED
	}

	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 10
	}
	
	option = {
		name = versailles.10.a
		clr_global_flag = WWI_is_now
		ENG = {
			remove_ideas = guarantee_neutrality
		}
		FRA = {
			remove_ideas = guarantee_neutrality
		}
		USA = {
			remove_ideas = guarantee_neutrality
		}
	}
}

###### Капитуляция держав Антанты ######

# Италия
country_event = {
	id = versailles.11
	title = versailles.11.t
	desc = versailles.11.d
	picture = GFX_report_event_ita_peace_ww1
	
	fire_only_once = yes
	
	trigger = {
		tag = ITA
		has_global_flag = WWI_is_now
		NOT = { has_global_flag = WWI_ITA_HAS_CAPITULATED }
		OR = {
			has_war_with = GER
			has_war_with = AUH
		}
		surrender_progress > 0.22
	}

	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = versailles.11.a
		if = {
			limit = { AUH = { has_war_with = ITA } }
			AUH = { transfer_state = 158 transfer_state = 159 transfer_state = 160 transfer_state = 161 }
			diplomatic_relation = {
				country = AUH
				relation = military_access
				active = yes
			}
		}
		if = {
			limit = { GER = { has_war_with = ITA } }
			diplomatic_relation = {
				country = GER
				relation = military_access
				active = yes
			}
		}
		set_global_flag = WWI_ITA_HAS_CAPITULATED
		leave_faction = yes
		every_country = {
			limit = { OR = { is_in_faction_with = GER is_in_faction_with = AUH AND = { is_in_faction_with = TUR NOT = { is_in_faction_with = ENG } } AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
			ROOT = { white_peace = PREV }
		}
		hidden_effect = {
			REB = {
				annex_country = {
					target = ROOT
					transfer_troops = no
				}
			}
			annex_country = {
				target = REB
				transfer_troops = no
			}
		}
		hidden_effect = {
			add_popularity = {
				ideology = social_conservatism
				popularity = -0.3
			}
			add_popularity = {
				ideology = communism
				popularity = 0.15
			}
			add_popularity = {
				ideology = authoritarism
				popularity = 0.1
			}
			add_popularity = {
				ideology = despotism
				popularity = 0.12
			}
		}
		hidden_effect = { news_event = { id = news_n.111 hours = 3 } }
	}
	option = {
		trigger = {
			is_ai = no
		}
		name = versailles.11.b
	}
}

# Франция
country_event = {
	id = versailles.12
	title = versailles.12.t
	desc = versailles.12.d
	picture = GFX_report_event_ita_peace_ww1
	
	fire_only_once = yes
	
	trigger = {
		tag = FRA
		has_global_flag = WWI_is_now
		NOT = { has_global_flag = WWI_FRA_HAS_CAPITULATED }
		has_war_with = GER
		OR = {
			surrender_progress > 0.3
			NOT = { controls_state = 16 }
		}
	}

	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = versailles.12.a
		GER = {
			transfer_state = 17
			transfer_state = 18
			transfer_state = 29
		}
		set_global_flag = WWI_FRA_HAS_CAPITULATED
		leave_faction = yes
		every_country = {
			limit = { OR = { is_in_faction_with = GER is_in_faction_with = AUH AND = { is_in_faction_with = TUR NOT = { is_in_faction_with = ENG } } AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
			ROOT = { white_peace = PREV }
		}
		hidden_effect = {
			REB = {
				annex_country = {
					target = ROOT
					transfer_troops = no
				}
			}
			annex_country = {
				target = REB
				transfer_troops = no
			}
		}
		GER = {
			puppet = FRA
		}
		hidden_effect = {
			add_popularity = {
				ideology = market_liberalism
				popularity = 0.12
			}
			add_popularity = {
				ideology = social_conservatism
				popularity = 0.09
			}
			add_popularity = {
				ideology = communism
				popularity = 0.15
			}
			add_popularity = {
				ideology = despotism
				popularity = 0.15
			}
		}
		hidden_effect = { news_event = { id = news_n.112 hours = 3 } }
	}
	option = {
		trigger = {
			is_ai = no
		}
		name = versailles.12.b
	}
}

# Великобритания
country_event = {
	id = versailles.13
	title = versailles.13.t
	desc = versailles.13.d
	picture = GFX_report_event_ita_peace_ww1
	
	fire_only_once = yes
	
	trigger = {
		tag = ENG
		has_global_flag = WWI_is_now
		NOT = { has_global_flag = WWI_ENG_HAS_CAPITULATED }
		has_war_with = GER
		surrender_progress > 0.5
	}

	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = versailles.13.a
		every_country = {
			limit = { is_subject_of = ENG }
			set_country_flag = former_ENG_puppet
		}
		end_puppet = EGY
		end_puppet = RAJ
		set_global_flag = WWI_ENG_HAS_CAPITULATED
		release = IRE
		leave_faction = yes
		every_country = {
			limit = { OR = { is_in_faction_with = GER is_in_faction_with = AUH AND = { is_in_faction_with = TUR NOT = { is_in_faction_with = ENG } } AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
			ROOT = { white_peace = PREV }
		}
		hidden_effect = {
			REB = {
				annex_country = {
					target = ROOT
					transfer_troops = no
				}
			}
			annex_country = {
				target = REB
				transfer_troops = no
			}
		}
		hidden_effect = {
			add_popularity = {
				ideology = communism
				popularity = 0.1
			}
			add_popularity = {
				ideology = despotism
				popularity = 0.1
			}
		}
		hidden_effect = { news_event = { id = news_n.113 hours = 3 } }
		EGY = {
			transfer_state = 917
		}
	}
	option = {
		trigger = {
			is_ai = no
		}
		name = versailles.13.b
	}
}

# Капитуляция остальных, кто вступил в Антанту
country_event = {
	id = versailles.19
	title = versailles.19.t
	desc = versailles.19.d
	picture = GFX_report_event_ita_peace_ww1
	
	fire_only_once = yes
	
	trigger = {
		tag = GER
		has_global_flag = WWI_is_now
		has_global_flag = WWI_ITA_HAS_CAPITULATED
		has_global_flag = WWI_FRA_HAS_CAPITULATED
		has_global_flag = WWI_ENG_HAS_CAPITULATED
		GER = { NOT = { has_war_with = RUS } }
	}
	
	mean_time_to_happen = {
		days = 0
	}
	
	fire_only_once = yes
	
	option = {
		name = versailles.19.a
		if = {
			limit = { EGY = { surrender_progress > 0.24 } }
			set_global_flag = WWI_EGY_HAS_CAPITULATED
		}
		if = {
			limit = { RAJ = { surrender_progress > 0.1 } }
			set_global_flag = WWI_RAJ_HAS_CAPITULATED
		}
		every_country = {
			limit = { has_country_flag = former_ENG_puppet }
			every_country = {
				limit = { OR = { is_in_faction_with = GER is_in_faction_with = AUH AND = { is_in_faction_with = TUR NOT = { is_in_faction_with = ENG } } AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
				white_peace = PREV
			}
			leave_faction = yes
		}
		every_country = {
			limit = { OR = { is_in_faction_with = GER is_in_faction_with = AUH AND = { is_in_faction_with = TUR NOT = { is_in_faction_with = ENG } } AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
			ALB = { white_peace = PREV leave_faction = yes }
			SER = { white_peace = PREV leave_faction = yes }
			GRE = { white_peace = PREV leave_faction = yes }
			GRR = { white_peace = PREV leave_faction = yes }
			JAP = { white_peace = PREV leave_faction = yes }
			FIN = { white_peace = PREV leave_faction = yes }
			ROM = { white_peace = PREV leave_faction = yes }
			BUK = { white_peace = PREV leave_faction = yes }
			KHI = { white_peace = PREV leave_faction = yes }
			KHI = { white_peace = PREV leave_faction = yes }
		}
		GER = {
			puppet = BEL
		}
		if = {
			limit = { AUH = { exists = yes } }
			AUH = {
				transfer_state = 107
			}
		}
		clr_global_flag = WWI_TUR_HAS_CAPITULATED
		clr_global_flag = WWI_AUH_HAS_CAPITULATED
		clr_global_flag = WWI_BUL_HAS_CAPITULATED
		BUL = {
			transfer_state = 77
			transfer_state = 106
			transfer_state = 184
			transfer_state = 775
			transfer_state = 777
			transfer_state = 856
		}
	}
}

###### Парижская мирная конференция ######

# Начало конференции
country_event = {
	id = versailles.21
	title = versailles.21.t
	desc = versailles.21.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	trigger = {
		tag = FRA
		has_global_flag = versailles_peace_treaty
	}

	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = versailles.21.a
		set_variable = { global.vers_peace_conf_members = 0 }
		every_country = {
			limit = { has_country_flag = WWI_Entente_member }
			add_to_variable = { global.vers_peace_conf_members = 1 }
			set_variable = { vote_power = 1 }
		}
		if = {
			limit = {
				RUS = {
					NOT = { has_country_flag = WWI_Entente_member }
					NOT = { has_country_flag = RUS_brest_peace_fired }
				}
				set_country_flag = WWI_Entente_member
				add_to_variable = { global.vers_peace_conf_members = 1 }
			}
		}
		if = {
			limit = { RUS = { has_country_flag = WWI_Entente_member } }
			add_to_variable = { global.vers_peace_conf_members = 3 }
			RUS = { set_variable = { vote_power = 4 } }
		}
		if = {
			limit = { FRA = { has_country_flag = WWI_Entente_member } }
			add_to_variable = { global.vers_peace_conf_members = 2 }
			FRA = { set_variable = { vote_power = 3 } }
		}
		if = {
			limit = { ENG = { has_country_flag = WWI_Entente_member } }
			add_to_variable = { global.vers_peace_conf_members = 2 }
			ENG = { set_variable = { vote_power = 3 } }
		}
		if = {
			limit = { USA = { has_country_flag = WWI_Entente_member } }
			add_to_variable = { global.vers_peace_conf_members = 2 }
			USA = { set_variable = { vote_power = 3 } }
		}
		if = {
			limit = { SER = { has_country_flag = WWI_Entente_member } }
			add_to_variable = { global.vers_peace_conf_members = 1 }
			SER = { set_variable = { vote_power = 2 } }
		}
		if = {
			limit = { ITA = { has_country_flag = WWI_Entente_member } RUS = { NOT = { has_country_flag = WWI_Entente_member } } }
			add_to_variable = { global.vers_peace_conf_members = -1 }
			clear_variable = vote_power
			clr_country_flag = WWI_Entente_member
		}
		if = {
			limit = { FRA = { has_country_flag = WWI_Entente_member } RUS = { has_country_flag = WWI_Entente_member } }
			add_to_variable = { global.vers_peace_conf_members = 1 }
			FRA = { set_variable = { vote_power = 4 } }
		}
		set_variable = { global.FRA_Alsace_Lorraine = 0 }
		set_variable = { global.FRA_Saar_annex = 0 }
		set_variable = { global.FRA_Saar_referendum = 0 }
		set_variable = { global.FRA_Rheiland_annex = 0 }
		set_variable = { global.FRA_Rheiland_demilitarization = 0 }
		set_variable = { global.FRA_Rheiland_ind = 0 }
		
		set_variable = { global.BEL_Eupen_Malmedy = 0 }
		
		set_variable = { global.POL_Poznan = 0 }
		set_variable = { global.POL_Upper_Silesia_annex = 0 }
		set_variable = { global.POL_Upper_Silesia_referendum = 0 }
		set_variable = { global.POL_Gdansk_annex = 0 }
		set_variable = { global.POL_Gdansk_ind = 0 }
		set_variable = { global.POL_West_Prussia = 0 }
		
		set_variable = { global.RUS_East_Prussia_annex = 0 }
		set_variable = { global.RUS_East_Prussia_ind = 0 }
		set_variable = { global.RUS_Lusatia_annex = 0 }
		set_variable = { global.RUS_Lusatia_ind = 0 }
		
		set_variable = { global.DEN_Schleswig = 0 }
		
		set_variable = { global.LIT_Memelland = 0 }
		
		set_variable = { global.BAV_Bavaria = 0 }
		
		every_country = {
			limit = { has_country_flag = WWI_Entente_member }
			country_event = { id = versailles.22 days = 1 }
			country_event = { id = versailles.23 days = 10 }
			country_event = { id = versailles.24 days = 14 }
			
			country_event = { id = versailles.25 days = 20 }
			
			country_event = { id = versailles.26 days = 32 }
			country_event = { id = versailles.27 days = 34 }
			country_event = { id = versailles.28 days = 46 }
			country_event = { id = versailles.29 days = 48 }
			
			country_event = { id = versailles.30 days = 54 }
			country_event = { id = versailles.31 days = 56 }
			
			country_event = { id = versailles.32 days = 60 }
			
			country_event = { id = versailles.33 days = 74 }
			
			country_event = { id = versailles.34 days = 78 }
			
			hidden_effect = {
				country_event = { id = versailles.40 days = 174 }
				country_event = { id = versailles.41 days = 175 }
			}
		}
	}
}
# Эльзас-Лоррейн
country_event = {
	id = versailles.22
	title = versailles.22.t
	desc = versailles.22.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Франции
	option = {
		name = versailles.22.a
		add_to_variable = { global.FRA_Alsace_Lorraine = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Оставить Германии
	option = {
		trigger = {
			NOT = { tag = FRA }
		}
		name = versailles.22.b
	}
}
# Саар
country_event = {
	id = versailles.23
	title = versailles.23.t
	desc = versailles.23.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Франции
	option = {
		name = versailles.23.a
		add_to_variable = { global.FRA_Saar_annex = vote_power }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					tag = ENG
					tag = USA
				}
			}
		}
	}
	
	#Отдать Франции до референдума
	option = {
		name = versailles.23.b
		add_to_variable = { global.FRA_Saar_referendum = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.23.c
	}
}
# Рейнленд
country_event = {
	id = versailles.24
	title = versailles.24.t
	desc = versailles.24.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Франции
	option = {
		name = versailles.24.a
		add_to_variable = { global.FRA_Rheiland_annex = vote_power }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					tag = ENG
					tag = USA
				}
			}
		}
	}
	
	#Демилитаризовать
	option = {
		name = versailles.24.b
		add_to_variable = { global.FRA_Rheiland_demilitarization = vote_power }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				tag = FRA
			}
			modifier = {
				factor = 999
				OR = {
					tag = ENG
					tag = USA
				}
			}
		}
	}
	
	#Независимый Рейнленд
	option = {
		name = versailles.24.c
		add_to_variable = { global.FRA_Rheiland_ind = vote_power }
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 2
				tag = FRA
			}
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.24.e
	}
}
# Эйпен
country_event = {
	id = versailles.25
	title = versailles.25.t
	desc = versailles.25.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Бельгии
	option = {
		name = versailles.25.a
		add_to_variable = { global.BEL_Eupen_Malmedy = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.25.b
	}
}
# Познань
country_event = {
	id = versailles.26
	title = versailles.26.t
	desc = versailles.26.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Польше/России
	option = {
		name = versailles.26.a
		add_to_variable = { global.POL_Poznan = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.26.b
	}
}
# Верхняя Силезия
country_event = {
	id = versailles.27
	title = versailles.27.t
	desc = versailles.27.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Польше/России
	option = {
		name = versailles.27.a
		add_to_variable = { global.POL_Upper_Silesia_annex = vote_power }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				RUS = { NOT = { has_country_flag = WWI_Entente_member } }
			}
		}
	}
	
	#Референдум
	option = {
		name = versailles.27.b
		add_to_variable = { global.POL_Upper_Silesia_referendum = vote_power }
		ai_chance = {
			factor = 2
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.27.c
	}
}
# Данциг/Гданьск
country_event = {
	id = versailles.28
	title = versailles.28.t
	desc = versailles.28.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Польше/России
	option = {
		name = versailles.28.a
		add_to_variable = { global.POL_Gdansk_annex = vote_power }
	}
	
	#Вольный город
	option = {
		name = versailles.28.b
		add_to_variable = { global.POL_Gdansk_ind = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.28.c
	}
}
# Западная Прусия
country_event = {
	id = versailles.29
	title = versailles.29.t
	desc = versailles.29.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Польше/России
	option = {
		name = versailles.29.a
		add_to_variable = { global.POL_West_Prussia = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.29.b
	}
}
# Восточная Прусия
country_event = {
	id = versailles.30
	title = versailles.30.t
	desc = versailles.30.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Польше/России
	option = {
		name = versailles.30.a
		add_to_variable = { global.RUS_East_Prussia_annex = vote_power }
	}
	
	#Независимая Прусия
	option = {
		name = versailles.30.b
		add_to_variable = { global.RUS_East_Prussia_ind = vote_power }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				RUS = { NOT = { has_country_flag = WWI_Entente_member } }
				NOT = { tag = FRA }
			}
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.30.c
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				tag = FRA
			}
		}
	}
}
# Лужица
country_event = {
	id = versailles.31
	title = versailles.31.t
	desc = versailles.31.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Польше/России
	option = {
		name = versailles.31.a
		add_to_variable = { global.RUS_Lusatia_annex = vote_power }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				RUS = { NOT = { has_country_flag = WWI_Entente_member } }
			}
		}
	}
	
	#Независимая Лужица
	option = {
		name = versailles.31.b
		add_to_variable = { global.RUS_Lusatia_ind = vote_power }
	}
	
	#Оставить Германии
	option = {
		name = versailles.31.c
		ai_chance = {
			factor = 1
		}
	}
}
# Шлезевиг
country_event = {
	id = versailles.32
	title = versailles.32.t
	desc = versailles.32.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Дании север Шлезевига
	option = {
		name = versailles.32.a
		add_to_variable = { global.DEN_Schleswig = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Отдать Дании весь Шлезевиг
	option = {
		name = versailles.32.b
		add_to_variable = { global.DEN_Schleswig_all = vote_power }
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 999
				tag = DEN
			}
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.32.c
	}
}
# Мемель
country_event = {
	id = versailles.33
	title = versailles.33.t
	desc = versailles.33.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Литве/России
	option = {
		name = versailles.33.a
		add_to_variable = { global.LIT_Memelland = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.33.b
	}
}
# Бавария
country_event = {
	id = versailles.34
	title = versailles.34.t
	desc = versailles.34.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Независимая Бавария
	option = {
		name = versailles.34.a
		add_to_variable = { global.BAV_Bavaria = vote_power }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 5
				tag = FRA
			}
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.34.b
		ai_chance = {
			factor = 2
		}
	}
}

country_event = {
	id = versailles.40
	title = versailles.40.t
	desc = versailles.40.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	hidden = yes
	
	is_triggered_only = yes
	
	option = {
		name = versailles.40.a
		divide_variable = {
			var = global.FRA_Alsace_Lorraine
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.FRA_Saar_annex
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.FRA_Saar_referendum
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.FRA_Rheiland_annex
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.FRA_Rheiland_demilitarization
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.FRA_Rheiland_ind
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.BEL_Eupen_Malmedy
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.POL_Poznan
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.POL_Upper_Silesia_annex
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.POL_Upper_Silesia_referendum
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.POL_Gdansk_annex
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.POL_Gdansk_ind
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.POL_West_Prussia
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.RUS_East_Prussia_annex
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.RUS_East_Prussia_ind
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.RUS_Lusatia_annex
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.RUS_Lusatia_ind
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.DEN_Schleswig
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.DEN_Schleswig_all
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.LIT_Memelland
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.BAV_Bavaria
			value = global.vers_peace_conf_members
		}
		
		set_variable = { global.FRA_Rheiland_GER = 1 }
		subtract_from_variable = { global.FRA_Rheiland_GER = global.FRA_Rheiland_annex }
		subtract_from_variable = { global.FRA_Rheiland_GER = global.FRA_Rheiland_demilitarization }
		subtract_from_variable = { global.FRA_Rheiland_GER = global.FRA_Rheiland_ind }
		
		set_variable = { global.FRA_Saar_GER = 1 }
		subtract_from_variable = { global.FRA_Saar_GER = global.FRA_Saar_annex }
		subtract_from_variable = { global.FRA_Saar_GER = global.FRA_Saar_referendum }
		
		set_variable = { global.POL_Upper_Silesia_GER = 1 }
		subtract_from_variable = { global.POL_Upper_Silesia_GER = global.POL_Upper_Silesia_annex }
		subtract_from_variable = { global.POL_Upper_Silesia_GER = global.POL_Upper_Silesia_referendum }
		
		set_variable = { global.POL_Gdansk_GER = 1 }
		subtract_from_variable = { global.POL_Gdansk_GER = global.POL_Gdansk_annex }
		subtract_from_variable = { global.POL_Gdansk_GER = global.POL_Gdansk_ind }
		
		set_variable = { global.RUS_East_Prussia_GER = 1 }
		subtract_from_variable = { global.RUS_East_Prussia_GER = global.RUS_East_Prussia_annex }
		subtract_from_variable = { global.RUS_East_Prussia_GER = global.RUS_East_Prussia_ind }
		
		set_variable = { global.RUS_Lusatia_GER = 1 }
		subtract_from_variable = { global.RUS_Lusatia_GER = global.RUS_Lusatia_annex }
		subtract_from_variable = { global.RUS_Lusatia_GER = global.RUS_Lusatia_ind }
		
		set_variable = { global.DEN_Schleswig_GER = 1 }
		subtract_from_variable = { global.RUS_Lusatia_GER = global.DEN_Schleswig }
		subtract_from_variable = { global.RUS_Lusatia_GER = global.DEN_Schleswig_all }
		
	}
}

country_event = {
	id = versailles.41
	title = versailles.41.t
	desc = versailles.41.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	option = {
		name = versailles.41.a
		
		if = {
			limit = { check_variable = { global.FRA_Rheiland_GER < 0.5 } }
			if {
				limit = { check_variable = { global.FRA_Rheiland_annex > global.FRA_Rheiland_ind } check_variable = { global.FRA_Rheiland_annex > global.FRA_Rheiland_demilitarization } }
				FRA = { transfer_state = 829 transfer_state = 42 transfer_state = 51 }
				else = {
					if = {
						limit = { global.FRA_Rheiland_demilitarization > global.FRA_Rheiland_ind } check_variable = { global.FRA_Rheiland_demilitarization > global.FRA_Rheiland_annex }
						GER = { transfer_state = 829 transfer_state = 42 transfer_state = 50 transfer_state = 51 }
						829 = { set_demilitarized_zone = yes }
						42 = { set_demilitarized_zone = yes }
						50 = { set_demilitarized_zone = yes }
						51 = { set_demilitarized_zone = yes }
						else = {
							RHE ={
								transfer_state = 829
								transfer_state = 42
								transfer_state = 51
							}
						}
					}
				}
			}
			else = {
				GER = { transfer_state = 829 transfer_state = 42 transfer_state = 50 transfer_state = 51 }
			}
		}
		
		if = {
			limit = { check_variable = { global.FRA_Saar_GER < 0.5 } }
			if {
				limit = { check_variable = { global.FRA_Saar_annex > global.FRA_Saar_referendum } }
				FRA = { transfer_state = 850 }
				else = {
					FRA = { transfer_state = 850 set_country_flag = FRA_Saar_referendum }
				}
			}
			else = {
				if = {
					limit = { check_variable = { global.FRA_Rheiland_GER < 0.5 } }
					if {
						limit = { check_variable = { global.FRA_Rheiland_annex > global.FRA_Rheiland_ind } check_variable = { global.FRA_Rheiland_annex > global.FRA_Rheiland_demilitarization } }
						FRA = { transfer_state = 850 }
						else = {
							if = {
								limit = { global.FRA_Rheiland_demilitarization > global.FRA_Rheiland_ind } check_variable = { global.FRA_Rheiland_demilitarization > global.FRA_Rheiland_annex }
								GER = { transfer_state = 850 }
								850 = { set_demilitarized_zone = yes }
								else = {
									RHE ={
										transfer_state = 850
									}
								}
							}
						}
						else = {
							GER = { transfer_state = 850 }
						}
					}
				}
			}
		}
		if = {
			limit = { check_variable = { global.POL_Upper_Silesia_GER < 0.5 } }
			if {
				limit = { check_variable = { global.POL_Upper_Silesia_annex > global.POL_Upper_Silesia_referendum } }
				if = {
					limit = { POL = { exists = yes } }
					POL = { transfer_state = 67 transfer_state = 762 }
					else = { RUS = { transfer_state = 67 transfer_state = 762 } }
				}
				else = {
					GER = { transfer_state = 67 transfer_state = 762 set_country_flag = Upper_Silesia_referendum }
				}
			}
			else = {
				GER = { transfer_state = 67 transfer_state = 762 }
			}
		}
		if = {
			limit = { check_variable = { global.POL_Gdansk_GER < 0.5 } }
			if {
				limit = { check_variable = { global.POL_Gdansk_annex > global.POL_Gdansk_ind } }
				if = {
					limit = { POL = { exists = yes } }
					POL = { transfer_state = 85 }
					else = { RUS = { transfer_state = 85 } }
				}
				else = {
					DNZ = { transfer_state = 85 }
				}
			}
			else = {
				if = { limit = { check_variable = { global.POL_West_Prussia < 0.5 } }
					if {
						limit = { check_variable = { global.RUS_East_Prussia_GER < 0.5 } }
						if = {
							limit = { check_variable = { global.RUS_East_Prussia_annex > global.RUS_East_Prussia_ind } }
							GER = { transfer_state = 85 }
							else = {
								PRS = { transfer_state = 85 }
							}
						}
						else = {
							GER = { transfer_state = 85 }
						}
					}
					else = {
						GER = { transfer_state = 85 }
					}
				}
			}
		}
		if = {
			limit = { check_variable = { global.RUS_East_Prussia_GER < 0.5 } }
			if {
				limit = { check_variable = { global.RUS_East_Prussia_annex > global.RUS_East_Prussia_ind } }
				if = {
					limit = { POL = { exists = yes } }
					POL = { transfer_state = 5 transfer_state = 826 transfer_state = 827 }
					else = { RUS = { transfer_state = 5 transfer_state = 826 transfer_state = 827 } }
				}
				else = {
					PRS = { transfer_state = 5 transfer_state = 826 transfer_state = 827 }
				}
			}
			else = {
				GER = { transfer_state = 5 transfer_state = 826 transfer_state = 827 }
			}
		}
		if = {
			limit = { check_variable = { global.RUS_Lusatia_GER < 0.5 } }
			if {
				limit = { check_variable = { global.RUS_Lusatia_annex > global.RUS_Lusatia_ind } }
				if = {
					limit = { POL = { exists = yes } }
					POL = { transfer_state = 65 }
					else = { RUS = { transfer_state = 65 } }
				}
				else = {
					LZT = { transfer_state = 65 }
				}
			}
			else = {
				GER = { transfer_state = 65 transfer_state = 762 }
			}
		}
		if = {
			limit = { check_variable = { global.FRA_Alsace_Lorraine < 0.5 } }
			GER = { transfer_state = 28 }
			else = {
				FRA = { transfer_state = 28 }
			}
		}
		if = {
			limit = { check_variable = { global.BEL_Eupen_Malmedy < 0.5 } }
			if = {
				limit = { check_variable = { global.FRA_Rheiland_GER < 0.5 } }
				if {
					limit = { check_variable = { global.FRA_Rheiland_annex > global.FRA_Rheiland_ind } check_variable = { global.FRA_Rheiland_annex > global.FRA_Rheiland_demilitarization } }
					FRA = { transfer_state = 786 }
					else = {
						if = {
							limit = { global.FRA_Rheiland_demilitarization > global.FRA_Rheiland_ind } check_variable = { global.FRA_Rheiland_demilitarization > global.FRA_Rheiland_annex }
							GER = { transfer_state = 786 }
							786 = { set_demilitarized_zone = yes }
							else = { RHE = { transfer_state = 786 } }
						}
					}
					else = {
						GER = { transfer_state = 786 }
					}
				}
			}
			else = {
				BEL = { transfer_state = 786 }
			}
		}
		if = {
			limit = { check_variable = { global.POL_Poznan < 0.5 } }
			GER = { transfer_state = 86 }
			else = {
				if = {
					limit = { POL = { exists = yes } }
					POL = { transfer_state = 86 }
					else = {
						RUS = { transfer_state = 86 }
					}
				}
			}
		}
		if = {
			limit = { check_variable = { global.POL_West_Prussia < 0.5 } }
			GER = { transfer_state = 828 }
			else = {
				if = {
					limit = { POL = { exists = yes } }
					POL = { transfer_state = 828 }
					else = {
						RUS = { transfer_state = 828 }
					}
				}
			}
		}
		if = {
			limit = { check_variable = { global.DEN_Schleswig_GER < 0.5 } }
			if = {
				limit = { check_variable = { global.DEN_Schleswig_all < global.DEN_Schleswig } }
				DEN = { transfer_state = 771 }
				GER = { transfer_state = 941 }
				else = {
					DEN = { transfer_state = 771 transfer_state = 941 }
				}
			}
			else = {
				GER = { transfer_state = 771 transfer_state = 941 }
			}
		}
		if = {
			limit = { check_variable = { global.LIT_Memelland < 0.5 } }
			if = {
				limit = { check_variable = { global.RUS_East_Prussia_ind > global.RUS_East_Prussia_annex } check_variable = { global.RUS_East_Prussia_ind > global.RUS_East_Prussia_GER } }
				PRS = { transfer_state = 188 }
				else = {
					every_country = {
						limit = { controls_state = 189 }
						transfer_state = 188
					}
				}
			}
			else = {
				if = {
					limit = { LIT = { exists = yes } }
					LIT = { transfer_state = 188 }
					else = {
						if = {
							limit = { POL = { controls_state = 189 } }
							POL = { transfer_state = 188 }
							else = {
								RUS = { transfer_state = 188 }
							}
						}
					}
				}
			}
		}
		if = {
			limit = { check_variable = { global.BAV_Bavaria < 0.5 } }
			GER = {
				transfer_state = 52
				transfer_state = 53
				transfer_state = 54
			}
			else = {
				BAV = {
					transfer_state = 52
					transfer_state = 53
					transfer_state = 54
				}
			}
		}
		if = {
			limit = { AUH = { exists = yes } }
			AUH = { transfer_state = 153 transfer_state = 838 }
			else = {
				if = {
					limit = { AUS = { exists = yes } }
					AUS = { transfer_state = 153 transfer_state = 838 }
				}
			}
		}
	}
}



# Переговоры о мире
country_event = {
	id = versailles.201
	title = versailles.201.t
	desc = versailles.201.desc
	picture = GFX_report_event_ger_november_revolution

	is_triggered_only = yes
	
	#Затягивать
	option = {
		name = versailles.201.b
		ai_chance = {
			factor = 1
		}
		GER = { country_event = { id = versailles.202 days = 3 } }
	}
	
	#Конечно, сразу примим
	option = {
		name = versailles.201.b
		ai_chance = {
			factor = 0
			modifier ={
				add = 99999
				OR = {
					GER = { controls_state = 29 }
					controls_state = 18
					controls_state = 27
					FRA = { surrender_progress > 0.15 NOT = { is_in_faction_with = GER } }
				}
				GER = { controls_state = 34 }
				GER = { controls_state = 833 }
				GER = { controls_state = 786 }
				GER = { controls_state = 8 }
				GER = { controls_state = 42 }
				GER = { controls_state = 850 }
				GER = { controls_state = 28 }
				GER = { controls_state = 50 }
			}
		}
	}
}
# Ответ амеров
country_event = {
	id = versailles.202
	title = versailles.202.t
	desc = versailles.202.desc
	picture = GFX_report_event_ger_november_revolution

	is_triggered_only = yes
	
	option = {
		name = versailles.202.a
		add_war_support = -0.05
		add_stability = -0.03
	}
}