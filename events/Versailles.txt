###########################
# Versailles Peace Treaty Events
###########################

add_namespace = versailles

country_event = {
	id = versailles.0
	
	is_triggered_only = yes
	
	hidden = yes
	
	option = {
		name = versailles.0.a
		if = {
			limit = {
				tag = OTT
				any_country = {
					is_socialist_country = yes
					count_triggers = { amount = 3 controls_state = 341 controls_state = 343 controls_state = 346 controls_state = 49 controls_state = 347 controls_state = 348 controls_state = 356 controls_state = 349 controls_state = 355 }
				}
			}
			set_country_flag = communist_occ
		}
		leave_faction = yes
		add_ideas = alliance_neutrality
	}
}

###### Капитуляция Центральных держав ######

# Османия
country_event = {
	id = versailles.1
	title = versailles.1.t
	desc = versailles.1.d
	picture = GFX_report_event_ott_peace_ww1
	
	fire_only_once = yes
	
	is_triggered_only = yes
	
	option = {
		name = versailles.1.a
		OTT = {
			every_country = {
				limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } }
				PREV = { give_military_access = PREV }
			}
			hidden_effect = {
				if = {
					limit = { NOT = { has_country_flag = communist_occ has_government = communism } }
						OVERLORD = {
							end_puppet = PREV
						}
						leave_faction = yes
						every_country = {
							limit = { OR = { is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = BUL } is_faction_leader = yes }
							PREV = { white_peace = PREV }
						}
						white_peace = BAK
						
						set_politics = {
							ruling_party = market_liberalism
						}
						add_popularity = {
							ideology = social_conservatism
							popularity = -1
						}
						add_popularity = {
							ideology = market_liberalism
							popularity = -1
						}
						add_popularity = {
							ideology = market_liberalism
							popularity = 0.3
						}
				}
				if = {
					limit = { OR = { has_country_flag = communist_occ has_government = communism } }
					
					clr_country_flag = communist_occ
					if = {
						limit = { NOT = { has_government = communism } }
						set_politics = {
							ruling_party = communism
						}
						add_popularity = {
							ideology = despotism
							popularity = 0.1
						}
						add_popularity = {
							ideology = market_liberalism
							popularity = 0.1
						}
						add_popularity = {
							ideology = communism
							popularity = 0.3
						}
					}
				}
			}
		}
	}
}
# Болгария
country_event = {
	id = versailles.2
	title = versailles.2.t
	desc = versailles.2.d
	picture = GFX_report_event_bul_peace_ww1
	
	fire_only_once = yes
	
	immediate = {
		every_country = {
			limit = { OR = { is_subject = no tag = AST tag = SAF tag = CAN tag = NZL } NOT = { has_country_flag = WWI_Entente_member } has_war_with = AUH OR = { is_in_faction_with = ENG is_in_faction_with = FRA } NOT = { is_in_faction_with = GER } NOT = { tag = BUL tag = OTT tag = GER tag = AUH } }
			set_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Entente_member OR = { NOT = { is_in_faction_with = ENG is_in_faction_with = FRA } is_in_faction_with = GER is_in_faction_with = AUH } AND ={ is_subject = yes NOT = { tag = AST tag = SAF tag = CAN tag = NZL } } }
			clr_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { NOT = { has_country_flag = WWI_Central_Powers_member } has_war_with = ENG OR = { is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = BUL is_in_faction_with = OTT } NOT = { tag = ENG tag = FRA tag = ITA tag = RUS } }
			set_country_flag = WWI_Central_Powers_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Central_Powers_member OR = { is_in_faction_with = ENG has_war_with = GER has_war_with = AUH NOT = { has_war_with = ENG } } }
			clr_country_flag = WWI_Central_Powers_member
		}
	}
	trigger = {
		tag = BUL
		has_global_flag = WWI_is_now
		OR = {
			has_war_with = ENG
			has_war_with = FRA
		}
		OR = {
			has_global_flag = WWI_AUH_HAS_CAPITULATED
			AND = {
				has_global_flag = WWI_GER_HAS_CAPITULATED
				surrender_progress > 0.05
			}
			AND = {
				has_stability < 0.55
				surrender_progress > 0.35
			}
			AND = {
				has_stability < 0.5
				surrender_progress > 0.3
			}
			AND = {
				has_stability < 0.45
				surrender_progress > 0.25
			}
			AND = {
				has_stability < 0.4
				surrender_progress > 0.2
			}
			AND = {
				has_stability < 0.35
				surrender_progress > 0.15
			}
			AND = {
				has_stability < 0.3
				surrender_progress > 0.1
			}
			AND = {
				has_stability < 0.25
				surrender_progress > 0.05
			}
			surrender_progress > 0.25
			has_capitulated = yes
		}
	}
	
	option = {
		name = versailles.2.a
		set_global_flag = WWI_BUL_HAS_CAPITULATED
		BUL = {
			if = {
				limit = {
					any_country = {
						is_socialist_country = yes
						count_triggers = { amount = 3 controls_state = 48 controls_state = 987 controls_state = 211 controls_state = 946 controls_state = 212 controls_state = 945 controls_state = 944 }
					}
				}
				set_country_flag = communist_occ
			}
			if = {
				limit = { has_war_with = ROM }
				every_state = {
					limit = { is_owned_by = BUL OR = { is_core_of = ROM is_claimed_by = ROM } }
					ROM = { transfer_state = PREV }
				}
			}
			if = {
				limit = { has_war_with = GRE }
				every_state = {
					limit = { is_owned_by = BUL OR = { is_core_of = GRE is_claimed_by = GRE } }
					ROM = { transfer_state = PREV }
				}
			}
			if = {
				limit = { has_war_with = GRR }
				every_state = {
					limit = { is_owned_by = BUL OR = { is_core_of = GRR is_claimed_by = GRR } }
					ROM = { transfer_state = PREV }
				}
			}
			if = {
				limit = { has_war_with = SER }
				every_state = {
					limit = { is_owned_by = BUL OR = { is_core_of = SER is_claimed_by = SER } }
					ROM = { transfer_state = PREV }
				}
			}
			leave_faction = yes
			add_ideas = alliance_neutrality
			every_country = {
				limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } }
				BUL = { white_peace = PREV }
			}
			every_country = {
				limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } }
				PREV = { give_military_access = PREV }
			}
			hidden_effect = {
				if = {
					limit = { OR = { has_country_flag = communist_occ has_government = communism } }
					
					clr_country_flag = communist_occ
					if = {
						limit = { NOT = { has_government = communism } }
						set_politics = {
							ruling_party = communism
						}
						add_popularity = {
							ideology = authoritarism
							popularity = -1
						}
						add_popularity = {
							ideology = market_liberalism
							popularity = -0.5
						}
						add_popularity = {
							ideology = communism
							popularity = 0.2
						}
					}
				}
			}
		}
	}
}
# Австро-Венгрия
country_event = {
	id = versailles.3
	title = versailles.3.t
	desc = versailles.3.d
	picture = GFX_report_event_auh_peace_ww1
	
	fire_only_once = yes
	
	immediate = {
		every_country = {
			limit = { OR = { is_subject = no tag = AST tag = SAF tag = CAN tag = NZL } NOT = { has_country_flag = WWI_Entente_member } has_war_with = AUH OR = { is_in_faction_with = ENG is_in_faction_with = FRA } NOT = { is_in_faction_with = GER } NOT = { tag = BUL tag = OTT tag = GER tag = AUH } }
			set_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Entente_member OR = { NOT = { is_in_faction_with = ENG is_in_faction_with = FRA } is_in_faction_with = GER is_in_faction_with = AUH } AND ={ is_subject = yes NOT = { tag = AST tag = SAF tag = CAN tag = NZL } } }
			clr_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { NOT = { has_country_flag = WWI_Central_Powers_member } has_war_with = ENG OR = { is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = BUL is_in_faction_with = OTT } NOT = { tag = ENG tag = FRA tag = ITA tag = RUS } }
			set_country_flag = WWI_Central_Powers_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Central_Powers_member OR = { is_in_faction_with = ENG has_war_with = GER has_war_with = AUH NOT = { has_war_with = ENG } } }
			clr_country_flag = WWI_Central_Powers_member
		}
	}
	trigger = {
		tag = AUH
		has_global_flag = WWI_is_now
		OR = {
			has_war_with = ENG
			has_war_with = FRA
		}
		OR = {
			AND = {
				has_global_flag = WWI_GER_HAS_CAPITULATED
				surrender_progress > 0.08
			}
			AND = {
				has_global_flag = WWI_OTT_HAS_CAPITULATED
				surrender_progress > 0.1
			}
			AND = {
				has_stability < 0.2
				surrender_progress > 0.2
			}
			AND = {
				has_stability < 0.15
				surrender_progress > 0.15
			}
			AND = {
				has_stability < 0.1
				surrender_progress > 0.1
			}
			AND = {
				has_stability < 0.05
				surrender_progress > 0.05
			}
			surrender_progress > 0.25
		}
	}

	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = versailles.3.a
		set_global_flag = WWI_AUH_HAS_CAPITULATED
		leave_faction = yes
		add_ideas = alliance_neutrality
		CZE = {
			if = {
				limit = {
					any_country = {
						NOT = {
							tag = CZE
						}
						is_socialist_country = yes
						OR = { controls_state = 9 controls_state = 75 }
					}
				}
				set_politics = {
					ruling_party = communism
				}
				add_popularity = {
					ideology = communism
					popularity = 0.2
				}
			}
		}
		HUN = {
			if = {
				limit = {
					any_country = {
						NOT = {
							tag = HUN
						}
						is_socialist_country = yes
						OR = { controls_state = 43 controls_state = 154 controls_state = 155 }
					}
				}
				set_politics = {
					ruling_party = communism
				}
				add_popularity = {
					ideology = communism
					popularity = 0.2
				}
			}
		}
		SLO = {
			if = {
				limit = {
					any_country = {
						NOT = {
							tag = SLO
							tag = CZE
							tag = HUN
						}
						is_socialist_country = yes
						controls_state = 70
					}
				}
				set_politics = {
					ruling_party = communism
				}
				add_popularity = {
					ideology = communism
					popularity = 0.2
				}
			}
		}
		if = {
			limit = {
				any_country = {
					NOT = {
						tag = AUH
						tag = AUS
					}
					is_socialist_country = yes
					OR = { controls_state = 4 controls_state = 841 controls_state = 152 }
				}
			}
			add_stability = -1
			add_popularity = {
				ideology = communism
				popularity = 0.3
			}
			add_popularity = {
				ideology = radical_socialism
				popularity = 0.1
			}
			add_popularity = {
				ideology = social_democracy
				popularity = 0.15
			}
			add_popularity = {
				ideology = market_liberalism
				popularity = 0.1
			}
			else = {
				add_stability = -0.25
				add_popularity = {
					ideology = authoritarism
					popularity = -0.5
				}
				add_popularity = {
					ideology = market_liberalism
					popularity = 0.1
				}
				add_popularity = {
					ideology = social_democracy
					popularity = 0.2
				}
			}
		}
		every_country = {
			limit = { owns_state = 984 }
			transfer_state = 789
		}
		SER = {
			if = {
				limit = {
					any_country = {
						is_socialist_country = yes
						OR = { controls_state = 107 controls_state = 108 controls_state = 948 }
					}
				}
				set_politics = {
					ruling_party = communism
				}
				add_popularity = {
					ideology = communism
					popularity = 0.2
				}
			}
			transfer_state = 107
			transfer_state = 108
			transfer_state = 948
			transfer_state = 947
			transfer_state = 817
			transfer_state = 985
			transfer_state = 818
			transfer_state = 106
			transfer_state = 993
			
			transfer_state = 986
			transfer_state = 105
			transfer_state = 825
		}
		if = {
			limit = { ROM = { owns_state = 79 } }
			ROM = { transfer_state = 804 transfer_state = 820 }
		}
		if = {
			limit = { ROM = { owns_state = 81 } }
			ROM = { transfer_state = 819 }
		}
		if = {
			limit = { ROM = { controls_state = 76 } }
			ROM = { transfer_state = 76 }
		}
		if = {
			limit = { ROM = { controls_state = 84 } }
			ROM = { transfer_state = 84 }
		}
		if = {
			limit = { ROM = { controls_state = 83 OR = { owns_state = 76 owns_state = 84 } } }
			ROM = { transfer_state = 83 }
		}
		if = {
			limit = { ROM = { controls_state = 154 OR = { owns_state = 76 owns_state = 83 } } }
			ROM = { transfer_state = 154 }
		}
		CRO = {
			if = {
				limit = {
					any_country = {
						NOT = {
							tag = SER
						}
						is_socialist_country = yes
						OR = { controls_state = 109 controls_state = 104 }
					}
				}
				set_politics = {
					ruling_party = communism
				}
				add_popularity = {
					ideology = communism
					popularity = 0.2
				}
			}
			set_cosmetic_tag = SCS
		}
		ITA = { transfer_state = 158 }
		ITA = { transfer_state = 159 }
		ITA = { transfer_state = 160 }
		ITA = { transfer_state = 161 }
		
		ITA = { transfer_state = 823 }
		ITA = { transfer_state = 824 }
		ITA = { transfer_state = 39 }
		ITA = { transfer_state = 823 }
		if = {
			limit = { ITA = { controls_state = 103 } }
			ITA = { transfer_state = 103 }
		}
		else_if = {
			limit = { SER = { controls_state = 103 } }
			SER = { transfer_state = 103 }
		}
		else = {
			CRO = { transfer_state = 103 }
		}
		if = {
			limit = { ITA = { controls_state = 968 owns_state = 103 } }
			ITA = { transfer_state = 968 }
		}
		else_if = {
			limit = { SER = { controls_state = 968 owns_state = 104 } }
			SER = { transfer_state = 968 }
		}
		else = {
			CRO = { transfer_state = 968 }
		}
		if = {
			limit = { ITA = { controls_state = 163 } }
			ITA = { transfer_state = 163 }
		}
		else_if = {
			limit = { SER = { controls_state = 163 owns_state = 103 } }
			SER = { transfer_state = 163 }
		}
		else = {
			CRO = { transfer_state = 163 }
		}
		if = {
			limit = { SER = { controls_state = 963 } }
			SER = { transfer_state = 963 }
			else = { CRO = { transfer_state = 963 } }
		}
		if = {
			limit = { SER = { controls_state = 104 } }
			SER = { transfer_state = 104 }
			else = { CRO = { transfer_state = 104 } }
		}
		if = {
			limit = { SER = { controls_state = 862 } }
			SER = { transfer_state = 862 }
			else = { CRO = { transfer_state = 862 } }
		}
		if = {
			limit = { SER = { OR = { controls_state = 45 OR = { owns_state = 862 owns_state = 963 } } } }
			SER = { transfer_state = 45 }
		}
		else_if = {
			limit = { AUH = { NOT = { controls_state = 45 } } }
			CRO = { transfer_state = 45 }
		}
		if = {
			limit = { SER = { OR = { owns_state = 45 owns_state = 963 } } }
			SER = { transfer_state = 962 }
		}
		else_if = {
			limit = { AUH = { NOT = { controls_state = 962 } } }
			CRO = { transfer_state = 962 }
		}
		if = {
			limit = { ITA = { controls_state = 967 } }
			ITA = { transfer_state = 967 }
			else = { CRO = { transfer_state = 967 } }
		}
		if = {
			limit = { ITA = { controls_state = 102 owns_state = 967 } }
			ITA = { transfer_state = 102 }
			else = { CRO = { transfer_state = 102 } }
		}
		if = {
			limit = { ITA = { controls_state = 837 owns_state = 967 } }
			ITA = { transfer_state = 837 }
			else = { CRO = { transfer_state = 837 } }
		}
		if = {
			limit = { ITA = { controls_state = 835 owns_state = 837 } }
			ITA = { transfer_state = 835 }
			else = {
				CRO = { transfer_state = 835 }
			}
		}
		if = {
			limit = { ITA = { controls_state = 965 owns_state = 736 } }
			ITA = { transfer_state = 965 }
		}
		if = {
			limit = { ITA = { controls_state = 966 owns_state = 965 } }
			ITA = { transfer_state = 966 }
		}
		if = {
			limit = { ITA = { controls_state = 834 OR = { owns_state = 103 owns_state = 966 } } }
			ITA = { transfer_state = 834 }
		}
		else_if = {
			limit = { SER = { controls_state = 834 OR = { owns_state = 103 owns_state = 104 } } }
			SER = { transfer_state = 834 }
		}
		else = {
			CRO = { transfer_state = 834 }
		}
		if = {
			limit = { SER = { controls_state = 966 owns_state = 834 } }
			SER = { transfer_state = 966 }
		}
		if = {
			limit = { ITA = { OR = { controls_state = 736 owns_state = 102 owns_state = 834 } } }
			ITA = { transfer_state = 736 }
		}
		else_if = {
			limit = { SER = { owns_state = 102 owns_state = 834 } }
			SER = { transfer_state = 736 }
		}
		else = {
			CRO = { transfer_state = 736 }
		}
		if = {
			limit = { ITA = { controls_state = 965 owns_state = 736 } }
			ITA = { transfer_state = 965 }
		}
		else_if = {
			limit = { SER = { owns_state = 966 } }
			SER = { transfer_state = 965 }
		}
		else = {
			CRO = { transfer_state = 965 }
		}
		if = {
			limit = { ITA = { controls_state = 966 owns_state = 965 } }
			ITA = { transfer_state = 966 }
			else = {
				CRO = { transfer_state = 966 }
			}
		}
		if = {
			limit = { ITA = { OR = { owns_state = 967 owns_state = 837 } } }
			ITA = { transfer_state = 836 }
			else = { CRO = { transfer_state = 836 } }
		}
		
		if = {
			limit = { CRO = { OR = { owns_state = 835 owns_state = 837 owns_state = 102 owns_state = 834 owns_state = 104 owns_state = 963 } } }
			CRO = { transfer_state = 109 }
			else = { SER = { transfer_state = 109 } }
		}
		
		if = {
			limit = { NOT = { has_global_flag = WWI_GER_HAS_CAPITULATED } }
			if = {
				limit = { controls_state = 838 }
				GER = { transfer_state = 838 }
				else = {
					every_country = {
						limit = { controls_state = 838 }
						transfer_state = 838
						GER = { set_state_owner = 838 }
					}
				}
			}
			if = {
				limit = { controls_state = 153 }
				GER = { transfer_state = 153 }
				else = {
					every_country = {
						limit = { controls_state = 153 }
						transfer_state = 153
						GER = { set_state_owner = 153 }
					}
				}
			}
			if = {
				limit = { controls_state = 98 }
				GER = { set_state_controller = 98 }
			}
			if = {
				limit = { controls_state = 97 }
				GER = { set_state_controller = 97 }
			}
			if = {
				limit = { controls_state = 822 }
				GER = { set_state_controller = 822 }
			}
			if = {
				limit = { controls_state = 87 }
				GER = { set_state_controller = 87 }
			}
			if = {
				limit = { controls_state = 10 }
				GER = { set_state_controller = 10 }
			}
			if = {
				limit = { controls_state = 90 }
				GER = { set_state_controller = 90 }
			}
			if = {
				limit = { controls_state = 92 }
				GER = { set_state_controller = 92 }
			}
			if = {
				limit = { controls_state = 904 }
				GER = { set_state_controller = 904 }
			}
			if = {
				limit = { controls_state = 93 }
				GER = { set_state_controller = 93 }
			}
			if = {
				limit = { controls_state = 204 }
				GER = { set_state_controller = 204 }
			}
			if = {
				limit = { controls_state = 194 }
				GER = { set_state_controller = 194 }
			}
			if = {
				limit = { controls_state = 994 }
				GER = { set_state_controller = 994 }
			}
		}
		
		if = {
			limit = { controls_state = 10 }
			POL = { transfer_state = 10 transfer_state = 87 transfer_state = 98 transfer_state = 90 }
		}
		if = {
			limit = { controls_state = 92 }
			POL = { transfer_state = 92 }
		}
		if = {
			limit = { controls_state = 904 }
			POL = { transfer_state = 904 }
		}
		if = {
			limit = { controls_state = 822 }
			POL = { transfer_state = 822 }
		}
		if = {
			limit = { controls_state = 97 }
			POL = { transfer_state = 97 }
		}
		
		if = {
			limit = { RUS = { controls_state = 88 } }
			RUS = { transfer_state = 88 }
			else = {
				POL = { transfer_state = 88 }
			}
		}
		if = {
			limit = { RUS = { controls_state = 91 } }
			RUS = {
				transfer_state = 89
				transfer_state = 91
				transfer_state = 925
			}
		}
		else_if ={
			limit = { UKR = { controls_state = 91 } }
			UKR = {
				transfer_state = 89
				transfer_state = 91
				transfer_state = 925
			}
		}
		else = {
			GAL = {
				transfer_state = 89
				transfer_state = 91
				transfer_state = 925
			}
		}
		if = {
			limit = { ROM = { controls_state = 73 } }
			ROM = { transfer_state = 73 }
		}
		else_if = {
			limit = { OR = { UKR = { controls_state = 73 } AND = { UKR = { exists = yes is_subject_of = RUS } RUS = { controls_state = 73 } } } }
			UKR = { transfer_state = 73 }
		}
		else_if = {
			limit = { RUS = { controls_state = 73 } }
			RUS = { transfer_state = 73 }
		}
		else_if = {
			limit = { GAL = { exists = yes } HUN = { NOT = { owns_state = 73 } } }
			GAL = { transfer_state = 73 }
		}
		if = {
			limit = {
				OR = {
					ROM = { controls_state = 80 }
					GAL = { exists = no }
				}
			}
			ROM = { transfer_state = 80 }
			else = { GAL = { transfer_state = 80 } }
		}
	
		every_country = {
			limit = { is_subject_of = ROOT }
			ROOT = { end_puppet = PREV }
		}
		every_country = {
			limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } is_faction_leader = yes }
			ROOT = { white_peace = PREV }
		}
		white_peace = BAK
		every_country = {
			limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } }
			ROOT = { give_military_access = PREV }
		}
		hidden_effect = {
			REB = {
				annex_country = {
					target = ROOT 
					transfer_troops = no
				}
			}
			annex_country = {
				target = REB
				transfer_troops = no
			}
		}
		hidden_effect = { news_event = { id = news_n.103 hours = 3 } }
	}
	option = {
		trigger = {
			is_ai = no
		}
		name = versailles.3.b
	}
}
# Германия
country_event = {
	id = versailles.4
	title = versailles.4.t
	desc = versailles.4.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	immediate = {
		every_country = {
			limit = { OR = { is_subject = no tag = AST tag = SAF tag = CAN tag = NZL } NOT = { has_country_flag = WWI_Entente_member } has_war_with = GER OR = { is_in_faction_with = ENG is_in_faction_with = FRA } NOT = { is_in_faction_with = GER } NOT = { tag = BUL tag = OTT tag = GER tag = AUH } }
			set_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Entente_member OR = { NOT = { is_in_faction_with = ENG is_in_faction_with = FRA } is_in_faction_with = GER is_in_faction_with = AUH } AND ={ is_subject = yes NOT = { tag = AST tag = SAF tag = CAN tag = NZL } } }
			clr_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { NOT = { has_country_flag = WWI_Central_Powers_member } has_war_with = ENG OR = { is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = BUL is_in_faction_with = OTT } NOT = { tag = ENG tag = FRA tag = ITA tag = RUS } }
			set_country_flag = WWI_Central_Powers_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Central_Powers_member OR = { is_in_faction_with = ENG has_war_with = GER has_war_with = AUH NOT = { has_war_with = ENG } } }
			clr_country_flag = WWI_Central_Powers_member
		}
	}

	is_triggered_only = yes
	
	option = {
		name = versailles.4.a
		set_global_flag = WWI_GER_HAS_CAPITULATED
		add_ideas = alliance_neutrality
		remove_from_faction = OTT
		remove_from_faction = BUL
		every_country = {
			limit = { is_in_faction_with = GER NOT = { tag = GER tag = AUH tag = BUL tag = OTT } is_subject = no has_war_with = ENG }
			leave_faction = yes
			every_country = {
				limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } is_faction_leader = yes }
				white_peace = PREV
			}
		}
		leave_faction = yes
		if = {
			limit = {
				any_country = {
					is_socialist_country = yes
					count_triggers = { amount = 9 controls_state = 66 controls_state = 763 controls_state = 68 controls_state = 64 controls_state = 65 controls_state = 60 controls_state = 829 controls_state = 51 controls_state = 42 controls_state = 54 controls_state = 52 controls_state = 830 controls_state = 61 controls_state = 67 controls_state = 59 controls_state = 57 controls_state = 85 }
				}
			}
			set_country_flag = communist_occ
		}
		if = {
			limit = { RUS = { has_country_flag = RUS_Oktober_revolution_fired } }
			every_state = {
				limit = { is_owned_by = GER is_controlled_by = RUS OR = { NOT = { is_core_of = GER } is_core_of = RUS is_core_of = POL is_core_of = LAT is_core_of = EST } }
				RUS = { transfer_state = PREV }
			}
		}
		every_state = {
			limit = { is_owned_by = GER is_core_of = BEL }
			BEL = { transfer_state = PREV }
		}
		every_state = {
			limit = { is_owned_by = GER is_core_of = FRA }
			FRA = { transfer_state = PREV }
		}
		if = {
			limit = {
				OR = {
					has_global_flag = brest_litovsk_negotiations
					has_global_flag = brest_litovsk_negotiations_GER_UKR_peace
					has_global_flag = brest_litovsk_GER_UKR_negotiations
					has_global_flag = russia_rejects_german_ultimatum
				}
			}
			clr_global_flag = brest_litovsk_negotiations
			clr_global_flag = brest_litovsk_negotiations_GER_UKR_peace
			clr_global_flag = brest_litovsk_GER_UKR_negotiations
			clr_global_flag = russia_rejects_german_ultimatum
			if = {
				limit = { RUS = { NOT = { controls_state = 12 } } }
				RUS = { release = LAT }
				if = {
					limit = { RUS = { NOT = { controls_state = 191 } } }
					LAT = { transfer_state = 916 transfer_state = 191 transfer_state = 1004 }
				}
			}
			if = {
				limit = { RUS = { NOT = { controls_state = 867 } } }
				RUS = { release = KUR }
			}
			if = {
				limit = { RUS = { NOT = { controls_state = 13 } } }
				EST = { transfer_state = 914 transfer_state = 921 transfer_state = 13 transfer_state = 920 transfer_state = 1003 }
				if = {
					limit = { NOT = { controls_state = 915 } }
					EST = { transfer_state = 915 transfer_state = 1002 }
				}
			}
			RUS = {
				add_popularity = {
					ideology = communism
					popularity = 0.05
				}
				add_popularity = {
					ideology = radical_socialism
					popularity = 0.1
				}
				add_war_support = 0.2
				add_stability = 0.1
				if = {
					limit = { has_war_with = GER }
					RUS = { country_event = treaty_of_brest.3 }
				}
			}
		}
		if = {
			limit = { RUS = { owns_state = 10 NOT = { controls_state = 10 } } }
			every_state = {
				limit = {
					is_owned_by = RUS
					OR = {
						state = 10
						state = 87
						state = 98
						state = 90
						state = 92
						state = 822
					}
				}
				POL = { transfer_state = PREV }
			}
		}
		if = {
			limit = {
				RUS = {
					NOT = {
						has_country_flag = RUS_brest_peace_fired
						has_global_flag = WWI_RUS_HAS_CAPITULATED
					}
					has_war_with = GER
				}
				NOT = { POL = { exists = yes } }
			}
			87 = {
				owner = { transfer_state = 762 }
			}
			if = {
				limit = { RUS = { owns_state = 189 } }
				every_state = {
					limit = {
						is_owned_by = GER
						OR = {
							state = 188
							state = 763
							state = 5
							state = 827
							state = 1000
							state = 85
							state = 828
							state = 86
							state = 63
							state = 62
							state = 68
						}
					}
					RUS = { transfer_state = PREV }
				}
			}
		}
		every_state = {
			limit = {
				is_owned_by = GER
				NOT = { is_controlled_by = GER }
				OR = {
					region = 97
					region = 84
					region = 94
					region = 83
					region = 78
					region = 167
					region = 143
				}
			}
			CONTROLLER = { transfer_state = PREV }
		}
		every_state = {
			limit = {
				is_owned_by = GER
				OR = {
					state = 788
					state = 1007
					state = 1009
					state = 1008
					state = 546
				}
			}
			ENG = { transfer_state = PREV }
		}
		every_state = {
			limit = {
				is_owned_by = GER
				region = 139
			}
			SAF = { transfer_state = PREV }
		}
		every_state = {
			limit = {
				is_owned_by = GER
				OR = {
					region = 140
					region = 184
				}
			}
			FRA = { transfer_state = PREV }
		}
		every_state = {
			limit = {
				is_owned_by = GER
				is_controlled_by = BEL
				is_on_continent = africa
			}
			BEL = { transfer_state = PREV }
		}
		every_state = {
			limit = {
				is_owned_by = GER
				OR = {
					state = 768
					state = 769
				}
			}
			ENG = { transfer_state = PREV }
		}
		
		every_country = {
			limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } is_faction_leader = yes }
			ROOT = { white_peace = PREV }
		}
		every_country = {
			limit = { is_subject_of = GER }
			leave_faction = yes
			OVERLORD = { end_puppet = PREV }
		}
		white_peace = BAK
		hidden_effect = {
			transfer_navy = {
				target = REB
			}
			REB = {
				annex_country = {
					target = ROOT
					transfer_troops = no
				}
			}
			annex_country = {
				target = REB
				transfer_troops = yes
			}
		}
	}
	option = {
		trigger = {
			is_ai = no
		}
		name = versailles.4.b
	}
}

# Мир Османии и Антанты в случае лимита капитуляции 0
country_event = {
	id = versailles.5
	title = versailles.5.t
	desc = versailles.5.d
	picture = GFX_report_event_ott_peace_ww1
	
	trigger = {
		tag = OTT
		has_global_flag = WWI_is_now
		has_country_flag = OTT_has_war_with_ENG
		OR = {
			has_global_flag = WWI_GER_HAS_CAPITULATED
			NOT = { is_in_faction_with = GER }
		}
		NOT = { has_global_flag = WWI_OTT_HAS_CAPITULATED }
		NOT = { surrender_progress > 0 }
		OR = {
			has_war_with = ENG
			has_war_with = FRA
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	fire_only_once = yes
	
	option = {
		name = versailles.5.a
		clr_country_flag = OTT_has_war_with_ENG
		OTT = {
			leave_faction = yes
			add_ideas = alliance_neutrality
		}
		every_state = {
			limit = {
				is_on_continent = middle_east
				OR = {
					is_controlled_by = OTT
					is_controlled_by = OTT
				}
				OR = {
					is_owned_by = ENG
					state = 453
				}
			}
			OTT = { transfer_state = PREV }
		}
		every_country = {
			limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } is_faction_leader = yes }
			ROOT = { white_peace = PREV }
		}
		white_peace = BAK
	}
}

# Мир Османии и Антанты в случае лимита капитуляции более 10 и не более 40
country_event = {
	id = versailles.6
	title = versailles.6.t
	desc = versailles.6.d
	picture = GFX_report_event_ott_peace_ww1
	
	trigger = {
		tag = OTT
		has_global_flag = WWI_is_now
		has_country_flag = OTT_has_war_with_ENG
		OR = {
			has_global_flag = WWI_GER_HAS_CAPITULATED
			NOT = { is_in_faction_with = GER }
		}
		NOT = { has_global_flag = WWI_OTT_HAS_CAPITULATED }
		NOT = { surrender_progress > 40 }
		surrender_progress > 10
		OR = {
			has_war_with = ENG
			has_war_with = FRA
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	fire_only_once = yes
	#мир
	option = {
		name = versailles.6.a
		ENG = { country_event = versailles.7 }
	}
	#не мир
	option = {
		trigger = {
			is_ai = no
		}
		name = versailles.6.b
	}
}
country_event = {
	id = versailles.7
	title = versailles.7.t
	desc = versailles.7.d
	picture = GFX_report_event_ott_peace_ww1
	
	is_triggered_only = yes
	
	option = {
		name = versailles.7.a
		clr_country_flag = OTT_has_war_with_ENG
		OTT = {
			every_state = {
				limit = { is_owned_by = OTT OR = { state = 291 state = 675 state = 676 state = 455 state = 454 state = 906 state = 905 } }
				ENG = { transfer_state = PREV }
			}
			every_state = {
				limit = { is_owned_by = OTT OR = { state = 553 state = 554 } }
				if = {
					limit = { FRA = { has_war_with = OTT } }
					FRA = { transfer_state = PREV }
					else = {
						ENG = { transfer_state = PREV }
					}
				}
			}
			every_country = {
				limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } is_faction_leader = yes }
				ROOT = { white_peace = PREV }
			}
			white_peace = BAK
			OTT = {
				leave_faction = yes
				add_ideas = alliance_neutrality
			}
		}
	}
	option = {
		trigger = { is_ai = no }
		name = versailles.7.b
	}
}

country_event = {
	id = versailles.9
	title = versailles.9.t
	desc = versailles.9.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	hidden = yes
	
	fire_only_once = yes
	
	trigger = {
		tag = GER
		has_global_flag = WWI_is_now
		OR = {
			has_war_with = ENG
			has_war_with = FRA
		}
		OR = {
			AND = {
				has_global_flag = WWI_AUH_HAS_CAPITULATED
				has_country_flag = GER_monarchy_fall
				surrender_progress > 0.02
			}
			AND = {
				has_global_flag = WWI_AUH_HAS_CAPITULATED
				NOT = { has_country_flag = GER_monarchy_fall }
				surrender_progress > 0.25
			}
			AND = {
				NOT = { has_global_flag = WWI_AUH_HAS_CAPITULATED }
				has_country_flag = GER_monarchy_fall
				surrender_progress > 0.1
			}
			surrender_progress > 0.4
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = versailles.9.a
		country_event = versailles.4
	}
}

country_event = {
	id = versailles.10
	title = versailles.10.t
	desc = versailles.10.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	hidden = yes
	
	fire_only_once = yes
	
	trigger = {
		tag = OTT
		has_country_flag = OTT_has_war_with_ENG
		NOT = {
			has_war_with = ENG
			has_war_with = FRA
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = versailles.10.a
		clr_country_flag = OTT_has_war_with_ENG
	}
}

# Переговоры о мире
country_event = {
	id = versailles.21
	title = versailles.21.t
	desc = versailles.21.desc
	picture = GFX_report_event_ger_november_revolution

	is_triggered_only = yes
	
	#Потребовать капитуляции
	option = {
		name = versailles.21.a
		GER = { country_event = { id = versailles.22 days = 3 } }
		ai_chance = {
			factor = 3
		}
	}
	
	#Потребовать отречения кайзера и капитуляции
	option = {
		trigger = {
			GER = { NOT = { has_country_flag = GER_monarchy_fall } }
		}
		name = versailles.21.a
		GER = { country_event = { id = versailles.23 days = 3 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 99999
				tag = USA
			}
		}
	}
	
	#Принять предложение о мире
	option = {
		name = versailles.21.b
		GER = { country_event = weltkrieg_frankfurt.0 }
		FRA = { country_event = weltkrieg_frankfurt.12 } # не слив
		ENG = { country_event = weltkrieg_frankfurt.14 } # не слив
		if = { limit = { OTT = { has_war_with = ENG NOT = { surrender_progress > 0.1 } } } OTT = { country_event = { id = versailles.5 days = 1 } } } # белый мир с Османией
		else_if = { limit = { OTT = { has_war_with = ENG surrender_progress > 0.1 } } OTT = { country_event = { id = versailles.6 days = 1 } } } # мир с Османией
		else = { OTT = { leave_faction = yes add_ideas = alliance_neutrality } } # слив Османии
		SER = { country_event = { id = weltkrieg_frankfurt.18 hours = 1 } } # не слив
		ROM = { country_event = { id = weltkrieg_frankfurt.20 hours = 1 } } # не слив
		set_global_flag = WWI_white_peace
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				FRA = { surrender_progress < 0.15 }
			}
		}
	}
}
# Требование капитуляции
country_event = {
	id = versailles.22
	title = versailles.22.t
	desc = versailles.22.desc
	picture = GFX_report_event_ger_november_revolution

	is_triggered_only = yes
	
	#Это неприемлимо
	option = {
		name = versailles.22.a
		set_country_flag = GER_peace_negotiations_with_Entente
		add_war_support = -0.05
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				has_country_flag = GER_monarchy_fall
			}
		}
	}
	
	#Мы согласны
	option = {
		name = versailles.22.b
		country_event = { id = versailles.4 days = 1 }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { has_country_flag = GER_monarchy_fall }
			}
		}
	}
}
# Требование отречения кайзера и капитуляции
country_event = {
	id = versailles.23
	title = versailles.23.t
	desc = versailles.23.desc
	picture = GFX_report_event_ger_november_revolution

	is_triggered_only = yes
	
	#Это неприемлимо
	option = {
		name = versailles.23.a
		set_country_flag = GER_peace_negotiations_with_Entente
		add_war_support = -0.05
		ai_chance = {
			factor = 3
			modifier = {
				factor = 0
				GER = { surrender_progress > 0.02 }
			}
		}
	}
	
	#Мы согласны
	option = {
		name = versailles.23.b
		country_event = germany.141
		country_event = { id = versailles.4 days = 1 }
		ai_chance = {
			factor = 1
		}
	}
}
# Требование отречения кайзера и капитуляции
country_event = {
	id = versailles.24
	title = versailles.24.t
	desc = versailles.24.desc
	picture = GFX_report_event_ger_november_revolution

	trigger = {
		GER = { has_country_flag = GER_peace_negotiations_with_Entente }
		GER = { has_war_with = ENG }
		OR = {
			AND = {
				tag = USA
				has_war_with = GER
			}
			AND = {
				tag  = ENG
				USA = { NOT = { has_war_with = GER } }
			}
		}
	}
	
	mean_time_to_happen = {
		days = 10
	}
	
	#Потребовать капитуляции и отречения кайзера
	option = {
		trigger = {
			GER = { NOT = { has_country_flag = GER_monarchy_fall } }
		}
		name = versailles.24.a
		GER = { country_event = { id = versailles.25 days = 3 } }
		ai_chance = {
			factor = 1
		}
	}
	
	#Свернуть переговоры
	option = {
		name = versailles.24.b
		GER = { country_event = { id = versailles.26 days = 0 } }
		ai_chance = {
			factor = 0
		}
	}
}
# Требование отречения кайзера и капитуляции
country_event = {
	id = versailles.25
	title = versailles.25.t
	desc = versailles.25.desc
	picture = GFX_report_event_ger_november_revolution

	is_triggered_only = yes
	
	#Это неприемлимо
	option = {
		name = versailles.25.a
		clr_country_flag = GER_peace_negotiations_with_Entente
		add_popularity = {
			ideology = authoritarism
			popularity = -0.05
		}
		ai_chance = {
			factor = 0
		}
	}
	
	#Мы согласны
	option = {
		name = versailles.25.b
		country_event = germany.141
		country_event = { id = versailles.4 days = 1 }
		ai_chance = {
			factor = 1
		}
	}
}
# Сворачивание переговоров
country_event = {
	id = versailles.26
	title = versailles.26.t
	desc = versailles.26.desc
	picture = GFX_report_event_ger_november_revolution

	is_triggered_only = yes
	
	option = {
		name = versailles.26.a
		clr_country_flag = GER_peace_negotiations_with_Entente
		add_popularity = {
			ideology = authoritarism
			popularity = -0.05
		}
	}
}

###### Парижская мирная конференция ######

# Начало конференции
country_event = {
	id = versailles.201
	title = versailles.201.t
	desc = versailles.201.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	trigger = {
		tag = FRA
		has_global_flag = versailles_peace_treaty
	}

	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = versailles.201.a
		set_variable = { global.vers_peace_conf_members = 0 }
		every_country = {
			limit = { has_country_flag = WWI_Entente_member }
			add_to_variable = { global.vers_peace_conf_members = 1 }
			set_variable = { vote_power = 1 }
		}
		if = {
			limit = {
				RUS = {
					NOT = { has_country_flag = WWI_Entente_member }
					NOT = { has_country_flag = RUS_brest_peace_fired }
				}
			}
			set_country_flag = WWI_Entente_member
			add_to_variable = { global.vers_peace_conf_members = 1 }
		}
		if = {
			limit = { RUS = { has_country_flag = WWI_Entente_member } }
			add_to_variable = { global.vers_peace_conf_members = 3 }
			RUS = { set_variable = { vote_power = 4 } }
		}
		if = {
			limit = { FRA = { has_country_flag = WWI_Entente_member } }
			add_to_variable = { global.vers_peace_conf_members = 2 }
			FRA = { set_variable = { vote_power = 3 } }
		}
		if = {
			limit = { ENG = { has_country_flag = WWI_Entente_member } }
			add_to_variable = { global.vers_peace_conf_members = 2 }
			ENG = { set_variable = { vote_power = 3 } }
		}
		if = {
			limit = { USA = { has_country_flag = WWI_Entente_member } }
			add_to_variable = { global.vers_peace_conf_members = 2 }
			USA = { set_variable = { vote_power = 3 } }
		}
		if = {
			limit = { SER = { has_country_flag = WWI_Entente_member } }
			add_to_variable = { global.vers_peace_conf_members = 1 }
			SER = { set_variable = { vote_power = 2 } }
		}
		if = {
			limit = { ITA = { has_country_flag = WWI_Entente_member } RUS = { NOT = { has_country_flag = WWI_Entente_member } } }
			add_to_variable = { global.vers_peace_conf_members = -1 }
			clear_variable = vote_power
			clr_country_flag = WWI_Entente_member
		}
		if = {
			limit = { FRA = { has_country_flag = WWI_Entente_member } RUS = { has_country_flag = WWI_Entente_member } }
			add_to_variable = { global.vers_peace_conf_members = 1 }
			FRA = { set_variable = { vote_power = 4 } }
		}
		set_variable = { global.FRA_Alsace_Lorraine = 0 }
		set_variable = { global.FRA_Saar_annex = 0 }
		set_variable = { global.FRA_Saar_referendum = 0 }
		set_variable = { global.FRA_Rheiland_annex = 0 }
		set_variable = { global.FRA_Rheiland_demilitarization = 0 }
		set_variable = { global.FRA_Rheiland_ind = 0 }
		
		set_variable = { global.BEL_Eupen_Malmedy = 0 }
		
		set_variable = { global.POL_Poznan = 0 }
		set_variable = { global.POL_Upper_Silesia_annex = 0 }
		set_variable = { global.POL_Upper_Silesia_referendum = 0 }
		set_variable = { global.POL_Gdansk_annex = 0 }
		set_variable = { global.POL_Gdansk_ind = 0 }
		set_variable = { global.POL_West_Prussia = 0 }
		
		set_variable = { global.RUS_East_Prussia_annex = 0 }
		set_variable = { global.RUS_East_Prussia_ind = 0 }
		set_variable = { global.RUS_Lusatia_annex = 0 }
		set_variable = { global.RUS_Lusatia_ind = 0 }
		
		set_variable = { global.DEN_Schleswig = 0 }
		
		set_variable = { global.LIT_Memelland = 0 }
		
		set_variable = { global.BAV_Bavaria = 0 }
		
		every_country = {
			limit = { has_country_flag = WWI_Entente_member }
			country_event = { id = versailles.202 days = 1 }
			country_event = { id = versailles.203 days = 10 }
			country_event = { id = versailles.204 days = 14 }
			
			country_event = { id = versailles.205 days = 20 }
			
			country_event = { id = versailles.206 days = 32 }
			country_event = { id = versailles.207 days = 34 }
			country_event = { id = versailles.208 days = 46 }
			country_event = { id = versailles.209 days = 48 }
			
			country_event = { id = versailles.210 days = 54 }
			country_event = { id = versailles.211 days = 56 }
			
			country_event = { id = versailles.212 days = 60 }
			
			country_event = { id = versailles.213 days = 74 }
			
			country_event = { id = versailles.214 days = 78 }
			
			hidden_effect = {
				country_event = { id = versailles.220 days = 174 }
				country_event = { id = versailles.221 days = 175 }
			}
		}
	}
}
# Эльзас-Лоррейн
country_event = {
	id = versailles.202
	title = versailles.202.t
	desc = versailles.202.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Франции
	option = {
		name = versailles.202.a
		add_to_variable = { global.FRA_Alsace_Lorraine = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Оставить Германии
	option = {
		trigger = {
			NOT = { tag = FRA }
		}
		name = versailles.202.b
	}
}
# Саар
country_event = {
	id = versailles.203
	title = versailles.203.t
	desc = versailles.203.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Франции
	option = {
		name = versailles.203.a
		add_to_variable = { global.FRA_Saar_annex = vote_power }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					tag = ENG
					tag = USA
				}
			}
		}
	}
	
	#Отдать Франции до референдума
	option = {
		name = versailles.203.b
		add_to_variable = { global.FRA_Saar_referendum = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.203.c
	}
}
# Рейнленд
country_event = {
	id = versailles.204
	title = versailles.204.t
	desc = versailles.204.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Франции
	option = {
		name = versailles.204.a
		add_to_variable = { global.FRA_Rheiland_annex = vote_power }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					tag = ENG
					tag = USA
				}
			}
		}
	}
	
	#Демилитаризовать
	option = {
		name = versailles.204.b
		add_to_variable = { global.FRA_Rheiland_demilitarization = vote_power }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				tag = FRA
			}
			modifier = {
				factor = 999
				OR = {
					tag = ENG
					tag = USA
				}
			}
		}
	}
	
	#Независимый Рейнленд
	option = {
		name = versailles.204.c
		add_to_variable = { global.FRA_Rheiland_ind = vote_power }
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 2
				tag = FRA
			}
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.204.e
	}
}
# Эйпен
country_event = {
	id = versailles.205
	title = versailles.205.t
	desc = versailles.205.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Бельгии
	option = {
		name = versailles.205.a
		add_to_variable = { global.BEL_Eupen_Malmedy = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.205.b
	}
}
# Познань
country_event = {
	id = versailles.206
	title = versailles.206.t
	desc = versailles.206.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Польше/России
	option = {
		name = versailles.206.a
		add_to_variable = { global.POL_Poznan = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.206.b
	}
}
# Верхняя Силезия
country_event = {
	id = versailles.207
	title = versailles.207.t
	desc = versailles.207.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Польше/России
	option = {
		name = versailles.207.a
		add_to_variable = { global.POL_Upper_Silesia_annex = vote_power }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				RUS = { NOT = { has_country_flag = WWI_Entente_member } }
			}
		}
	}
	
	#Референдум
	option = {
		name = versailles.207.b
		add_to_variable = { global.POL_Upper_Silesia_referendum = vote_power }
		ai_chance = {
			factor = 2
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.207.c
	}
}
# Данциг/Гданьск
country_event = {
	id = versailles.208
	title = versailles.208.t
	desc = versailles.208.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Польше/России
	option = {
		name = versailles.208.a
		add_to_variable = { global.POL_Gdansk_annex = vote_power }
	}
	
	#Вольный город
	option = {
		name = versailles.208.b
		add_to_variable = { global.POL_Gdansk_ind = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.208.c
	}
}
# Западная Прусия
country_event = {
	id = versailles.209
	title = versailles.209.t
	desc = versailles.209.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Польше/России
	option = {
		name = versailles.209.a
		add_to_variable = { global.POL_West_Prussia = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.209.b
	}
}
# Восточная Прусия
country_event = {
	id = versailles.210
	title = versailles.210.t
	desc = versailles.210.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Польше/России
	option = {
		name = versailles.210.a
		add_to_variable = { global.RUS_East_Prussia_annex = vote_power }
	}
	
	#Независимая Прусия
	option = {
		name = versailles.210.b
		add_to_variable = { global.RUS_East_Prussia_ind = vote_power }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				RUS = { NOT = { has_country_flag = WWI_Entente_member } }
				NOT = { tag = FRA }
			}
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.210.c
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				tag = FRA
			}
		}
	}
}
# Лужица
country_event = {
	id = versailles.211
	title = versailles.211.t
	desc = versailles.211.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Польше/России
	option = {
		name = versailles.211.a
		add_to_variable = { global.RUS_Lusatia_annex = vote_power }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				RUS = { NOT = { has_country_flag = WWI_Entente_member } }
			}
		}
	}
	
	#Независимая Лужица
	option = {
		name = versailles.211.b
		add_to_variable = { global.RUS_Lusatia_ind = vote_power }
	}
	
	#Оставить Германии
	option = {
		name = versailles.211.c
		ai_chance = {
			factor = 1
		}
	}
}
# Шлезевиг
country_event = {
	id = versailles.212
	title = versailles.212.t
	desc = versailles.212.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Дании север Шлезевига
	option = {
		name = versailles.212.a
		add_to_variable = { global.DEN_Schleswig = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Отдать Дании весь Шлезевиг
	option = {
		name = versailles.212.b
		add_to_variable = { global.DEN_Schleswig_all = vote_power }
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 999
				tag = DEN
			}
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.212.c
	}
}
# Мемель
country_event = {
	id = versailles.213
	title = versailles.213.t
	desc = versailles.213.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Литве/России
	option = {
		name = versailles.213.a
		add_to_variable = { global.LIT_Memelland = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.213.b
	}
}
# Бавария
country_event = {
	id = versailles.214
	title = versailles.214.t
	desc = versailles.214.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Независимая Бавария
	option = {
		name = versailles.214.a
		add_to_variable = { global.BAV_Bavaria = vote_power }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 5
				tag = FRA
			}
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.214.b
		ai_chance = {
			factor = 2
		}
	}
}

country_event = {
	id = versailles.220
	title = versailles.220.t
	desc = versailles.220.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	hidden = yes
	
	is_triggered_only = yes
	
	option = {
		name = versailles.220.a
		divide_variable = {
			var = global.FRA_Alsace_Lorraine
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.FRA_Saar_annex
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.FRA_Saar_referendum
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.FRA_Rheiland_annex
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.FRA_Rheiland_demilitarization
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.FRA_Rheiland_ind
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.BEL_Eupen_Malmedy
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.POL_Poznan
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.POL_Upper_Silesia_annex
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.POL_Upper_Silesia_referendum
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.POL_Gdansk_annex
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.POL_Gdansk_ind
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.POL_West_Prussia
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.RUS_East_Prussia_annex
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.RUS_East_Prussia_ind
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.RUS_Lusatia_annex
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.RUS_Lusatia_ind
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.DEN_Schleswig
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.DEN_Schleswig_all
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.LIT_Memelland
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.BAV_Bavaria
			value = global.vers_peace_conf_members
		}
		
		set_variable = { global.FRA_Rheiland_GER = 1 }
		subtract_from_variable = { global.FRA_Rheiland_GER = global.FRA_Rheiland_annex }
		subtract_from_variable = { global.FRA_Rheiland_GER = global.FRA_Rheiland_demilitarization }
		subtract_from_variable = { global.FRA_Rheiland_GER = global.FRA_Rheiland_ind }
		
		set_variable = { global.FRA_Saar_GER = 1 }
		subtract_from_variable = { global.FRA_Saar_GER = global.FRA_Saar_annex }
		subtract_from_variable = { global.FRA_Saar_GER = global.FRA_Saar_referendum }
		
		set_variable = { global.POL_Upper_Silesia_GER = 1 }
		subtract_from_variable = { global.POL_Upper_Silesia_GER = global.POL_Upper_Silesia_annex }
		subtract_from_variable = { global.POL_Upper_Silesia_GER = global.POL_Upper_Silesia_referendum }
		
		set_variable = { global.POL_Gdansk_GER = 1 }
		subtract_from_variable = { global.POL_Gdansk_GER = global.POL_Gdansk_annex }
		subtract_from_variable = { global.POL_Gdansk_GER = global.POL_Gdansk_ind }
		
		set_variable = { global.RUS_East_Prussia_GER = 1 }
		subtract_from_variable = { global.RUS_East_Prussia_GER = global.RUS_East_Prussia_annex }
		subtract_from_variable = { global.RUS_East_Prussia_GER = global.RUS_East_Prussia_ind }
		
		set_variable = { global.RUS_Lusatia_GER = 1 }
		subtract_from_variable = { global.RUS_Lusatia_GER = global.RUS_Lusatia_annex }
		subtract_from_variable = { global.RUS_Lusatia_GER = global.RUS_Lusatia_ind }
		
		set_variable = { global.DEN_Schleswig_GER = 1 }
		subtract_from_variable = { global.RUS_Lusatia_GER = global.DEN_Schleswig }
		subtract_from_variable = { global.RUS_Lusatia_GER = global.DEN_Schleswig_all }
		
	}
}

country_event = {
	id = versailles.221
	title = versailles.221.t
	desc = versailles.221.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	option = {
		name = versailles.221.a
		
		if = {
			limit = { check_variable = { global.FRA_Rheiland_GER < 0.5 } }
			if {
				limit = { check_variable = { global.FRA_Rheiland_annex > global.FRA_Rheiland_ind } check_variable = { global.FRA_Rheiland_annex > global.FRA_Rheiland_demilitarization } }
				FRA = { transfer_state = 829 transfer_state = 42 transfer_state = 51 }
				else = {
					if = {
						limit = { check_variable = { global.FRA_Rheiland_demilitarization > global.FRA_Rheiland_ind } check_variable = { global.FRA_Rheiland_demilitarization > global.FRA_Rheiland_annex } }
						GER = { transfer_state = 829 transfer_state = 42 transfer_state = 50 transfer_state = 51 }
						829 = { set_demilitarized_zone = yes }
						42 = { set_demilitarized_zone = yes }
						50 = { set_demilitarized_zone = yes }
						51 = { set_demilitarized_zone = yes }
						else = {
							RHE ={
								transfer_state = 829
								transfer_state = 42
								transfer_state = 51
							}
						}
					}
				}
			}
			else = {
				GER = { transfer_state = 829 transfer_state = 42 transfer_state = 50 transfer_state = 51 }
			}
		}
		
		if = {
			limit = { check_variable = { global.FRA_Saar_GER < 0.5 } }
			if {
				limit = { check_variable = { global.FRA_Saar_annex > global.FRA_Saar_referendum } }
				FRA = { transfer_state = 850 }
				else = {
					FRA = { transfer_state = 850 set_country_flag = FRA_Saar_referendum }
				}
			}
			else = {
				if = {
					limit = { check_variable = { global.FRA_Rheiland_GER < 0.5 } }
					if {
						limit = { check_variable = { global.FRA_Rheiland_annex > global.FRA_Rheiland_ind } check_variable = { global.FRA_Rheiland_annex > global.FRA_Rheiland_demilitarization } }
						FRA = { transfer_state = 850 }
						else = {
							if = {
								limit = { check_variable = { global.FRA_Rheiland_demilitarization > global.FRA_Rheiland_ind } check_variable = { global.FRA_Rheiland_demilitarization > global.FRA_Rheiland_annex } }
								GER = { transfer_state = 850 }
								850 = { set_demilitarized_zone = yes }
								else = {
									RHE ={
										transfer_state = 850
									}
								}
							}
						}
						else = {
							GER = { transfer_state = 850 }
						}
					}
				}
			}
		}
		if = {
			limit = { check_variable = { global.POL_Upper_Silesia_GER < 0.5 } }
			if {
				limit = { check_variable = { global.POL_Upper_Silesia_annex > global.POL_Upper_Silesia_referendum } }
				if = {
					limit = { POL = { exists = yes } }
					POL = { transfer_state = 67 transfer_state = 762 }
					else = { RUS = { transfer_state = 67 transfer_state = 762 } }
				}
				else = {
					GER = { transfer_state = 67 transfer_state = 762 set_country_flag = Upper_Silesia_referendum }
				}
			}
			else = {
				GER = { transfer_state = 67 transfer_state = 762 }
			}
		}
		if = {
			limit = { check_variable = { global.POL_Gdansk_GER < 0.5 } }
			if {
				limit = { check_variable = { global.POL_Gdansk_annex > global.POL_Gdansk_ind } }
				if = {
					limit = { POL = { exists = yes } }
					POL = { transfer_state = 85 }
					else = { RUS = { transfer_state = 85 } }
				}
				else = {
					DNZ = { transfer_state = 85 }
				}
			}
			else = {
				if = { limit = { check_variable = { global.POL_West_Prussia < 0.5 } }
					if {
						limit = { check_variable = { global.RUS_East_Prussia_GER < 0.5 } }
						if = {
							limit = { check_variable = { global.RUS_East_Prussia_annex > global.RUS_East_Prussia_ind } }
							GER = { transfer_state = 85 }
							else = {
								PRS = { transfer_state = 85 }
							}
						}
						else = {
							GER = { transfer_state = 85 }
						}
					}
					else = {
						GER = { transfer_state = 85 }
					}
				}
			}
		}
		if = {
			limit = { check_variable = { global.RUS_East_Prussia_GER < 0.5 } }
			if {
				limit = { check_variable = { global.RUS_East_Prussia_annex > global.RUS_East_Prussia_ind } }
				if = {
					limit = { POL = { exists = yes } }
					POL = { transfer_state = 5 transfer_state = 763 transfer_state = 827 }
					else = { RUS = { transfer_state = 5 transfer_state = 763 transfer_state = 827 } }
				}
				else = {
					PRS = { transfer_state = 5 transfer_state = 763 transfer_state = 827 }
				}
			}
			else = {
				GER = { transfer_state = 5 transfer_state = 763 transfer_state = 827 }
			}
		}
		if = {
			limit = { check_variable = { global.RUS_Lusatia_GER < 0.5 } }
			if {
				limit = { check_variable = { global.RUS_Lusatia_annex > global.RUS_Lusatia_ind } }
				if = {
					limit = { POL = { exists = yes } }
					POL = { transfer_state = 65 }
					else = { RUS = { transfer_state = 65 } }
				}
				#else = {
				#	LZT = { transfer_state = 65 }
				#}
			}
			else = {
				GER = { transfer_state = 65 transfer_state = 762 }
			}
		}
		if = {
			limit = { check_variable = { global.FRA_Alsace_Lorraine < 0.5 } }
			GER = { transfer_state = 28 }
			else = {
				FRA = { transfer_state = 28 }
			}
		}
		if = {
			limit = { check_variable = { global.BEL_Eupen_Malmedy < 0.5 } }
			if = {
				limit = { check_variable = { global.FRA_Rheiland_GER < 0.5 } }
				if {
					limit = { check_variable = { global.FRA_Rheiland_annex > global.FRA_Rheiland_ind } check_variable = { global.FRA_Rheiland_annex > global.FRA_Rheiland_demilitarization } }
					FRA = { transfer_state = 992 }
					else = {
						if = {
							limit = { check_variable = { global.FRA_Rheiland_demilitarization > global.FRA_Rheiland_ind } check_variable = { global.FRA_Rheiland_demilitarization > global.FRA_Rheiland_annex } }
							GER = { transfer_state = 992 }
							992 = { set_demilitarized_zone = yes }
							else = { RHE = { transfer_state = 992 } }
						}
					}
					else = {
						GER = { transfer_state = 992 }
					}
				}
			}
			else = {
				BEL = { transfer_state = 992 }
			}
		}
		if = {
			limit = { check_variable = { global.POL_Poznan < 0.5 } }
			GER = { transfer_state = 86 }
			else = {
				if = {
					limit = { POL = { exists = yes } }
					POL = { transfer_state = 86 }
					else = {
						RUS = { transfer_state = 86 }
					}
				}
			}
		}
		if = {
			limit = { check_variable = { global.POL_West_Prussia < 0.5 } }
			GER = { transfer_state = 828 }
			else = {
				if = {
					limit = { POL = { exists = yes } }
					POL = { transfer_state = 828 }
					else = {
						RUS = { transfer_state = 828 }
					}
				}
			}
		}
		if = {
			limit = { check_variable = { global.DEN_Schleswig_GER < 0.5 } }
			if = {
				limit = { check_variable = { global.DEN_Schleswig_all < global.DEN_Schleswig } }
				DEN = { transfer_state = 980 }
				GER = { transfer_state = 941 }
				else = {
					DEN = { transfer_state = 980 transfer_state = 941 }
				}
			}
			else = {
				GER = { transfer_state = 980 transfer_state = 941 }
			}
		}
		if = {
			limit = { check_variable = { global.LIT_Memelland < 0.5 } }
			if = {
				limit = { check_variable = { global.RUS_East_Prussia_ind > global.RUS_East_Prussia_annex } check_variable = { global.RUS_East_Prussia_ind > global.RUS_East_Prussia_GER } }
				PRS = { transfer_state = 188 }
				else = {
					every_country = {
						limit = { controls_state = 189 }
						transfer_state = 188
					}
				}
			}
			else = {
				if = {
					limit = { LIT = { exists = yes } }
					LIT = { transfer_state = 188 }
					else = {
						if = {
							limit = { POL = { controls_state = 189 } }
							POL = { transfer_state = 188 }
							else = {
								RUS = { transfer_state = 188 }
							}
						}
					}
				}
			}
		}
		if = {
			limit = { check_variable = { global.BAV_Bavaria < 0.5 } }
			GER = {
				transfer_state = 52
				transfer_state = 53
				transfer_state = 54
			}
			else = {
				BAV = {
					transfer_state = 52
					transfer_state = 53
					transfer_state = 54
				}
			}
		}
		if = {
			limit = { AUH = { exists = yes } }
			AUH = { transfer_state = 153 transfer_state = 838 }
			else = {
				if = {
					limit = { AUS = { exists = yes } }
					AUS = { transfer_state = 153 transfer_state = 838 }
				}
			}
		}
	}
}

# Конец Войны
country_event = {
	id = versailles.1918
	title = versailles.1918.t
	desc = versailles.1918.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	hidden = yes
	
	trigger = {
		has_global_flag = WWI_is_now
		NOT = { GER = { has_war_with = ENG has_war_with = FRA } }
		NOT = { AUH = { has_war_with = ENG has_war_with = FRA } }
		NOT = { BUL = { has_war_with = ENG has_war_with = FRA } }
		NOT = { OTT = { has_war_with = ENG has_war_with = FRA } }
	}

	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = versailles.1918.a
		clr_global_flag = WWI_is_now
		FRA = { dismantle_faction = yes }
		ENG = { dismantle_faction = yes }
		if = {
			limit = { has_global_flag = WWI_GER_sieg_im_Weltkrieg }
			every_country = {
				limit = { is_in_faction_with = GER is_subject = no OR = { tag = AUH tag = BUL tag = OTT tag = ITA tag = TUR tag = UKR } }
				leave_faction = yes
			}
			else = { dismantle_faction = yes }
		}
	}
}