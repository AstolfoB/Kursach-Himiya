###########################
# Versailles Peace Treaty Events
###########################

add_namespace = versailles

###### Капитуляция Центральных держав ######

# Болгария
country_event = {
	id = versailles.1
	title = versailles.1.t
	desc = versailles.1.d
	picture = GFX_report_event_bul_peace_ww1
	
	fire_only_once = yes
	
	trigger = {
		tag = BUL
		has_global_flag = WWI_is_now
		OR = {
			has_war_with = ENG
			has_war_with = FRA
		}
		OR = {
			AND = {
				OR = {
					has_global_flag = WWI_AUH_HAS_CAPITULATED
					has_global_flag = WWI_TUR_HAS_CAPITULATED
				}
				surrender_progress > 0.2
			}
			surrender_progress > 0.5
		}
	}

	immediate = {
		every_country = {
			limit = { OR = { is_subject = no tag = AST tag = SAF tag = CAN tag = NZL } NOT = { has_country_flag = WWI_Entente_member } has_war_with = BUL OR = { is_in_faction_with = ENG is_in_faction_with = FRA } NOT = { is_in_faction_with = GER } NOT = { tag = BUL tag = TUR tag = GER tag = AUH } }
			set_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Entente_member OR = { NOT = { is_in_faction_with = ENG is_in_faction_with = FRA } is_in_faction_with = GER is_in_faction_with = AUH } AND ={ is_subject = yes NOT = { tag = AST tag = SAF tag = CAN tag = NZL } } }
			clr_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { NOT = { has_country_flag = WWI_Central_Powers_member } has_war_with = ENG OR = { is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = BUL is_in_faction_with = TUR } NOT = { tag = ENG tag = FRA tag = ITA tag = RUS } }
			set_country_flag = WWI_Central_Powers_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Central_Powers_member OR = { is_in_faction_with = ENG has_war_with = GER has_war_with = AUH NOT = { has_war_with = ENG } } }
			clr_country_flag = WWI_Central_Powers_member
		}
	}
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = versailles.1.a
		if = {
			limit = {
				any_country = {
					is_socialist_country = yes
					OR = { controls_state = 48 controls_state = 780 controls_state = 211 controls_state = 946 controls_state = 212 controls_state = 945 controls_state = 944 }
				}
			}
			set_country_flag = communist_occ
		}

		set_global_flag = WWI_BUL_HAS_CAPITULATED
		leave_faction = yes
		if = {
			limit = { RUS = { OR = { controls_state = 211 controls_state = 945 controls_state = 780 controls_state = 946 } } }
			RUS = {
				transfer_state = 211
				transfer_state = 945
			}
		}
		if = {
			limit = { SER = { controls_state = 816 } }
			SER = { transfer_state = 816 }
		}
		if = {
			limit = { SER = { controls_state = 942 } }
			SER = { transfer_state = 942 }
		}
		if = {
			limit = { OR = { SER = { controls_state = 943 } GRR = { controls_state = 943 } GRE = { controls_state = 943 } } }
			SER = { transfer_state = 943 }
		}
		if = {
			limit = { SER = { controls_state = 944 } }
			SER = { transfer_state = 944 }
		}
		else_if = {
			limit = { GRR = { controls_state = 944 } }
			GRR = { transfer_state = 944 }
		}
		else_if = {
			limit = { GRE = { controls_state = 944 } }
			GRE = { transfer_state = 944 }
		}
		if = {
			limit = { SER = { controls_state = 212 } }
			SER = { transfer_state = 212 }
		}
		else_if = {
			limit = { GRR = { controls_state = 212 } }
			GRR = { transfer_state = 212 }
		}
		else_if = {
			limit = { GRE = { controls_state = 212 } }
			GRE = { transfer_state = 212 }
		}
		else_if = {
			limit = { ENG = { controls_state = 212 } }
			ENG = { transfer_state = 212 }
		}
		else_if = {
			limit = { FRA = { controls_state = 212 } }
			FRA = { transfer_state = 212 }
		}
		every_country = {
			limit = { owns_state = 731 }
			transfer_state = 774
			transfer_state = 775
		}
		every_country = {
			limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } is_faction_leader = yes }
			ROOT = { white_peace = PREV }
		}
		every_country = {
			limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } }
			ROOT = { give_military_access = PREV }
		}
		every_country = {
			limit = { is_subject_of = ROOT }
			ROOT = { end_puppet = PREV }
		}
		hidden_effect = {
			REB = {
				annex_country = {
					target = ROOT
					transfer_troops = no
				}
			}
			annex_country = {
				target = REB
				transfer_troops = no
			}
		}
		hidden_effect = {
			if = {
				limit = { has_country_flag = communist_occ }
				set_politics = {
					ruling_party = communism
				}
				clr_country_flag = communist_occ
				add_popularity = {
					ideology = authoritarism
					popularity = -1
				}
				add_popularity = {
					ideology = market_liberalism
					popularity = -1
				}
				add_popularity = {
					ideology = communism
					popularity = 0.2
				}
				else = {
					set_politics = {
						ruling_party = authoritarism
					}
					add_popularity = {
						ideology = authoritarism
						popularity = 0.3
					}
				}
			}
		}
		hidden_effect = { news_event = { id = news_n.101 hours = 3 } }
	}
	option = {
		trigger = {
			is_ai = no
		}
		name = versailles.1.b
	}
}
# Турция
country_event = {
	id = versailles.2
	title = versailles.2.t
	desc = versailles.2.d
	picture = GFX_report_event_tur_peace_ww1
	
	fire_only_once = yes
	
	immediate = {
		every_country = {
			limit = { OR = { is_subject = no tag = AST tag = SAF tag = CAN tag = NZL } NOT = { has_country_flag = WWI_Entente_member } has_war_with = TUR OR = { is_in_faction_with = ENG is_in_faction_with = FRA } NOT = { is_in_faction_with = GER } NOT = { tag = BUL tag = TUR tag = GER tag = AUH } }
			set_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Entente_member OR = { NOT = { is_in_faction_with = ENG is_in_faction_with = FRA } is_in_faction_with = GER is_in_faction_with = AUH } AND ={ is_subject = yes NOT = { tag = AST tag = SAF tag = CAN tag = NZL } } }
			clr_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { NOT = { has_country_flag = WWI_Central_Powers_member } has_war_with = ENG OR = { is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = BUL is_in_faction_with = TUR } NOT = { tag = ENG tag = FRA tag = ITA tag = RUS } }
			set_country_flag = WWI_Central_Powers_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Central_Powers_member OR = { is_in_faction_with = ENG has_war_with = GER has_war_with = AUH NOT = { has_war_with = ENG } } }
			clr_country_flag = WWI_Central_Powers_member
		}
	}
	trigger = {
		tag = TUR
		has_global_flag = WWI_is_now
		OR = {
			has_war_with = ENG
			has_war_with = FRA
		}
		OR = {
			AND = {
				has_global_flag = WWI_GER_HAS_CAPITULATED
				has_global_flag = WWI_AUH_HAS_CAPITULATED
				surrender_progress > 0.3
			}
			AND = {
				OR = {
					has_global_flag = WWI_GER_HAS_CAPITULATED
					has_global_flag = WWI_AUH_HAS_CAPITULATED
				}
				surrender_progress > 0.35
			}
			surrender_progress > 0.4
		}
	}

	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = versailles.2.a
		if = {
			limit = {
				any_country = {
					is_socialist_country = yes
					OR = { controls_state = 49 controls_state = 341 controls_state = 347 controls_state = 343 controls_state = 348 }
				}
			}
			set_country_flag = communist_occ
		}
		
		set_global_flag = WWI_TUR_HAS_CAPITULATED
		leave_faction = yes
		if = {
			limit = { NOT = { has_global_flag = WWI_FRA_HAS_CAPITULATED } }
			FRA = {
				transfer_state = 553
				transfer_state = 554
				transfer_state = 677
				transfer_state = 680
				transfer_state = 344
				transfer_state = 345
			}
			else = {
				ENG = {
					transfer_state = 553
					transfer_state = 554
					transfer_state = 677
					transfer_state = 680
					transfer_state = 344
					transfer_state = 345
				}
			}
		}
		if = {
			limit = { NOT = { has_global_flag = WWI_ITA_HAS_CAPITULATED } }
			ITA = {
				transfer_state = 342
			}
			else = {
				if = {
					limit = { NOT = { has_global_flag = WWI_FRA_HAS_CAPITULATED } }
					FRA = { transfer_state = 342 }
					else = {
						ENG = { transfer_state = 342 }
					}
				}
			}
		}
		ENG = {
			transfer_state = 454
			transfer_state = 455
			transfer_state = 905
			transfer_state = 906
			transfer_state = 675
			transfer_state = 291
			transfer_state = 676
		}
		if = {
			limit = { RUS = { controls_state = 341 } }
			RUS = {
				transfer_state = 340
				transfer_state = 341
				transfer_state = 860
				transfer_state = 949
			}
		}
		else_if = {
			limit = { FRA = { controls_state = 341 } }
			FRA = {
				transfer_state = 340
				transfer_state = 341
				transfer_state = 860
				transfer_state = 949
			}
		}
		else_if = {
			limit = { ITA = { controls_state = 341 } }
			ITA = {
				transfer_state = 340
				transfer_state = 341
				transfer_state = 860
				transfer_state = 949
			}
		}
		else_if = {
			limit = { GRE = { controls_state = 341 } }
			GRE = {
				transfer_state = 340
				transfer_state = 341
				transfer_state = 860
				transfer_state = 949
			}
		}
		else_if = {
			limit = { GRR = { controls_state = 341 } }
			GRR = {
				transfer_state = 340
				transfer_state = 341
				transfer_state = 860
				transfer_state = 949
			}
		}
		else = {
			ENG = {
				transfer_state = 340
				transfer_state = 341
				transfer_state = 860
				transfer_state = 949
			}
		}
		if = {
			limit = { RUS = { has_war_with = TUR owns_state = 231 } }
			RUS = {
				transfer_state = 352
				transfer_state = 353
				transfer_state = 354
			}
		}
		if = {
			limit = {
				GRE = { controls_state = 339 }
			}
			GRE = { transfer_state = 339 }
		}
		if = {
			limit = {
				GRR = { controls_state = 339 }
			}
			GRR = { transfer_state = 339 }
		}
		every_country = {
			limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } is_faction_leader = yes }
			ROOT = { white_peace = PREV }
		}
		every_country = {
			limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } }
			ROOT = { give_military_access = PREV }
		}
		every_country = {
			limit = { is_subject_of = ROOT }
			ROOT = { end_puppet = PREV }
		}
		hidden_effect = {
			REB = {
				annex_country = {
					target = ROOT
					transfer_troops = no
				}
			}
			annex_country = {
				target = REB
				transfer_troops = no
			}
			set_capital = 49
		}
		hidden_effect = {
			if = {
				limit = { has_country_flag = communist_occ }
				set_politics = {
					ruling_party = communism
				}
				add_popularity = {
					ideology = despotism
					popularity = 0.1
				}
				add_popularity = {
					ideology = market_liberalism
					popularity = 0.1
				}
				add_popularity = {
					ideology = communism
					popularity = 0.3
				}
				else = {
					set_politics = {
						ruling_party = market_liberalism
					}
					add_popularity = {
						ideology = market_liberalism
						popularity = 0.1
					}
				}
			}
		}
		hidden_effect = { news_event = { id = news_n.102 hours = 3 } }
	}
	option = {
		trigger = {
			is_ai = no
		}
		name = versailles.2.b
	}
}
# Австро-Венгрия
country_event = {
	id = versailles.3
	title = versailles.3.t
	desc = versailles.3.d
	picture = GFX_report_event_auh_peace_ww1
	
	fire_only_once = yes
	
	immediate = {
		every_country = {
			limit = { OR = { is_subject = no tag = AST tag = SAF tag = CAN tag = NZL } NOT = { has_country_flag = WWI_Entente_member } has_war_with = AUH OR = { is_in_faction_with = ENG is_in_faction_with = FRA } NOT = { is_in_faction_with = GER } NOT = { tag = BUL tag = TUR tag = GER tag = AUH } }
			set_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Entente_member OR = { NOT = { is_in_faction_with = ENG is_in_faction_with = FRA } is_in_faction_with = GER is_in_faction_with = AUH } AND ={ is_subject = yes NOT = { tag = AST tag = SAF tag = CAN tag = NZL } } }
			clr_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { NOT = { has_country_flag = WWI_Central_Powers_member } has_war_with = ENG OR = { is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = BUL is_in_faction_with = TUR } NOT = { tag = ENG tag = FRA tag = ITA tag = RUS } }
			set_country_flag = WWI_Central_Powers_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Central_Powers_member OR = { is_in_faction_with = ENG has_war_with = GER has_war_with = AUH NOT = { has_war_with = ENG } } }
			clr_country_flag = WWI_Central_Powers_member
		}
	}
	trigger = {
		tag = AUH
		has_global_flag = WWI_is_now
		OR = {
			has_war_with = ENG
			has_war_with = FRA
		}
		OR = {
			AND = {
				has_global_flag = WWI_GER_HAS_CAPITULATED
				surrender_progress > 0.08
			}
			AND = {
				has_global_flag = WWI_TUR_HAS_CAPITULATED
				surrender_progress > 0.1
			}
			AND = {
				has_stability < 0.2
				surrender_progress > 0.2
			}
			AND = {
				has_stability < 0.15
				surrender_progress > 0.15
			}
			AND = {
				has_stability < 0.1
				surrender_progress > 0.1
			}
			AND = {
				has_stability < 0.05
				surrender_progress > 0.05
			}
			surrender_progress > 0.25
		}
	}

	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = versailles.3.a
		set_global_flag = WWI_AUH_HAS_CAPITULATED
		leave_faction = yes
		CZE = {
			if = {
				limit = {
					any_country = {
						NOT = {
							tag = CZE
						}
						is_socialist_country = yes
						OR = { controls_state = 9 controls_state = 75 }
					}
				}
				set_politics = {
					ruling_party = communism
				}
				add_popularity = {
					ideology = communism
					popularity = 0.2
				}
			}
		}
		HUN = {
			if = {
				limit = {
					any_country = {
						NOT = {
							tag = HUN
						}
						is_socialist_country = yes
						OR = { controls_state = 43 controls_state = 154 controls_state = 155 }
					}
				}
				set_politics = {
					ruling_party = communism
				}
				add_popularity = {
					ideology = communism
					popularity = 0.2
				}
			}
		}
		SLO = {
			if = {
				limit = {
					any_country = {
						NOT = {
							tag = SLO
							tag = CZE
							tag = HUN
						}
						is_socialist_country = yes
						controls_state = 70
					}
				}
				set_politics = {
					ruling_party = communism
				}
				add_popularity = {
					ideology = communism
					popularity = 0.2
				}
			}
		}
		if = {
			limit = {
				any_country = {
					NOT = {
						tag = AUH
						tag = AUS
					}
					is_socialist_country = yes
					OR = { controls_state = 4 controls_state = 841 controls_state = 152 }
				}
			}
			add_stability = -1
			add_popularity = {
				ideology = communism
				popularity = 0.3
			}
			add_popularity = {
				ideology = radical_socialism
				popularity = 0.1
			}
			add_popularity = {
				ideology = social_democracy
				popularity = 0.15
			}
			add_popularity = {
				ideology = market_liberalism
				popularity = 0.1
			}
			else = {
				add_stability = -0.25
				add_popularity = {
					ideology = authoritarism
					popularity = -0.5
				}
				add_popularity = {
					ideology = market_liberalism
					popularity = 0.1
				}
				add_popularity = {
					ideology = social_democracy
					popularity = 0.2
				}
			}
		}
		every_country = {
			limit = { owns_state = 776 }
			transfer_state = 789
		}
		SER = {
			if = {
				limit = {
					any_country = {
						is_socialist_country = yes
						OR = { controls_state = 107 controls_state = 108 controls_state = 948 }
					}
				}
				set_politics = {
					ruling_party = communism
				}
				add_popularity = {
					ideology = communism
					popularity = 0.2
				}
			}
			transfer_state = 107
			transfer_state = 108
			transfer_state = 948
			transfer_state = 947
			transfer_state = 817
			transfer_state = 778
			transfer_state = 818
			transfer_state = 106
			transfer_state = 777
			
			transfer_state = 779
			transfer_state = 105
			transfer_state = 825
		}
		if = {
			limit = { ROM = { owns_state = 79 } }
			ROM = { transfer_state = 804 transfer_state = 820 }
		}
		if = {
			limit = { ROM = { owns_state = 81 } }
			ROM = { transfer_state = 819 }
		}
		if = {
			limit = { ROM = { controls_state = 76 } }
			ROM = { transfer_state = 76 }
		}
		if = {
			limit = { ROM = { controls_state = 84 } }
			ROM = { transfer_state = 84 }
		}
		if = {
			limit = { ROM = { controls_state = 83 OR = { owns_state = 76 owns_state = 84 } } }
			ROM = { transfer_state = 83 }
		}
		if = {
			limit = { ROM = { controls_state = 154 OR = { owns_state = 76 owns_state = 83 } } }
			ROM = { transfer_state = 154 }
		}
		CRO = {
			if = {
				limit = {
					any_country = {
						NOT = {
							tag = SER
						}
						is_socialist_country = yes
						OR = { controls_state = 109 controls_state = 104 }
					}
				}
				set_politics = {
					ruling_party = communism
				}
				add_popularity = {
					ideology = communism
					popularity = 0.2
				}
			}
			set_cosmetic_tag = SCS
		}
		ITA = { transfer_state = 158 }
		ITA = { transfer_state = 159 }
		ITA = { transfer_state = 160 }
		ITA = { transfer_state = 161 }
		
		ITA = { transfer_state = 823 }
		ITA = { transfer_state = 824 }
		ITA = { transfer_state = 39 }
		ITA = { transfer_state = 823 }
		if = {
			limit = { ITA = { controls_state = 103 } }
			ITA = { transfer_state = 103 }
		}
		else_if = {
			limit = { SER = { controls_state = 103 } }
			SER = { transfer_state = 103 }
		}
		else = {
			CRO = { transfer_state = 103 }
		}
		if = {
			limit = { ITA = { controls_state = 968 owns_state = 103 } }
			ITA = { transfer_state = 968 }
		}
		else_if = {
			limit = { SER = { controls_state = 968 owns_state = 104 } }
			SER = { transfer_state = 968 }
		}
		else = {
			CRO = { transfer_state = 968 }
		}
		if = {
			limit = { ITA = { controls_state = 163 } }
			ITA = { transfer_state = 163 }
		}
		else_if = {
			limit = { SER = { controls_state = 163 owns_state = 103 } }
			SER = { transfer_state = 163 }
		}
		else = {
			CRO = { transfer_state = 163 }
		}
		if = {
			limit = { SER = { controls_state = 109 } }
			SER = { transfer_state = 109 }
			else = { CRO = { transfer_state = 109 } }
		}
		if = {
			limit = { SER = { controls_state = 963 } }
			SER = { transfer_state = 963 }
			else = { CRO = { transfer_state = 963 } }
		}
		if = {
			limit = { SER = { controls_state = 104 } }
			SER = { transfer_state = 104 }
			else = { CRO = { transfer_state = 104 } }
		}
		if = {
			limit = { SER = { controls_state = 862 } }
			SER = { transfer_state = 862 }
			else = { CRO = { transfer_state = 862 } }
		}
		if = {
			limit = { SER = { OR = { controls_state = 45 OR = { owns_state = 862 owns_state = 963 } } } }
			SER = { transfer_state = 45 }
		}
		else_if = {
			limit = { AUH = { NOT = { controls_state = 45 } } }
			CRO = { transfer_state = 45 }
		}
		if = {
			limit = { SER = { controls_state = 962 OR = { owns_state = 45 owns_state = 963 } } }
			SER = { transfer_state = 962 }
		}
		else_if = {
			limit = { AUH = { NOT = { controls_state = 962 } } }
			CRO = { transfer_state = 962 }
		}
		if = {
			limit = { ITA = { controls_state = 337 } }
			ITA = { transfer_state = 337 }
			else = { CRO = { transfer_state = 337 } }
		}
		if = {
			limit = { ITA = { controls_state = 967 } }
			ITA = { transfer_state = 967 }
			else = { CRO = { transfer_state = 967 } }
		}
		if = {
			limit = { ITA = { controls_state = 102 owns_state = 967 } }
			ITA = { transfer_state = 102 }
			else = { CRO = { transfer_state = 102 } }
		}
		if = {
			limit = { ITA = { controls_state = 837 owns_state = 967 } }
			ITA = { transfer_state = 837 }
			else = { CRO = { transfer_state = 837 } }
		}
		if = {
			limit = { ITA = { controls_state = 835 owns_state = 837 } }
			ITA = { transfer_state = 835 }
		}
		else_if = {
			limit = { CRO = { NOT = { owns_state = 837 } } SER = { owns_state = 109 } }
			SER = { transfer_state = 835 }
		}
		else = {
			CRO = { transfer_state = 835 }
		}
		if = {
			limit = { ITA = { controls_state = 965 owns_state = 736 } }
			ITA = { transfer_state = 965 }
		}
		if = {
			limit = { ITA = { controls_state = 966 owns_state = 965 } }
			ITA = { transfer_state = 966 }
		}
		if = {
			limit = { ITA = { controls_state = 834 OR = { owns_state = 103 owns_state = 966 } } }
			ITA = { transfer_state = 834 }
		}
		else_if = {
			limit = { SER = { controls_state = 834 OR = { owns_state = 103 owns_state = 104 } } }
			SER = { transfer_state = 834 }
		}
		else = {
			CRO = { transfer_state = 834 }
		}
		if = {
			limit = { SER = { controls_state = 966 owns_state = 834 } }
			SER = { transfer_state = 966 }
		}
		if = {
			limit = { ITA = { OR = { controls_state = 736 owns_state = 102 owns_state = 834 } } }
			ITA = { transfer_state = 736 }
		}
		else_if = {
			limit = { SER = { owns_state = 102 owns_state = 834 } }
			SER = { transfer_state = 736 }
		}
		else = {
			CRO = { transfer_state = 736 }
		}
		if = {
			limit = { ITA = { controls_state = 965 owns_state = 736 } }
			ITA = { transfer_state = 965 }
		}
		else_if = {
			limit = { SER = { owns_state = 966 } }
			SER = { transfer_state = 965 }
		}
		else = {
			CRO = { transfer_state = 965 }
		}
		if = {
			limit = { ITA = { controls_state = 966 owns_state = 965 } }
			ITA = { transfer_state = 966 }
			else = {
				CRO = { transfer_state = 966 }
			}
		}
		if = {
			limit = { ITA = { OR = { owns_state = 967 owns_state = 837 } } }
			ITA = { transfer_state = 836 }
			else = { CRO = { transfer_state = 836 } }
		}
		
		if = {
			limit = { NOT = { has_global_flag = WWI_GER_HAS_CAPITULATED } }
			if = {
				limit = { controls_state = 838 }
				GER = { transfer_state = 838 }
				else = {
					every_country = {
						limit = { controls_state = 838 }
						transfer_state = 838
						GER = { set_state_owner = 838 }
					}
				}
			}
			if = {
				limit = { controls_state = 153 }
				GER = { transfer_state = 153 }
				else = {
					every_country = {
						limit = { controls_state = 153 }
						transfer_state = 153
						GER = { set_state_owner = 153 }
					}
				}
			}
			if = {
				limit = { controls_state = 98 }
				GER = { set_state_controller = 98 }
			}
			if = {
				limit = { controls_state = 97 }
				GER = { set_state_controller = 97 }
			}
			if = {
				limit = { controls_state = 822 }
				GER = { set_state_controller = 822 }
			}
			if = {
				limit = { controls_state = 87 }
				GER = { set_state_controller = 87 }
			}
			if = {
				limit = { controls_state = 10 }
				GER = { set_state_controller = 10 }
			}
			if = {
				limit = { controls_state = 90 }
				GER = { set_state_controller = 90 }
			}
			if = {
				limit = { controls_state = 92 }
				GER = { set_state_controller = 92 }
			}
			if = {
				limit = { controls_state = 904 }
				GER = { set_state_controller = 904 }
			}
			if = {
				limit = { controls_state = 93 }
				GER = { set_state_controller = 93 }
			}
			if = {
				limit = { controls_state = 204 }
				GER = { set_state_controller = 204 }
			}
			if = {
				limit = { controls_state = 194 }
				GER = { set_state_controller = 194 }
			}
		}
		
		if = {
			limit = { controls_state = 10 }
			POL = { transfer_state = 10 transfer_state = 87 transfer_state = 98 transfer_state = 90 }
		}
		if = {
			limit = { controls_state = 92 }
			POL = { transfer_state = 92 }
		}
		if = {
			limit = { controls_state = 904 }
			POL = { transfer_state = 904 }
		}
		if = {
			limit = { controls_state = 822 }
			POL = { transfer_state = 822 }
		}
		if = {
			limit = { controls_state = 97 }
			POL = { transfer_state = 97 }
		}
		
		if = {
			limit = { RUS = { controls_state = 88 } }
			RUS = { transfer_state = 88 }
			else = {
				POL = { transfer_state = 88 }
			}
		}
		if = {
			limit = { RUS = { controls_state = 91 } }
			RUS = {
				transfer_state = 89
				transfer_state = 91
				transfer_state = 925
			}
		}
		else_if ={
			limit = { UKR = { controls_state = 91 } }
			UKR = {
				transfer_state = 89
				transfer_state = 91
				transfer_state = 925
			}
		}
		else = {
			GAL = {
				transfer_state = 89
				transfer_state = 91
				transfer_state = 925
			}
		}
		if = {
			limit = { ROM = { controls_state = 73 } }
			ROM = { transfer_state = 73 }
		}
		else_if = {
			limit = { OR = { UKR = { controls_state = 73 } AND = { UKR = { exists = yes is_subject_of = RUS } RUS = { controls_state = 73 } } } }
			UKR = { transfer_state = 73 }
		}
		else_if = {
			limit = { RUS = { controls_state = 73 } }
			RUS = { transfer_state = 73 }
		}
		else_if = {
			limit = { GAL = { exists = yes } }
			GAL = { transfer_state = 73 }
		}
		if = {
			limit = {
				OR = {
					ROM = { controls_state = 80 }
					GAL = { exists = no }
				}
			}
			ROM = { transfer_state = 80 }
			else = { GAL = { transfer_state = 80 } }
		}
	
		every_country = {
			limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } is_faction_leader = yes }
			ROOT = { white_peace = PREV }
		}
		every_country = {
			limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } }
			ROOT = { give_military_access = PREV }
		}
		every_country = {
			limit = { is_subject_of = ROOT }
			ROOT = { end_puppet = PREV }
		}
		hidden_effect = {
			REB = {
				annex_country = {
					target = ROOT
					transfer_troops = no
				}
			}
			annex_country = {
				target = REB
				transfer_troops = no
			}
		}
		hidden_effect = { news_event = { id = news_n.103 hours = 3 } }
	}
	option = {
		trigger = {
			is_ai = no
		}
		name = versailles.3.b
	}
}
# Германия
country_event = {
	id = versailles.4
	title = versailles.4.t
	desc = versailles.4.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	immediate = {
		every_country = {
			limit = { OR = { is_subject = no tag = AST tag = SAF tag = CAN tag = NZL } NOT = { has_country_flag = WWI_Entente_member } has_war_with = GER OR = { is_in_faction_with = ENG is_in_faction_with = FRA } NOT = { is_in_faction_with = GER } NOT = { tag = BUL tag = TUR tag = GER tag = AUH } }
			set_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Entente_member OR = { NOT = { is_in_faction_with = ENG is_in_faction_with = FRA } is_in_faction_with = GER is_in_faction_with = AUH } AND ={ is_subject = yes NOT = { tag = AST tag = SAF tag = CAN tag = NZL } } }
			clr_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { NOT = { has_country_flag = WWI_Central_Powers_member } has_war_with = ENG OR = { is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = BUL is_in_faction_with = TUR } NOT = { tag = ENG tag = FRA tag = ITA tag = RUS } }
			set_country_flag = WWI_Central_Powers_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Central_Powers_member OR = { is_in_faction_with = ENG has_war_with = GER has_war_with = AUH NOT = { has_war_with = ENG } } }
			clr_country_flag = WWI_Central_Powers_member
		}
	}
	trigger = {
		tag = GER
		has_global_flag = WWI_is_now
		OR = {
			has_war_with = ENG
			has_war_with = FRA
		}
		OR = {
			AND = {
				has_global_flag = WWI_AUH_HAS_CAPITULATED
				has_country_flag = GER_monarchy_fall
				surrender_progress > 0.02
			}
			AND = {
				has_global_flag = WWI_AUH_HAS_CAPITULATED
				NOT = { has_country_flag = GER_monarchy_fall }
				surrender_progress > 0.25
			}
			AND = {
				NOT = { has_global_flag = WWI_AUH_HAS_CAPITULATED }
				has_country_flag = GER_monarchy_fall
				surrender_progress > 0.1
			}
			surrender_progress > 0.4
		}
	}

	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = versailles.4.a
		if = {
			limit = {
				any_country = {
					is_socialist_country = yes
					OR = { controls_state = 64 controls_state = 65 controls_state = 832 }
				}
			}
			set_country_flag = communist_occ
		}

		set_global_flag = WWI_GER_HAS_CAPITULATED
		leave_faction = yes
		add_ideas = alliance_neutrality
		if ={
			limit = { FRA = { is_subject_of = GER } }
			GER = { end_puppet = FRA }
			FRA = { leave_faction = yes transfer_state = 17 transfer_state = 18 transfer_state = 29 }
			ENG = { add_to_faction = FRA }
		}
		if = {
			limit = { RUS = { has_country_flag = RUS_Oktober_revolution_fired } }
			every_state = {
				limit = { is_owned_by = GER is_controlled_by = RUS }
				RUS = { transfer_state = PREV }
			}
		}
		if = {
			limit = { POL = { exists = yes } }
			if = {
				limit = { POL = { OR = { owns_state = 88 owns_state = 92 } } NOT = { RUS = { controls_state = 90 } UKR = { controls_state = 90 } } }
				POL = { transfer_state = 90 }
			}
			if = {
				limit = { POL = { OR = { owns_state = 90 owns_state = 10 } } NOT = { RUS = { controls_state = 87 } UKR = { controls_state = 87 } } }
				POL = { transfer_state = 87 }
			}
			if = {
				limit = { POL = { OR = { owns_state = 90 owns_state = 88 } } NOT = { RUS = { controls_state = 762 } UKR = { controls_state = 762 } } }
				POL = { transfer_state = 762 }
			}
			if = {
				limit = { POL = { OR = { owns_state = 90 owns_state = 87 } } NOT = { RUS = { controls_state = 10 } UKR = { controls_state = 10 } } }
				POL = { transfer_state = 10 }
			}
			if = {
				limit = { POL = { OR = { owns_state = 10 owns_state = 87 } } NOT = { RUS = { controls_state = 98 } UKR = { controls_state = 98 } } }
				POL = { transfer_state = 98 }
			}
			if = {
				limit = { POL = { OR = { owns_state = 88 owns_state = 90 } } NOT = { RUS = { controls_state = 92 } UKR = { controls_state = 92 } } }
				POL = { transfer_state = 92 }
			}
			if = {
				limit = { POL = { OR = { owns_state = 10 owns_state = 98 } } NOT = { RUS = { controls_state = 822 } UKR = { controls_state = 822 } } }
				POL = { transfer_state = 822 }
			}
			if = {
				limit = { POL = { owns_state = 822 } NOT = { RUS = { controls_state = 97 } UKR = { controls_state = 97 } } }
				POL = { transfer_state = 97 }
			}
		}
		else_if = {
			limit = { NOT = { RUS = { controls_state = 10 } UKR = { controls_state = 10 } } }
			POL = { transfer_state = 10 }
			if = {
				limit = { POL = {owns_state = 10 } NOT = { RUS = { controls_state = 87 } UKR = { controls_state = 87 } } }
				POL = { transfer_state = 87 }
			}
			if = {
				limit = { POL = { owns_state = 87 } NOT = { RUS = { controls_state = 90 } UKR = { controls_state = 90 } } }
				POL = { transfer_state = 90 }
			}
			if = {
				limit = { POL = { owns_state = 90 } NOT = { RUS = { controls_state = 92 } UKR = { controls_state = 92 } } }
				POL = { transfer_state = 92 }
			}
			if = {
				limit = { POL = { owns_state = 87 } NOT = { RUS = { controls_state = 98 } UKR = { controls_state = 98 } } }
				POL = { transfer_state = 98 }
			}
		}
		BEL = { transfer_state = 786 }
		DEN = { transfer_state = 771 }
		
		if = {
			limit = {
				RUS = {
					NOT = {
						has_country_flag = RUS_brest_peace_fired
						has_global_flag = WWI_RUS_HAS_CAPITULATED
					}
				}
			}
			if = {
				limit = { RUS = { OR = { controls_state = 5 controls_state = 826 } } }
				RUS = { transfer_state = 5 transfer_state = 826 transfer_state = 827 }
			}
			if = {
				limit = { RUS = { controls_state = 188 OR = { owns_state = 5 owns_state = 189 } } }
				RUS = { transfer_state = 188 }
			}
			if = {
				limit = { RUS = { controls_state = 85 owns_state = 826 owns_state = 189 } }
				RUS = { transfer_state = 85 }
			}
			if = {
				limit = { RUS = { controls_state = 828 owns_state = 85 owns_state = 826 } }
				RUS = { transfer_state = 828 }
			}
			if = {
				limit = { RUS = { controls_state = 762 owns_state = 90 } }
				RUS = { transfer_state = 762 }
			}
			if = {
				limit = { RUS = { controls_state = 67 owns_state = 762 } }
				RUS = { transfer_state = 67 }
			}
			if = {
				limit = { RUS = { controls_state = 66 owns_state = 67 } }
				RUS = { transfer_state = 66 }
			}
			if = {
				limit = { RUS = { controls_state = 86 owns_state = 67 owns_state = 87 } }
				RUS = { transfer_state = 86 }
			}
			if = {
				limit = { RUS = { controls_state = 63 owns_state = 828 owns_state = 86 } }
				RUS = { transfer_state = 63 }
			}
			if = {
				limit = { RUS = { controls_state = 68 owns_state = 63 owns_state = 86 } }
				RUS = { transfer_state = 68 }
			}
			if = {
				limit = { RUS = { controls_state = 62 owns_state = 63 owns_state = 68 } }
				RUS = { transfer_state = 62 }
			}
		}
		GER = {
			if = {
				limit = { owns_state = 28 }
				every_country = {
					limit = { owns_state = 16 }
					transfer_state = 28
				}
			}
			if = {
				limit = { owns_state = 42 }
				every_country = {
					limit = { owns_state = 16 }
					transfer_state = 42
				}
			}
			if = {
				limit = { owns_state = 51 }
				every_country = {
					limit = { owns_state = 16 }
					transfer_state = 51
				}
			}
			if = {
				limit = { owns_state = 850 }
				every_country = {
					limit = { owns_state = 16 }
					transfer_state = 850
				}
			}
			if = {
				limit = { owns_state = 919 }
				every_country = {
					limit = { owns_state = 197 }
					transfer_state = 919
				}
			}
			if = {
				limit = { owns_state = 137 }
				every_country = {
					limit = { owns_state = 196 }
					transfer_state = 137
				}
			}
			if = {
				limit = { owns_state = 209 }
				every_country = {
					limit = { owns_state = 208 }
					transfer_state = 209
				}
			}
			if = {
				limit = { owns_state = 210 }
				every_country = {
					limit = { owns_state = 209 }
					transfer_state = 210
				}
			}
			if = {
				limit = { owns_state = 865 }
				every_country = {
					limit = { owns_state = 12 }
					transfer_state = 865
				}
			}
			if = {
				limit = { owns_state = 207 }
				every_country = {
					limit = { owns_state = 926 }
					transfer_state = 207
				}
			}
			if = {
				limit = { owns_state = 940 }
				every_country = {
					limit = { owns_state = 912 }
					transfer_state = 940
				}
			}
		}
		if = {
			limit = { owns_state = 11 }
			release = LIT
		}
		if = {
			limit = { owns_state = 12 }
			release = LAT
		}
		if = {
			limit = { owns_state = 13 }
			release = EST
		}
		end_puppet = LIT
		end_puppet = UKR
		end_puppet = LUX
		end_puppet = BLR
		end_puppet = LAT
		end_puppet = KUR
		end_puppet = UBS
		end_puppet = EST
		
		if = {
			limit = { POL = { exists = yes } LIT = { exists = yes } OR = { AND = { LIT = { owns_state = 846 owns_state = 847 } } AND = { POL = { owns_state = 846 owns_state = 847 } } } }
			LIT = { transfer_state = 847 }
			POL = { transfer_state = 846 }
		}
		if = {
			limit = {
				OR = {
					has_global_flag = brest_litovsk_negotiations
					has_global_flag = brest_litovsk_negotiations_GER_UKR_peace
					has_global_flag = brest_litovsk_GER_UKR_negotiations
					has_global_flag = russia_rejects_german_ultimatum
				}
			}
			clr_global_flag = brest_litovsk_negotiations
			clr_global_flag = brest_litovsk_negotiations_GER_UKR_peace
			clr_global_flag = brest_litovsk_GER_UKR_negotiations
			clr_global_flag = russia_rejects_german_ultimatum
			if = {
				limit = { OR = { RUS = { NOT = { controls_state = 10 } } POL = { exists = yes } } }
				POL = { transfer_state = 10 }
				POL = { transfer_state = 90 }
			}
			if = {
				limit = { POL = { exists = yes } }
				if = {
					limit = { POL = { OR = { owns_state = 90 owns_state = 10 } } NOT = { RUS = { controls_state = 87 } UKR = { controls_state = 87 } } }
					POL = { transfer_state = 87 }
				}
				if = {
					limit = { POL = { OR = { owns_state = 90 owns_state = 87 } } NOT = { RUS = { controls_state = 10 } UKR = { controls_state = 10 } } }
					POL = { transfer_state = 10 }
				}
				if = {
					limit = { POL = { OR = { owns_state = 10 owns_state = 87 } } NOT = { RUS = { controls_state = 98 } UKR = { controls_state = 98 } } }
					POL = { transfer_state = 98 }
				}
				if = {
					limit = { POL = { OR = { owns_state = 88 owns_state = 90 } } NOT = { RUS = { controls_state = 92 } UKR = { controls_state = 92 } } }
					POL = { transfer_state = 92 }
				}
				if = {
					limit = { POL = { OR = { owns_state = 10 owns_state = 98 } } NOT = { RUS = { controls_state = 822 } UKR = { controls_state = 822 } } }
					POL = { transfer_state = 822 }
				}
				if = {
					limit = { POL = { owns_state = 822 } NOT = { RUS = { controls_state = 97 } UKR = { controls_state = 97 } } }
					POL = { transfer_state = 97 }
				}
				if = {
					limit = { POL = { owns_state = 822 } NOT = { RUS = { controls_state = 846 } UKR = { controls_state = 846 } } }
					POL = { transfer_state = 846 }
				}
				if = {
					limit = { POL = { owns_state = 92 } NOT = { RUS = { controls_state = 904 } UKR = { controls_state = 904 } } }
					POL = { transfer_state = 904 }
				}
			}
			if = {
				limit = { RUS = { NOT = { controls_state = 11 } } }
				RUS = { release = LIT }
				RUS = { country_event = rcw.109 }
			}
			if = {
				limit = { RUS = { NOT = { controls_state = 867 } } }
				RUS = { release = KUR }
			}
			if = {
				limit = { RUS = { NOT = { controls_state = 206 } } }
				BLR = { transfer_state = 206 }
				if = {
					limit = { RUS = { owns_state = 848 } }
					BLR = { transfer_state = 848 }
				}
				if = {
					limit = { RUS = { owns_state = 924 } }
					BLR = { transfer_state = 924 }
				}
				if = {
					limit = { RUS = { owns_state = 927 } }
					BLR = { transfer_state = 927 }
				}
				if = {
					limit = { RUS = { owns_state = 956 } }
					BLR = { transfer_state = 956 }
				}
				if = {
					limit = { RUS = { owns_state = 95 } }
					BLR = { transfer_state = 95 }
				}
				if = {
					limit = { RUS = { owns_state = 955 } }
					BLR = { transfer_state = 955 }
				}
				if = {
					limit = { RUS = { owns_state = 204 } }
					BLR = { transfer_state = 204 }
				}
				if = {
					limit = { RUS = { owns_state = 194 } }
					BLR = { transfer_state = 194 }
				}
				if = {
					limit = { RUS = { owns_state = 94 } }
					BLR = { transfer_state = 94 }
				}
				if = {
					limit = { RUS = { owns_state = 241 NOT = { controls_state = 241 } } }
					BLR = { transfer_state = 241 }
					BLR = { transfer_state = 922 }
				}
				if = {
					limit = { RUS = { owns_state = 926 NOT = { controls_state = 926 } } }
					BLR = { transfer_state = 926 }
				}
				if = {
					limit = { BLR = { owns_state = 926 } RUS = { owns_state = 207 NOT = { controls_state = 207 } } }
					BLR = { transfer_state = 207 }
				}
				if = {
					limit = { RUS = { owns_state = 912 NOT = { controls_state = 912 } } }
					BLR = { transfer_state = 912 }
				}
				if = {
					limit = { BLR = { owns_state = 912 } RUS = { owns_state = 940 NOT = { controls_state = 940 } } }
					BLR = { transfer_state = 940 }
				}
			}
			RUS = {
				add_popularity = {
					ideology = radical_socialism
					popularity = 0.15
				}
				add_war_support = 0.3
				add_stability = 0.2
				add_to_variable = {
					var = global.red_alert
					value = 10
				}
				if = {
					limit = { has_war_with = GER }
					RUS = { country_event = treaty_of_brest.3 }
					add_to_variable = {
						var = global.red_alert
						value = -5
					}
				}
				set_country_flag = Trotskys_strategy_is_successful
			}
		}
		every_country = {
			limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } is_faction_leader = yes }
			ROOT = { white_peace = PREV }
		}
		every_country = {
			limit = { is_subject_of = ROOT }
			ROOT = { end_puppet = PREV }
		}
		hidden_effect = {
			REB = {
				annex_country = {
					target = ROOT
					transfer_troops = no
				}
			}
			annex_country = {
				target = REB
				transfer_troops = no
			}
		}
		hidden_effect = {
			if = {
				limit { NOT = { has_country_flag = GER_monarchy_fall } }
				GER = { country_event = germany.110 }
			}
		}
		hidden_effect = { news_event = { id = news_n.104 hours = 3 } }
	}
	option = {
		trigger = {
			is_ai = no
		}
		name = versailles.4.b
	}
}

# Капитуляция остальных, кто вступил в альянс Центральных Держав
country_event = {
	id = versailles.9
	title = versailles.9.t
	desc = versailles.9.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	fire_only_once = yes
	
	trigger = {
		has_global_flag = WWI_is_now
		has_global_flag = WWI_GER_HAS_CAPITULATED
		has_global_flag = WWI_AUH_HAS_CAPITULATED
		has_global_flag = WWI_BUL_HAS_CAPITULATED
		has_global_flag = WWI_TUR_HAS_CAPITULATED
	}
	
	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = versailles.9.a
		leave_faction = yes
		every_country = {
			limit = { has_country_flag = WWI_Central_Powers_member }
			clr_country_flag = WWI_Central_Powers_member
			every_country = {
				limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } is_faction_leader = yes }
				white_peace = PREV
			}
			leave_faction = yes
		}
		clr_global_flag = WWI_GER_HAS_CAPITULATED
		clr_global_flag = WWI_AUH_HAS_CAPITULATED
		clr_global_flag = WWI_BUL_HAS_CAPITULATED
		clr_global_flag = WWI_TUR_HAS_CAPITULATED
	}
}

# Конец Первой Мировой Войны
country_event = {
	id = versailles.10
	title = versailles.10.t
	desc = versailles.10.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	fire_only_once = yes
	
	trigger = {
		OR = {
			AND = {
				tag = ENG
				has_global_flag = WWI_FRA_HAS_CAPITULATED
			}
			AND = {
				tag = FRA
				NOT = { has_global_flag = WWI_FRA_HAS_CAPITULATED }
			}
		}
		has_global_flag = WWI_is_now
		has_global_flag = WWI_BUL_HAS_CAPITULATED
		has_global_flag = WWI_TUR_HAS_CAPITULATED
		has_global_flag = WWI_AUH_HAS_CAPITULATED
		has_global_flag = WWI_GER_HAS_CAPITULATED
	}

	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 10
	}
	
	option = {
		name = versailles.10.a
		clr_global_flag = WWI_is_now
		set_global_flag = WWI_end_Entente_victory
		ENG = {
			remove_ideas = guarantee_neutrality
		}
		FRA = {
			remove_ideas = guarantee_neutrality
		}
		USA = {
			remove_ideas = guarantee_neutrality
		}
	}
}

###### Капитуляция держав Антанты ######

# Италия
country_event = {
	id = versailles.11
	title = versailles.11.t
	desc = versailles.11.d
	picture = GFX_report_event_ita_peace_ww1
	
	fire_only_once = yes
	
	immediate = {
		every_country = {
			limit = { OR = { is_subject = no tag = AST tag = SAF tag = CAN tag = NZL } NOT = { has_country_flag = WWI_Entente_member } has_war_with = GER OR = { is_in_faction_with = ENG is_in_faction_with = FRA } NOT = { is_in_faction_with = GER } NOT = { tag = BUL tag = TUR tag = GER tag = AUH } }
			set_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Entente_member OR = { NOT = { is_in_faction_with = ENG is_in_faction_with = FRA } is_in_faction_with = GER is_in_faction_with = AUH } AND ={ is_subject = yes NOT = { tag = AST tag = SAF tag = CAN tag = NZL } } }
			clr_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { NOT = { has_country_flag = WWI_Central_Powers_member } has_war_with = ENG OR = { is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = BUL is_in_faction_with = TUR } NOT = { tag = ENG tag = FRA tag = ITA tag = RUS } }
			set_country_flag = WWI_Central_Powers_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Central_Powers_member OR = { is_in_faction_with = ENG has_war_with = GER has_war_with = AUH NOT = { has_war_with = ENG } } }
			clr_country_flag = WWI_Central_Powers_member
		}
	}
	
	trigger = {
		tag = ITA
		has_global_flag = WWI_is_now
		NOT = { has_global_flag = WWI_ITA_HAS_CAPITULATED }
		OR = {
			has_war_with = GER
			has_war_with = AUH
		}
		surrender_progress > 0.22
	}

	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = versailles.11.a
		if = {
			limit = { TUR = { exists = yes } owns_state = 342 }
			TUR = { transfer_state = 342 }
		}
		if = {
			limit = { ENG = { has_war_with = GER } owns_state = 772 }
			ENG = { transfer_state = 772 }
		}
		if = {
			limit = { ENG = { has_war_with = GER } owns_state = 273 }
			ENG = { transfer_state = 273 }
		}
		if = {
			limit = { ENG = { has_war_with = GER } owns_state = 663 }
			ENG = { transfer_state = 663 }
		}
		if = {
			limit = { ENG = { has_war_with = GER } owns_state = 451 }
			ENG = { transfer_state = 451 }
		}
		if = {
			limit = { ENG = { has_war_with = GER } owns_state = 450 }
			ENG = { transfer_state = 450 }
		}
		if = {
			limit = { ENG = { has_war_with = GER } owns_state = 662 }
			ENG = { transfer_state = 662 }
		}
		if = {
			limit = { ENG = { has_war_with = GER } owns_state = 449 }
			ENG = { transfer_state = 449 }
		}
		if = {
			limit = { ENG = { has_war_with = GER } owns_state = 661 }
			ENG = { transfer_state = 661 }
		}
		if = {
			limit = { ENG = { has_war_with = GER } owns_state = 448 }
			ENG = { transfer_state = 448 }
		}
		if = {
			limit = { AUH = { has_war_with = ITA } }
			AUH = { transfer_state = 158 transfer_state = 159 transfer_state = 160 transfer_state = 161 }
			diplomatic_relation = {
				country = AUH
				relation = military_access
				active = yes
			}
		}
		if = {
			limit = { GER = { has_war_with = ITA } }
			diplomatic_relation = {
				country = GER
				relation = military_access
				active = yes
			}
		}
		set_global_flag = WWI_ITA_HAS_CAPITULATED
		leave_faction = yes
		every_country = {
			limit = { OR = { is_in_faction_with = GER is_in_faction_with = AUH AND = { is_in_faction_with = TUR NOT = { is_in_faction_with = ENG } } AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } is_faction_leader = yes }
			ROOT = { white_peace = PREV }
		}
		hidden_effect = {
			REB = {
				annex_country = {
					target = ROOT
					transfer_troops = no
				}
			}
			annex_country = {
				target = REB
				transfer_troops = no
			}
		}
		hidden_effect = {
			add_popularity = {
				ideology = social_conservatism
				popularity = -0.3
			}
			add_popularity = {
				ideology = communism
				popularity = 0.15
			}
			add_popularity = {
				ideology = authoritarism
				popularity = 0.1
			}
			add_popularity = {
				ideology = despotism
				popularity = 0.12
			}
		}
		hidden_effect = { news_event = { id = news_n.111 hours = 3 } }
	}
	option = {
		trigger = {
			is_ai = no
		}
		name = versailles.11.b
	}
}

# Франция
country_event = {
	id = versailles.12
	title = versailles.12.t
	desc = versailles.12.d
	picture = GFX_report_event_ita_peace_ww1
	
	fire_only_once = yes
	
	immediate = {
		every_country = {
			limit = { OR = { is_subject = no tag = AST tag = SAF tag = CAN tag = NZL } NOT = { has_country_flag = WWI_Entente_member } has_war_with = GER OR = { is_in_faction_with = ENG is_in_faction_with = FRA } NOT = { is_in_faction_with = GER } NOT = { tag = BUL tag = TUR tag = GER tag = AUH } }
			set_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Entente_member OR = { NOT = { is_in_faction_with = ENG is_in_faction_with = FRA } is_in_faction_with = GER is_in_faction_with = AUH } AND ={ is_subject = yes NOT = { tag = AST tag = SAF tag = CAN tag = NZL } } }
			clr_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { NOT = { has_country_flag = WWI_Central_Powers_member } has_war_with = ENG OR = { is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = BUL is_in_faction_with = TUR } NOT = { tag = ENG tag = FRA tag = ITA tag = RUS } }
			set_country_flag = WWI_Central_Powers_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Central_Powers_member OR = { is_in_faction_with = ENG has_war_with = GER has_war_with = AUH NOT = { has_war_with = ENG } } }
			clr_country_flag = WWI_Central_Powers_member
		}
	}
	
	trigger = {
		tag = FRA
		has_global_flag = WWI_is_now
		NOT = { has_global_flag = WWI_FRA_HAS_CAPITULATED }
		has_war_with = GER
		OR = {
			surrender_progress > 0.3
			NOT = { controls_state = 16 }
		}
	}

	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = versailles.12.a
		if = {
			limit = { TUR = { exists = yes } owns_state = 345 }
			TUR = { transfer_state = 345 }
		}
		if = {
			limit = { TUR = { exists = yes } owns_state = 344 }
			TUR = { transfer_state = 344 }
		}
		if = {
			limit = { ENG = { exists = yes } owns_state = 680 }
			ENG = { transfer_state = 680 }
		}
		if = {
			limit = { ENG = { exists = yes } owns_state = 677 }
			ENG = { transfer_state = 677 }
		}
		if = {
			limit = { ENG = { exists = yes } owns_state = 554 }
			ENG = { transfer_state = 554 }
		}
		if = {
			limit = { ENG = { exists = yes } owns_state = 553 }
			ENG = { transfer_state = 553 }
		}
		GER = {
			transfer_state = 17
			transfer_state = 18
			transfer_state = 29
		}
		set_global_flag = WWI_FRA_HAS_CAPITULATED
		leave_faction = yes
		every_country = {
			limit = { OR = { is_in_faction_with = GER is_in_faction_with = AUH AND = { is_in_faction_with = TUR NOT = { is_in_faction_with = ENG } } AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } is_faction_leader = yes }
			ROOT = { white_peace = PREV }
		}
		hidden_effect = {
			REB = {
				annex_country = {
					target = ROOT
					transfer_troops = no
				}
			}
			annex_country = {
				target = REB
				transfer_troops = no
			}
		}
		GER = {
			puppet = FRA
		}
		hidden_effect = {
			add_popularity = {
				ideology = market_liberalism
				popularity = 0.12
			}
			add_popularity = {
				ideology = social_conservatism
				popularity = 0.09
			}
			add_popularity = {
				ideology = communism
				popularity = 0.15
			}
			add_popularity = {
				ideology = despotism
				popularity = 0.15
			}
		}
		hidden_effect = { news_event = { id = news_n.112 hours = 3 } }
	}
	option = {
		trigger = {
			is_ai = no
		}
		name = versailles.12.b
	}
}

# Великобритания
country_event = {
	id = versailles.13
	title = versailles.13.t
	desc = versailles.13.d
	picture = GFX_report_event_ita_peace_ww1
	
	fire_only_once = yes
	
	immediate = {
		every_country = {
			limit = { OR = { is_subject = no tag = AST tag = SAF tag = CAN tag = NZL } NOT = { has_country_flag = WWI_Entente_member } has_war_with = GER OR = { is_in_faction_with = ENG is_in_faction_with = FRA } NOT = { is_in_faction_with = GER } NOT = { tag = BUL tag = TUR tag = GER tag = AUH } }
			set_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Entente_member OR = { NOT = { is_in_faction_with = ENG is_in_faction_with = FRA } is_in_faction_with = GER is_in_faction_with = AUH } AND ={ is_subject = yes NOT = { tag = AST tag = SAF tag = CAN tag = NZL } } }
			clr_country_flag = WWI_Entente_member
		}
		every_country = {
			limit = { NOT = { has_country_flag = WWI_Central_Powers_member } has_war_with = ENG OR = { is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = BUL is_in_faction_with = TUR } NOT = { tag = ENG tag = FRA tag = ITA tag = RUS } }
			set_country_flag = WWI_Central_Powers_member
		}
		every_country = {
			limit = { has_country_flag = WWI_Central_Powers_member OR = { is_in_faction_with = ENG has_war_with = GER has_war_with = AUH NOT = { has_war_with = ENG } } }
			clr_country_flag = WWI_Central_Powers_member
		}
	}
	
	trigger = {
		tag = ENG
		has_global_flag = WWI_is_now
		NOT = { has_global_flag = WWI_ENG_HAS_CAPITULATED }
		has_war_with = GER
		surrender_progress > 0.5
	}

	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = versailles.13.a
		every_country = {
			limit = { is_subject_of = ENG }
			set_country_flag = former_ENG_puppet
		}
		end_puppet = EGY
		end_puppet = RAJ
		set_global_flag = WWI_ENG_HAS_CAPITULATED
		release = IRE
		leave_faction = yes
		every_country = {
			limit = { OR = { is_in_faction_with = GER is_in_faction_with = AUH AND = { is_in_faction_with = TUR NOT = { is_in_faction_with = ENG } } AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } is_faction_leader = yes }
			ROOT = { white_peace = PREV }
		}
		hidden_effect = {
			REB = {
				annex_country = {
					target = ROOT
					transfer_troops = no
				}
			}
			annex_country = {
				target = REB
				transfer_troops = no
			}
		}
		hidden_effect = {
			add_popularity = {
				ideology = communism
				popularity = 0.1
			}
			add_popularity = {
				ideology = despotism
				popularity = 0.1
			}
		}
		hidden_effect = { news_event = { id = news_n.113 hours = 3 } }
		EGY = {
			transfer_state = 917
		}
	}
	option = {
		trigger = {
			is_ai = no
		}
		name = versailles.13.b
	}
}

# Капитуляция остальных, кто вступил в Антанту
country_event = {
	id = versailles.19
	title = versailles.19.t
	desc = versailles.19.d
	picture = GFX_report_event_ita_peace_ww1
	
	fire_only_once = yes
	
	trigger = {
		tag = GER
		has_global_flag = WWI_is_now
		has_global_flag = WWI_ITA_HAS_CAPITULATED
		has_global_flag = WWI_FRA_HAS_CAPITULATED
		has_global_flag = WWI_ENG_HAS_CAPITULATED
		GER = { NOT = { has_war_with = RUS } }
	}
	
	mean_time_to_happen = {
		days = 0
	}
	
	fire_only_once = yes
	
	option = {
		name = versailles.19.a
		if = {
			limit = { EGY = { surrender_progress > 0.24 } }
			set_global_flag = WWI_EGY_HAS_CAPITULATED
		}
		if = {
			limit = { RAJ = { surrender_progress > 0.1 } }
			set_global_flag = WWI_RAJ_HAS_CAPITULATED
		}
		every_country = {
			limit = { has_country_flag = former_ENG_puppet }
			every_country = {
				limit = { OR = { is_in_faction_with = GER is_in_faction_with = AUH AND = { is_in_faction_with = TUR NOT = { is_in_faction_with = ENG } } AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } is_faction_leader = yes }
				white_peace = PREV
			}
			leave_faction = yes
		}
		every_country = {
			limit = { has_country_flag = WWI_Entente_member OR = { has_war_with = GER has_war_with = AUH has_war_with = BUL has_war_with = TUR } }
			clr_country_flag = WWI_Entente_member
			every_country = {
				limit = { OR = { is_in_faction_with = GER is_in_faction_with = AUH AND = { is_in_faction_with = TUR NOT = { is_in_faction_with = ENG } } AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } is_faction_leader = yes }
				white_peace = PREV
			}
			leave_faction = yes
		}
		if = {
			limit = { AUH = { exists = yes } }
			AUH = {
				transfer_state = 107
			}
		}
		clr_global_flag = WWI_TUR_HAS_CAPITULATED
		clr_global_flag = WWI_AUH_HAS_CAPITULATED
		clr_global_flag = WWI_BUL_HAS_CAPITULATED
		if = {
			limit = { BUL = { exists = yes } }
			BUL = {
				transfer_state = 77
				transfer_state = 106
				transfer_state = 184
				transfer_state = 775
				transfer_state = 777
				transfer_state = 856
			}
		}
	}
}

###### Парижская мирная конференция ######

# Начало конференции
country_event = {
	id = versailles.21
	title = versailles.21.t
	desc = versailles.21.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	trigger = {
		tag = FRA
		has_global_flag = versailles_peace_treaty
	}

	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = versailles.21.a
		set_variable = { global.vers_peace_conf_members = 0 }
		every_country = {
			limit = { has_country_flag = WWI_Entente_member }
			add_to_variable = { global.vers_peace_conf_members = 1 }
			set_variable = { vote_power = 1 }
		}
		if = {
			limit = {
				RUS = {
					NOT = { has_country_flag = WWI_Entente_member }
					NOT = { has_country_flag = RUS_brest_peace_fired }
				}
			}
			set_country_flag = WWI_Entente_member
			add_to_variable = { global.vers_peace_conf_members = 1 }
		}
		if = {
			limit = { RUS = { has_country_flag = WWI_Entente_member } }
			add_to_variable = { global.vers_peace_conf_members = 3 }
			RUS = { set_variable = { vote_power = 4 } }
		}
		if = {
			limit = { FRA = { has_country_flag = WWI_Entente_member } }
			add_to_variable = { global.vers_peace_conf_members = 2 }
			FRA = { set_variable = { vote_power = 3 } }
		}
		if = {
			limit = { ENG = { has_country_flag = WWI_Entente_member } }
			add_to_variable = { global.vers_peace_conf_members = 2 }
			ENG = { set_variable = { vote_power = 3 } }
		}
		if = {
			limit = { USA = { has_country_flag = WWI_Entente_member } }
			add_to_variable = { global.vers_peace_conf_members = 2 }
			USA = { set_variable = { vote_power = 3 } }
		}
		if = {
			limit = { SER = { has_country_flag = WWI_Entente_member } }
			add_to_variable = { global.vers_peace_conf_members = 1 }
			SER = { set_variable = { vote_power = 2 } }
		}
		if = {
			limit = { ITA = { has_country_flag = WWI_Entente_member } RUS = { NOT = { has_country_flag = WWI_Entente_member } } }
			add_to_variable = { global.vers_peace_conf_members = -1 }
			clear_variable = vote_power
			clr_country_flag = WWI_Entente_member
		}
		if = {
			limit = { FRA = { has_country_flag = WWI_Entente_member } RUS = { has_country_flag = WWI_Entente_member } }
			add_to_variable = { global.vers_peace_conf_members = 1 }
			FRA = { set_variable = { vote_power = 4 } }
		}
		set_variable = { global.FRA_Alsace_Lorraine = 0 }
		set_variable = { global.FRA_Saar_annex = 0 }
		set_variable = { global.FRA_Saar_referendum = 0 }
		set_variable = { global.FRA_Rheiland_annex = 0 }
		set_variable = { global.FRA_Rheiland_demilitarization = 0 }
		set_variable = { global.FRA_Rheiland_ind = 0 }
		
		set_variable = { global.BEL_Eupen_Malmedy = 0 }
		
		set_variable = { global.POL_Poznan = 0 }
		set_variable = { global.POL_Upper_Silesia_annex = 0 }
		set_variable = { global.POL_Upper_Silesia_referendum = 0 }
		set_variable = { global.POL_Gdansk_annex = 0 }
		set_variable = { global.POL_Gdansk_ind = 0 }
		set_variable = { global.POL_West_Prussia = 0 }
		
		set_variable = { global.RUS_East_Prussia_annex = 0 }
		set_variable = { global.RUS_East_Prussia_ind = 0 }
		set_variable = { global.RUS_Lusatia_annex = 0 }
		set_variable = { global.RUS_Lusatia_ind = 0 }
		
		set_variable = { global.DEN_Schleswig = 0 }
		
		set_variable = { global.LIT_Memelland = 0 }
		
		set_variable = { global.BAV_Bavaria = 0 }
		
		every_country = {
			limit = { has_country_flag = WWI_Entente_member }
			country_event = { id = versailles.22 days = 1 }
			country_event = { id = versailles.23 days = 10 }
			country_event = { id = versailles.24 days = 14 }
			
			country_event = { id = versailles.25 days = 20 }
			
			country_event = { id = versailles.26 days = 32 }
			country_event = { id = versailles.27 days = 34 }
			country_event = { id = versailles.28 days = 46 }
			country_event = { id = versailles.29 days = 48 }
			
			country_event = { id = versailles.30 days = 54 }
			country_event = { id = versailles.31 days = 56 }
			
			country_event = { id = versailles.32 days = 60 }
			
			country_event = { id = versailles.33 days = 74 }
			
			country_event = { id = versailles.34 days = 78 }
			
			hidden_effect = {
				country_event = { id = versailles.40 days = 174 }
				country_event = { id = versailles.41 days = 175 }
			}
		}
	}
}
# Эльзас-Лоррейн
country_event = {
	id = versailles.22
	title = versailles.22.t
	desc = versailles.22.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Франции
	option = {
		name = versailles.22.a
		add_to_variable = { global.FRA_Alsace_Lorraine = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Оставить Германии
	option = {
		trigger = {
			NOT = { tag = FRA }
		}
		name = versailles.22.b
	}
}
# Саар
country_event = {
	id = versailles.23
	title = versailles.23.t
	desc = versailles.23.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Франции
	option = {
		name = versailles.23.a
		add_to_variable = { global.FRA_Saar_annex = vote_power }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					tag = ENG
					tag = USA
				}
			}
		}
	}
	
	#Отдать Франции до референдума
	option = {
		name = versailles.23.b
		add_to_variable = { global.FRA_Saar_referendum = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.23.c
	}
}
# Рейнленд
country_event = {
	id = versailles.24
	title = versailles.24.t
	desc = versailles.24.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Франции
	option = {
		name = versailles.24.a
		add_to_variable = { global.FRA_Rheiland_annex = vote_power }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					tag = ENG
					tag = USA
				}
			}
		}
	}
	
	#Демилитаризовать
	option = {
		name = versailles.24.b
		add_to_variable = { global.FRA_Rheiland_demilitarization = vote_power }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				tag = FRA
			}
			modifier = {
				factor = 999
				OR = {
					tag = ENG
					tag = USA
				}
			}
		}
	}
	
	#Независимый Рейнленд
	option = {
		name = versailles.24.c
		add_to_variable = { global.FRA_Rheiland_ind = vote_power }
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 2
				tag = FRA
			}
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.24.e
	}
}
# Эйпен
country_event = {
	id = versailles.25
	title = versailles.25.t
	desc = versailles.25.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Бельгии
	option = {
		name = versailles.25.a
		add_to_variable = { global.BEL_Eupen_Malmedy = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.25.b
	}
}
# Познань
country_event = {
	id = versailles.26
	title = versailles.26.t
	desc = versailles.26.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Польше/России
	option = {
		name = versailles.26.a
		add_to_variable = { global.POL_Poznan = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.26.b
	}
}
# Верхняя Силезия
country_event = {
	id = versailles.27
	title = versailles.27.t
	desc = versailles.27.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Польше/России
	option = {
		name = versailles.27.a
		add_to_variable = { global.POL_Upper_Silesia_annex = vote_power }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				RUS = { NOT = { has_country_flag = WWI_Entente_member } }
			}
		}
	}
	
	#Референдум
	option = {
		name = versailles.27.b
		add_to_variable = { global.POL_Upper_Silesia_referendum = vote_power }
		ai_chance = {
			factor = 2
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.27.c
	}
}
# Данциг/Гданьск
country_event = {
	id = versailles.28
	title = versailles.28.t
	desc = versailles.28.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Польше/России
	option = {
		name = versailles.28.a
		add_to_variable = { global.POL_Gdansk_annex = vote_power }
	}
	
	#Вольный город
	option = {
		name = versailles.28.b
		add_to_variable = { global.POL_Gdansk_ind = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.28.c
	}
}
# Западная Прусия
country_event = {
	id = versailles.29
	title = versailles.29.t
	desc = versailles.29.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Польше/России
	option = {
		name = versailles.29.a
		add_to_variable = { global.POL_West_Prussia = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.29.b
	}
}
# Восточная Прусия
country_event = {
	id = versailles.30
	title = versailles.30.t
	desc = versailles.30.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Польше/России
	option = {
		name = versailles.30.a
		add_to_variable = { global.RUS_East_Prussia_annex = vote_power }
	}
	
	#Независимая Прусия
	option = {
		name = versailles.30.b
		add_to_variable = { global.RUS_East_Prussia_ind = vote_power }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				RUS = { NOT = { has_country_flag = WWI_Entente_member } }
				NOT = { tag = FRA }
			}
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.30.c
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				tag = FRA
			}
		}
	}
}
# Лужица
country_event = {
	id = versailles.31
	title = versailles.31.t
	desc = versailles.31.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Польше/России
	option = {
		name = versailles.31.a
		add_to_variable = { global.RUS_Lusatia_annex = vote_power }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				RUS = { NOT = { has_country_flag = WWI_Entente_member } }
			}
		}
	}
	
	#Независимая Лужица
	option = {
		name = versailles.31.b
		add_to_variable = { global.RUS_Lusatia_ind = vote_power }
	}
	
	#Оставить Германии
	option = {
		name = versailles.31.c
		ai_chance = {
			factor = 1
		}
	}
}
# Шлезевиг
country_event = {
	id = versailles.32
	title = versailles.32.t
	desc = versailles.32.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Дании север Шлезевига
	option = {
		name = versailles.32.a
		add_to_variable = { global.DEN_Schleswig = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Отдать Дании весь Шлезевиг
	option = {
		name = versailles.32.b
		add_to_variable = { global.DEN_Schleswig_all = vote_power }
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 999
				tag = DEN
			}
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.32.c
	}
}
# Мемель
country_event = {
	id = versailles.33
	title = versailles.33.t
	desc = versailles.33.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Отдать Литве/России
	option = {
		name = versailles.33.a
		add_to_variable = { global.LIT_Memelland = vote_power }
		ai_chance = {
			factor = 1
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.33.b
	}
}
# Бавария
country_event = {
	id = versailles.34
	title = versailles.34.t
	desc = versailles.34.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	#Независимая Бавария
	option = {
		name = versailles.34.a
		add_to_variable = { global.BAV_Bavaria = vote_power }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 5
				tag = FRA
			}
		}
	}
	
	#Оставить Германии
	option = {
		name = versailles.34.b
		ai_chance = {
			factor = 2
		}
	}
}

country_event = {
	id = versailles.40
	title = versailles.40.t
	desc = versailles.40.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	hidden = yes
	
	is_triggered_only = yes
	
	option = {
		name = versailles.40.a
		divide_variable = {
			var = global.FRA_Alsace_Lorraine
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.FRA_Saar_annex
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.FRA_Saar_referendum
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.FRA_Rheiland_annex
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.FRA_Rheiland_demilitarization
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.FRA_Rheiland_ind
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.BEL_Eupen_Malmedy
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.POL_Poznan
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.POL_Upper_Silesia_annex
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.POL_Upper_Silesia_referendum
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.POL_Gdansk_annex
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.POL_Gdansk_ind
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.POL_West_Prussia
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.RUS_East_Prussia_annex
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.RUS_East_Prussia_ind
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.RUS_Lusatia_annex
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.RUS_Lusatia_ind
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.DEN_Schleswig
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.DEN_Schleswig_all
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.LIT_Memelland
			value = global.vers_peace_conf_members
		}
		divide_variable = {
			var = global.BAV_Bavaria
			value = global.vers_peace_conf_members
		}
		
		set_variable = { global.FRA_Rheiland_GER = 1 }
		subtract_from_variable = { global.FRA_Rheiland_GER = global.FRA_Rheiland_annex }
		subtract_from_variable = { global.FRA_Rheiland_GER = global.FRA_Rheiland_demilitarization }
		subtract_from_variable = { global.FRA_Rheiland_GER = global.FRA_Rheiland_ind }
		
		set_variable = { global.FRA_Saar_GER = 1 }
		subtract_from_variable = { global.FRA_Saar_GER = global.FRA_Saar_annex }
		subtract_from_variable = { global.FRA_Saar_GER = global.FRA_Saar_referendum }
		
		set_variable = { global.POL_Upper_Silesia_GER = 1 }
		subtract_from_variable = { global.POL_Upper_Silesia_GER = global.POL_Upper_Silesia_annex }
		subtract_from_variable = { global.POL_Upper_Silesia_GER = global.POL_Upper_Silesia_referendum }
		
		set_variable = { global.POL_Gdansk_GER = 1 }
		subtract_from_variable = { global.POL_Gdansk_GER = global.POL_Gdansk_annex }
		subtract_from_variable = { global.POL_Gdansk_GER = global.POL_Gdansk_ind }
		
		set_variable = { global.RUS_East_Prussia_GER = 1 }
		subtract_from_variable = { global.RUS_East_Prussia_GER = global.RUS_East_Prussia_annex }
		subtract_from_variable = { global.RUS_East_Prussia_GER = global.RUS_East_Prussia_ind }
		
		set_variable = { global.RUS_Lusatia_GER = 1 }
		subtract_from_variable = { global.RUS_Lusatia_GER = global.RUS_Lusatia_annex }
		subtract_from_variable = { global.RUS_Lusatia_GER = global.RUS_Lusatia_ind }
		
		set_variable = { global.DEN_Schleswig_GER = 1 }
		subtract_from_variable = { global.RUS_Lusatia_GER = global.DEN_Schleswig }
		subtract_from_variable = { global.RUS_Lusatia_GER = global.DEN_Schleswig_all }
		
	}
}

country_event = {
	id = versailles.41
	title = versailles.41.t
	desc = versailles.41.d
	picture = GFX_report_event_germany_civil_war_soldiers
	
	is_triggered_only = yes
	
	option = {
		name = versailles.41.a
		
		if = {
			limit = { check_variable = { global.FRA_Rheiland_GER < 0.5 } }
			if {
				limit = { check_variable = { global.FRA_Rheiland_annex > global.FRA_Rheiland_ind } check_variable = { global.FRA_Rheiland_annex > global.FRA_Rheiland_demilitarization } }
				FRA = { transfer_state = 829 transfer_state = 42 transfer_state = 51 }
				else = {
					if = {
						limit = { check_variable = { global.FRA_Rheiland_demilitarization > global.FRA_Rheiland_ind } check_variable = { global.FRA_Rheiland_demilitarization > global.FRA_Rheiland_annex } }
						GER = { transfer_state = 829 transfer_state = 42 transfer_state = 50 transfer_state = 51 }
						829 = { set_demilitarized_zone = yes }
						42 = { set_demilitarized_zone = yes }
						50 = { set_demilitarized_zone = yes }
						51 = { set_demilitarized_zone = yes }
						else = {
							RHE ={
								transfer_state = 829
								transfer_state = 42
								transfer_state = 51
							}
						}
					}
				}
			}
			else = {
				GER = { transfer_state = 829 transfer_state = 42 transfer_state = 50 transfer_state = 51 }
			}
		}
		
		if = {
			limit = { check_variable = { global.FRA_Saar_GER < 0.5 } }
			if {
				limit = { check_variable = { global.FRA_Saar_annex > global.FRA_Saar_referendum } }
				FRA = { transfer_state = 850 }
				else = {
					FRA = { transfer_state = 850 set_country_flag = FRA_Saar_referendum }
				}
			}
			else = {
				if = {
					limit = { check_variable = { global.FRA_Rheiland_GER < 0.5 } }
					if {
						limit = { check_variable = { global.FRA_Rheiland_annex > global.FRA_Rheiland_ind } check_variable = { global.FRA_Rheiland_annex > global.FRA_Rheiland_demilitarization } }
						FRA = { transfer_state = 850 }
						else = {
							if = {
								limit = { check_variable = { global.FRA_Rheiland_demilitarization > global.FRA_Rheiland_ind } check_variable = { global.FRA_Rheiland_demilitarization > global.FRA_Rheiland_annex } }
								GER = { transfer_state = 850 }
								850 = { set_demilitarized_zone = yes }
								else = {
									RHE ={
										transfer_state = 850
									}
								}
							}
						}
						else = {
							GER = { transfer_state = 850 }
						}
					}
				}
			}
		}
		if = {
			limit = { check_variable = { global.POL_Upper_Silesia_GER < 0.5 } }
			if {
				limit = { check_variable = { global.POL_Upper_Silesia_annex > global.POL_Upper_Silesia_referendum } }
				if = {
					limit = { POL = { exists = yes } }
					POL = { transfer_state = 67 transfer_state = 762 }
					else = { RUS = { transfer_state = 67 transfer_state = 762 } }
				}
				else = {
					GER = { transfer_state = 67 transfer_state = 762 set_country_flag = Upper_Silesia_referendum }
				}
			}
			else = {
				GER = { transfer_state = 67 transfer_state = 762 }
			}
		}
		if = {
			limit = { check_variable = { global.POL_Gdansk_GER < 0.5 } }
			if {
				limit = { check_variable = { global.POL_Gdansk_annex > global.POL_Gdansk_ind } }
				if = {
					limit = { POL = { exists = yes } }
					POL = { transfer_state = 85 }
					else = { RUS = { transfer_state = 85 } }
				}
				else = {
					DNZ = { transfer_state = 85 }
				}
			}
			else = {
				if = { limit = { check_variable = { global.POL_West_Prussia < 0.5 } }
					if {
						limit = { check_variable = { global.RUS_East_Prussia_GER < 0.5 } }
						if = {
							limit = { check_variable = { global.RUS_East_Prussia_annex > global.RUS_East_Prussia_ind } }
							GER = { transfer_state = 85 }
							else = {
								PRS = { transfer_state = 85 }
							}
						}
						else = {
							GER = { transfer_state = 85 }
						}
					}
					else = {
						GER = { transfer_state = 85 }
					}
				}
			}
		}
		if = {
			limit = { check_variable = { global.RUS_East_Prussia_GER < 0.5 } }
			if {
				limit = { check_variable = { global.RUS_East_Prussia_annex > global.RUS_East_Prussia_ind } }
				if = {
					limit = { POL = { exists = yes } }
					POL = { transfer_state = 5 transfer_state = 826 transfer_state = 827 }
					else = { RUS = { transfer_state = 5 transfer_state = 826 transfer_state = 827 } }
				}
				else = {
					PRS = { transfer_state = 5 transfer_state = 826 transfer_state = 827 }
				}
			}
			else = {
				GER = { transfer_state = 5 transfer_state = 826 transfer_state = 827 }
			}
		}
		if = {
			limit = { check_variable = { global.RUS_Lusatia_GER < 0.5 } }
			if {
				limit = { check_variable = { global.RUS_Lusatia_annex > global.RUS_Lusatia_ind } }
				if = {
					limit = { POL = { exists = yes } }
					POL = { transfer_state = 65 }
					else = { RUS = { transfer_state = 65 } }
				}
				#else = {
				#	LZT = { transfer_state = 65 }
				#}
			}
			else = {
				GER = { transfer_state = 65 transfer_state = 762 }
			}
		}
		if = {
			limit = { check_variable = { global.FRA_Alsace_Lorraine < 0.5 } }
			GER = { transfer_state = 28 }
			else = {
				FRA = { transfer_state = 28 }
			}
		}
		if = {
			limit = { check_variable = { global.BEL_Eupen_Malmedy < 0.5 } }
			if = {
				limit = { check_variable = { global.FRA_Rheiland_GER < 0.5 } }
				if {
					limit = { check_variable = { global.FRA_Rheiland_annex > global.FRA_Rheiland_ind } check_variable = { global.FRA_Rheiland_annex > global.FRA_Rheiland_demilitarization } }
					FRA = { transfer_state = 786 }
					else = {
						if = {
							limit = { check_variable = { global.FRA_Rheiland_demilitarization > global.FRA_Rheiland_ind } check_variable = { global.FRA_Rheiland_demilitarization > global.FRA_Rheiland_annex } }
							GER = { transfer_state = 786 }
							786 = { set_demilitarized_zone = yes }
							else = { RHE = { transfer_state = 786 } }
						}
					}
					else = {
						GER = { transfer_state = 786 }
					}
				}
			}
			else = {
				BEL = { transfer_state = 786 }
			}
		}
		if = {
			limit = { check_variable = { global.POL_Poznan < 0.5 } }
			GER = { transfer_state = 86 }
			else = {
				if = {
					limit = { POL = { exists = yes } }
					POL = { transfer_state = 86 }
					else = {
						RUS = { transfer_state = 86 }
					}
				}
			}
		}
		if = {
			limit = { check_variable = { global.POL_West_Prussia < 0.5 } }
			GER = { transfer_state = 828 }
			else = {
				if = {
					limit = { POL = { exists = yes } }
					POL = { transfer_state = 828 }
					else = {
						RUS = { transfer_state = 828 }
					}
				}
			}
		}
		if = {
			limit = { check_variable = { global.DEN_Schleswig_GER < 0.5 } }
			if = {
				limit = { check_variable = { global.DEN_Schleswig_all < global.DEN_Schleswig } }
				DEN = { transfer_state = 771 }
				GER = { transfer_state = 941 }
				else = {
					DEN = { transfer_state = 771 transfer_state = 941 }
				}
			}
			else = {
				GER = { transfer_state = 771 transfer_state = 941 }
			}
		}
		if = {
			limit = { check_variable = { global.LIT_Memelland < 0.5 } }
			if = {
				limit = { check_variable = { global.RUS_East_Prussia_ind > global.RUS_East_Prussia_annex } check_variable = { global.RUS_East_Prussia_ind > global.RUS_East_Prussia_GER } }
				PRS = { transfer_state = 188 }
				else = {
					every_country = {
						limit = { controls_state = 189 }
						transfer_state = 188
					}
				}
			}
			else = {
				if = {
					limit = { LIT = { exists = yes } }
					LIT = { transfer_state = 188 }
					else = {
						if = {
							limit = { POL = { controls_state = 189 } }
							POL = { transfer_state = 188 }
							else = {
								RUS = { transfer_state = 188 }
							}
						}
					}
				}
			}
		}
		if = {
			limit = { check_variable = { global.BAV_Bavaria < 0.5 } }
			GER = {
				transfer_state = 52
				transfer_state = 53
				transfer_state = 54
			}
			else = {
				BAV = {
					transfer_state = 52
					transfer_state = 53
					transfer_state = 54
				}
			}
		}
		if = {
			limit = { AUH = { exists = yes } }
			AUH = { transfer_state = 153 transfer_state = 838 }
			else = {
				if = {
					limit = { AUS = { exists = yes } }
					AUS = { transfer_state = 153 transfer_state = 838 }
				}
			}
		}
	}
}



# Переговоры о мире
country_event = {
	id = versailles.201
	title = versailles.201.t
	desc = versailles.201.desc
	picture = GFX_report_event_ger_november_revolution

	is_triggered_only = yes
	
	#Затягивать
	option = {
		name = versailles.201.a
		ai_chance = {
			factor = 1
		}
		GER = { country_event = { id = versailles.202 days = 3 } }
	}
	
	#Конечно, сразу примим
	option = {
		name = versailles.201.b
		GER = { country_event = { id = versailles.210 days = 5 } }
		ai_chance = {
			factor = 0
			modifier ={
				add = 99999
				OR = {
					GER = { controls_state = 29 }
					controls_state = 18
					controls_state = 27
					FRA = { surrender_progress > 0.15 NOT = { is_in_faction_with = GER } }
				}
				GER = { controls_state = 34 }
				GER = { controls_state = 833 }
				GER = { controls_state = 786 }
				GER = { controls_state = 8 }
				GER = { controls_state = 42 }
				GER = { controls_state = 850 }
				GER = { controls_state = 28 }
				GER = { controls_state = 50 }
			}
		}
	}
}
# Ответ амеров
country_event = {
	id = versailles.202
	title = versailles.202.t
	desc = versailles.202.desc
	picture = GFX_report_event_ger_november_revolution

	is_triggered_only = yes
	
	option = {
		name = versailles.202.a
		hidden_effect = {
			if = {
				limit = { has_country_flag = GER_monarchy_fall }
				country_event = { id = versailles.4 days = 1 }
				else = {
					set_country_flag = GER_peace_negotiations_with_Entente
					add_war_support = -0.05
					add_stability = -0.03
				}
			}
		}
	}
}

# Мир
country_event = {
	id = versailles.210
	title = versailles.210.t
	desc = versailles.210.desc
	picture = GFX_report_event_ger_november_revolution

	is_triggered_only = yes
	
	option = {
		name = versailles.210.a
		GER = {
			add_war_support = -0.1
			add_stability = 0.1
			release = LUX
			delete_unit_template_and_units = {
				division_template = "Mobilized infanterie Division"
			}
			delete_unit_template_and_units = {
				division_template = "Mobilized garnison Division"
			}
			end_puppet = FRA
		}
		FRA = {
			transfer_state = 17
			transfer_state = 18
			transfer_state = 29
		}
		if = {
			limit = { TUR = { NOT = { controls_state = 291 } } }
			ENG = { transfer_state = 291 }
		}
		if = {
			limit = { TUR = { NOT = { controls_state = 676 } } }
			ENG = { transfer_state = 676 }
		}
		if = {
			limit = { TUR = { NOT = { controls_state = 675 } } }
			ENG = { transfer_state = 675 transfer_state = 906 }
		}
		if = {
			limit = { TUR = { NOT = { controls_state = 454 } } }
			ENG = { transfer_state = 454 }
		}
		if = {
			limit = { TUR = { NOT = { controls_state = 455 } } }
			ENG = { transfer_state = 455 transfer_state = 905 }
		}
		if = {
			limit = { TUR = { NOT = { controls_state = 553 } } }
			FRA = { transfer_state = 553 }
		}
		if = {
			limit = { TUR = { NOT = { controls_state = 554 } } }
			FRA = { transfer_state = 554 }
		}
		if = {
			limit = { TUR = { NOT = { controls_state = 677 } } }
			FRA = { transfer_state = 677 }
		}
		if = {
			limit = { TUR = { NOT = { controls_state = 680 } } }
			FRA = { transfer_state = 680 }
		}
		
		if = {
			limit = { ENG = { NOT = { controls_state = 656 } } }
			TUR = { transfer_state = 656 }
		}
		if = {
			limit = { ENG = { NOT = { controls_state = 413 } } }
			TUR = { transfer_state = 413 }
		}
		if = {
			limit = { ENG = { NOT = { controls_state = 917 } } }
			ENG = { end_puppet = EGY }
		}
		every_country = {
			limit = { is_in_faction_with = GER }
			every_country = {
				limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } is_faction_leader = yes }
				ROOT = { white_peace = PREV }
			}
		}
		clr_global_flag = WWI_is_now
		set_global_flag = WWI_end_white_peace
	}
}